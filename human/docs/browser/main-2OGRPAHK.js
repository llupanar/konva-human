var Ty=Object.create;var _l=Object.defineProperty,xy=Object.defineProperties,Ay=Object.getOwnPropertyDescriptor,Ny=Object.getOwnPropertyDescriptors,Ry=Object.getOwnPropertyNames,xo=Object.getOwnPropertySymbols,Oy=Object.getPrototypeOf,Cl=Object.prototype.hasOwnProperty,_h=Object.prototype.propertyIsEnumerable;var Dh=(t,e,n)=>e in t?_l(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S=(t,e)=>{for(var n in e||={})Cl.call(e,n)&&Dh(t,n,e[n]);if(xo)for(var n of xo(e))_h.call(e,n)&&Dh(t,n,e[n]);return t},he=(t,e)=>xy(t,Ny(e));var Ch=(t,e)=>{var n={};for(var r in t)Cl.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&xo)for(var r of xo(t))e.indexOf(r)<0&&_h.call(t,r)&&(n[r]=t[r]);return n};var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Py=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Ry(e))!Cl.call(t,i)&&i!==n&&_l(t,i,{get:()=>e[i],enumerable:!(r=Ay(e,i))||r.enumerable});return t};var Fy=(t,e,n)=>(n=t!=null?Ty(Oy(t)):{},Py(e||!t||!t.__esModule?_l(n,"default",{value:t,enumerable:!0}):n,t));var G=x(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te._registerNode=Te.Konva=Te.glob=void 0;var Wb=Math.PI/180;function Yb(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}Te.glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{};Te.Konva={_global:Te.glob,version:"9.3.15",isBrowser:Yb(),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle(t){return Te.Konva.angleDeg?t*Wb:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Te.Konva.DD.isDragging},isTransforming(){var t;return(t=Te.Konva.Transformer)===null||t===void 0?void 0:t.isTransforming()},isDragReady(){return!!Te.Konva.DD.node},releaseCanvasOnDestroy:!0,document:Te.glob.document,_injectGlobal(t){Te.glob.Konva=t}};var Kb=t=>{Te.Konva[t.prototype.getClassName()]=t};Te._registerNode=Kb;Te.Konva._injectGlobal(Te.Konva)});var ge=x(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.Util=ce.Transform=void 0;var yd=G(),Cd=class t{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new t(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),r=Math.sin(e),i=this.m[0]*n+this.m[2]*r,o=this.m[1]*n+this.m[3]*r,s=this.m[0]*-r+this.m[2]*n,a=this.m[1]*-r+this.m[3]*n;return this.m[0]=i,this.m[1]=o,this.m[2]=s,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var r=this.m[0]+this.m[2]*n,i=this.m[1]+this.m[3]*n,o=this.m[2]+this.m[0]*e,s=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=o,this.m[3]=s,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],s=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this.m[4]=s,this.m[5]=a,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,r=-this.m[1]*e,i=-this.m[2]*e,o=this.m[0]*e,s=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=o,this.m[4]=s,this.m[5]=a,this}getMatrix(){return this.m}decompose(){var e=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],o=this.m[4],s=this.m[5],a=e*i-n*r;let l={x:o,y:s,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var c=Math.sqrt(e*e+n*n);l.rotation=n>0?Math.acos(e/c):-Math.acos(e/c),l.scaleX=c,l.scaleY=a/c,l.skewX=(e*r+n*i)/a,l.skewY=0}else if(r!=0||i!=0){var u=Math.sqrt(r*r+i*i);l.rotation=Math.PI/2-(i>0?Math.acos(-r/u):-Math.acos(r/u)),l.scaleX=a/u,l.scaleY=u,l.skewX=0,l.skewY=(e*r+n*i)/a}return l.rotation=ce.Util._getRotation(l.rotation),l}};ce.Transform=Cd;var Xb="[object Array]",Zb="[object Number]",Qb="[object String]",Jb="[object Boolean]",eE=Math.PI/180,tE=180/Math.PI,Dd="#",nE="",rE="0",iE="Konva warning: ",Jm="Konva error: ",oE="rgb(",_d={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},sE=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Js=[],aE=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)};ce.Util={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===Xb},_isNumber(t){return Object.prototype.toString.call(t)===Zb&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===Qb},_isBoolean(t){return Object.prototype.toString.call(t)===Jb},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){Js.push(t),Js.length===1&&aE(function(){let e=Js;Js=[],e.forEach(function(n){n()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=ce.Util.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(t){t=t.replace(Dd,nE);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=rE+t;return Dd+t},getRGB(t){var e;return t in _d?(e=_d[t],{r:e[0],g:e[1],b:e[2]}):t[0]===Dd?this._hexToRgb(t.substring(1)):t.substr(0,4)===oE?(e=sE.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",ce.Util._namedColorToRBA(t)||ce.Util._hex3ColorToRGBA(t)||ce.Util._hex4ColorToRGBA(t)||ce.Util._hex6ColorToRGBA(t)||ce.Util._hex8ColorToRGBA(t)||ce.Util._rgbColorToRGBA(t)||ce.Util._rgbaColorToRGBA(t)||ce.Util._hslColorToRGBA(t)},_namedColorToRBA(t){var e=_d[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((n,r)=>n.slice(-1)==="%"?r===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if(t[0]==="#"&&t.length===9)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if(t[0]==="#"&&t.length===5)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){let[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(n[0])/360,i=Number(n[1])/100,o=Number(n[2])/100,s,a,l;if(i===0)return l=o*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};o<.5?s=o*(1+i):s=o+i-o*i;let c=2*o-s,u=[0,0,0];for(let d=0;d<3;d++)a=r+1/3*-(d-1),a<0&&a++,a>1&&a--,6*a<1?l=c+(s-c)*6*a:2*a<1?l=s:3*a<2?l=c+(s-c)*(2/3-a)*6:l=c,u[d]=l*255;return{r:Math.round(u[0]),g:Math.round(u[1]),b:Math.round(u[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*eE},radToDeg(t){return t*tE},_degToRad(t){return ce.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),ce.Util.degToRad(t)},_radToDeg(t){return ce.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),ce.Util.radToDeg(t)},_getRotation(t){return yd.Konva.angleDeg?ce.Util.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(Jm+t)},error(t){console.error(Jm+t)},warn(t){yd.Konva.showWarnings&&console.warn(iE+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange(t,e,n){return e<=t&&t<n},_getProjectionToSegment(t,e,n,r,i,o){var s,a,l,c=(t-n)*(t-n)+(e-r)*(e-r);if(c==0)s=t,a=e,l=(i-n)*(i-n)+(o-r)*(o-r);else{var u=((i-t)*(n-t)+(o-e)*(r-e))/c;u<0?(s=t,a=e,l=(t-i)*(t-i)+(e-o)*(e-o)):u>1?(s=n,a=r,l=(n-i)*(n-i)+(r-o)*(r-o)):(s=t+u*(n-t),a=e+u*(r-e),l=(s-i)*(s-i)+(a-o)*(a-o))}return[s,a,l]},_getProjectionToLine(t,e,n){var r=ce.Util.cloneObject(t),i=Number.MAX_VALUE;return e.forEach(function(o,s){if(!(!n&&s===e.length-1)){var a=e[(s+1)%e.length],l=ce.Util._getProjectionToSegment(o.x,o.y,a.x,a.y,t.x,t.y),c=l[0],u=l[1],d=l[2];d<i&&(r.x=c,r.y=u,i=d)}}),r},_prepareArrayForTween(t,e,n){var r,i=[],o=[];if(t.length>e.length){var s=e;e=t,t=s}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)o.push({x:e[r],y:e[r+1]});var a=[];return o.forEach(function(l){var c=ce.Util._getProjectionToLine(l,i,n);a.push(c.x),a.push(c.y)}),a},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var n in t)if(t.hasOwnProperty(n)&&t[n]&&typeof t[n]=="object"){if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||ce.Util._isElement(t[n]))if(e.configurable)delete t[n];else return null;else if(ce.Util._prepareToStringify(t[n])===null)if(e.configurable)delete t[n];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){yd.Konva.releaseCanvasOnDestroy&&t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(t,e,n,r){let i=0,o=0,s=0,a=0;typeof r=="number"?i=o=s=a=Math.min(r,e/2,n/2):(i=Math.min(r[0]||0,e/2,n/2),o=Math.min(r[1]||0,e/2,n/2),a=Math.min(r[2]||0,e/2,n/2),s=Math.min(r[3]||0,e/2,n/2)),t.moveTo(i,0),t.lineTo(e-o,0),t.arc(e-o,o,o,Math.PI*3/2,0,!1),t.lineTo(e,n-a),t.arc(e-a,n-a,a,0,Math.PI/2,!1),t.lineTo(s,n),t.arc(s,n-s,s,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,Math.PI*3/2,!1)}}});var q=x(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.getComponentValidator=fe.getBooleanValidator=fe.getNumberArrayValidator=fe.getFunctionValidator=fe.getStringOrGradientValidator=fe.getStringValidator=fe.getNumberOrAutoValidator=fe.getNumberOrArrayOfNumbersValidator=fe.getNumberValidator=fe.alphaComponent=fe.RGBComponent=void 0;var Xt=G(),me=ge();function Zt(t){return me.Util._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||me.Util._isBoolean(t)?t:Object.prototype.toString.call(t)}function lE(t){return t>255?255:t<0?0:Math.round(t)}fe.RGBComponent=lE;function cE(t){return t>1?1:t<1e-4?1e-4:t}fe.alphaComponent=cE;function uE(){if(Xt.Konva.isUnminified)return function(t,e){return me.Util._isNumber(t)||me.Util.warn(Zt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}fe.getNumberValidator=uE;function dE(t){if(Xt.Konva.isUnminified)return function(e,n){let r=me.Util._isNumber(e),i=me.Util._isArray(e)&&e.length==t;return!r&&!i&&me.Util.warn(Zt(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}fe.getNumberOrArrayOfNumbersValidator=dE;function hE(){if(Xt.Konva.isUnminified)return function(t,e){var n=me.Util._isNumber(t),r=t==="auto";return n||r||me.Util.warn(Zt(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}fe.getNumberOrAutoValidator=hE;function fE(){if(Xt.Konva.isUnminified)return function(t,e){return me.Util._isString(t)||me.Util.warn(Zt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}fe.getStringValidator=fE;function pE(){if(Xt.Konva.isUnminified)return function(t,e){let n=me.Util._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||me.Util.warn(Zt(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}fe.getStringOrGradientValidator=pE;function gE(){if(Xt.Konva.isUnminified)return function(t,e){return me.Util._isFunction(t)||me.Util.warn(Zt(t)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),t}}fe.getFunctionValidator=gE;function mE(){if(Xt.Konva.isUnminified)return function(t,e){let n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(me.Util._isArray(t)?t.forEach(function(r){me.Util._isNumber(r)||me.Util.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):me.Util.warn(Zt(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}fe.getNumberArrayValidator=mE;function vE(){if(Xt.Konva.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||me.Util.warn(Zt(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}fe.getBooleanValidator=vE;function yE(t){if(Xt.Konva.isUnminified)return function(e,n){return e==null||me.Util.isObject(e)||me.Util.warn(Zt(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}fe.getComponentValidator=yE});var $=x(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.Factory=void 0;var Je=ge(),DE=q(),so="get",ao="set";vt.Factory={addGetterSetter(t,e,n,r,i){vt.Factory.addGetter(t,e,n),vt.Factory.addSetter(t,e,r,i),vt.Factory.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var r=so+Je.Util._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var i=this.attrs[e];return i===void 0?n:i}},addSetter(t,e,n,r){var i=ao+Je.Util._capitalize(e);t.prototype[i]||vt.Factory.overWriteSetter(t,e,n,r)},overWriteSetter(t,e,n,r){var i=ao+Je.Util._capitalize(e);t.prototype[i]=function(o){return n&&o!==void 0&&o!==null&&(o=n.call(this,o,e)),this._setAttr(e,o),r&&r.call(this),this}},addComponentsGetterSetter(t,e,n,r,i){var o=n.length,s=Je.Util._capitalize,a=so+s(e),l=ao+s(e),c,u;t.prototype[a]=function(){var h={};for(c=0;c<o;c++)u=n[c],h[u]=this.getAttr(e+s(u));return h};var d=(0,DE.getComponentValidator)(n);t.prototype[l]=function(h){var f=this.attrs[e],p;r&&(h=r.call(this,h)),d&&d.call(this,h,e);for(p in h)h.hasOwnProperty(p)&&this._setAttr(e+s(p),h[p]);return h||n.forEach(g=>{this._setAttr(e+s(g),void 0)}),this._fireChangeEvent(e,f,h),i&&i.call(this),this},vt.Factory.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=Je.Util._capitalize(e),r=ao+n,i=so+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(t,e,n,r){Je.Util.error("Adding deprecated "+e);var i=so+Je.Util._capitalize(e),o=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){Je.Util.error(o);var s=this.attrs[e];return s===void 0?n:s},vt.Factory.addSetter(t,e,r,function(){Je.Util.error(o)}),vt.Factory.addOverloadedGetterSetter(t,e)},backCompat(t,e){Je.Util.each(e,function(n,r){var i=t.prototype[r],o=so+Je.Util._capitalize(n),s=ao+Je.Util._capitalize(n);function a(){i.apply(this,arguments),Je.Util.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[n]=a,t.prototype[o]=a,t.prototype[s]=a})},afterSetFilter(){this._filterUpToDate=!1}}});var Ed=x(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.HitContext=_n.SceneContext=_n.Context=void 0;var n0=ge(),_E=G();function CE(t){var e=[],n=t.length,r=n0.Util,i,o;for(i=0;i<n;i++)o=t[i],r._isNumber(o)?o=Math.round(o*1e3)/1e3:r._isString(o)||(o=o+""),e.push(o);return e}var e0=",",wE="(",bE=")",EE="([",SE="])",IE=";",ME="()",TE="=",t0=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],xE=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],AE=100,Xr=class{constructor(e){this.canvas=e,_E.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,i=r.length,o="",s,a,l,c;for(s=0;s<i;s++)a=r[s],l=a.method,l?(c=a.args,o+=l,e?o+=ME:n0.Util._isArray(c[0])?o+=EE+c.join(e0)+SE:(n&&(c=c.map(u=>typeof u=="number"?Math.floor(u):u)),o+=wE+c.join(e0)+bE)):(o+=a.property,e||(o+=TE+a.val)),o+=IE;return o}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=AE&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){let n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){let n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,o,s){this._context.arc(e,n,r,i,o,s)}arcTo(e,n,r,i,o){this._context.arcTo(e,n,r,i,o)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,o,s){this._context.bezierCurveTo(e,n,r,i,o,s)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,o,s){return this._context.createRadialGradient(e,n,r,i,o,s)}drawImage(e,n,r,i,o,s,a,l,c){var u=arguments,d=this._context;u.length===3?d.drawImage(e,n,r):u.length===5?d.drawImage(e,n,r,i,o):u.length===9&&d.drawImage(e,n,r,i,o,s,a,l,c)}ellipse(e,n,r,i,o,s,a,l){this._context.ellipse(e,n,r,i,o,s,a,l)}isPointInPath(e,n,r,i){return r?this._context.isPointInPath(r,e,n,i):this._context.isPointInPath(e,n,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}roundRect(e,n,r,i,o){this._context.roundRect(e,n,r,i,o)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,o,s){this._context.setTransform(e,n,r,i,o,s)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,o,s){this._context.transform(e,n,r,i,o,s)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=t0.length,r=this.setAttr,i,o,s=function(a){var l=e[a],c;e[a]=function(){return o=CE(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:a,args:o}),c}};for(i=0;i<n;i++)s(t0[i]);e.setAttr=function(){r.apply(e,arguments);var a=arguments[0],l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:a,val:l})}}_applyGlobalCompositeOperation(e){let n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}};_n.Context=Xr;xE.forEach(function(t){Object.defineProperty(Xr.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});var wd=class extends Xr{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){let n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){let n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}let i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}let o=e.getFillLinearGradientColorStops();if(o&&r==="linear-gradient"){this._fillLinearGradient(e);return}let s=e.getFillRadialGradientColorStops();if(s&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):o?this._fillLinearGradient(e):s&&this._fillRadialGradient(e)}_strokeLinearGradient(e){let n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(var s=0;s<i.length;s+=2)o.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",o)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=e.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i,o=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",s=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),c=this.canvas.getPixelRatio(),u=l.x*c,d=l.y*c;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",s*Math.min(Math.abs(u),Math.abs(d))),this.setAttr("shadowOffsetX",a.x*u),this.setAttr("shadowOffsetY",a.y*d)}};_n.SceneContext=wd;var bd=class extends Xr{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){let o=e.getStrokeScaleEnabled();if(!o){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),i=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),o||this.restore()}}};_n.HitContext=bd});var lo=x(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.HitCanvas=Cn.SceneCanvas=Cn.Canvas=void 0;var ta=ge(),r0=Ed(),i0=G(),NE=$(),RE=q(),ea;function OE(){if(ea)return ea;var t=ta.Util.createCanvasElement(),e=t.getContext("2d");return ea=function(){var n=i0.Konva._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),ta.Util.releaseCanvas(t),ea}var Zr=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||i0.Konva.pixelRatio||OE();this.pixelRatio=r,this._canvas=ta.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return ta.Util.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Cn.Canvas=Zr;NE.Factory.addGetterSetter(Zr,"pixelRatio",void 0,(0,RE.getNumberValidator)());var Sd=class extends Zr{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new r0.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}};Cn.SceneCanvas=Sd;var Id=class extends Zr{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new r0.HitContext(this),this.setSize(e.width,e.height)}};Cn.HitCanvas=Id});var na=x(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.DD=void 0;var co=G(),PE=ge();Oe.DD={get isDragging(){var t=!1;return Oe.DD._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return Oe.DD._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){let e=[];Oe.DD._dragElements.forEach((n,r)=>{let{node:i}=n,o=i.getStage();o.setPointersPositions(t),n.pointerId===void 0&&(n.pointerId=PE.Util._getFirstPointerId(t));let s=o._changedPointerPositions.find(c=>c.id===n.pointerId);if(s){if(n.dragStatus!=="dragging"){var a=i.dragDistance(),l=Math.max(Math.abs(s.x-n.startPointerPos.x),Math.abs(s.y-n.startPointerPos.y));if(l<a||(i.startDrag({evt:t}),!i.isDragging()))return}i._setDragPosition(t,n),e.push(i)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)})},_endDragBefore(t){let e=[];Oe.DD._dragElements.forEach(n=>{let{node:r}=n,i=r.getStage();if(t&&i.setPointersPositions(t),!i._changedPointerPositions.find(a=>a.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(Oe.DD.justDragged=!0,co.Konva._mouseListenClick=!1,co.Konva._touchListenClick=!1,co.Konva._pointerListenClick=!1,n.dragStatus="stopped");let s=n.node.getLayer()||n.node instanceof co.Konva.Stage&&n.node;s&&e.indexOf(s)===-1&&e.push(s)}),e.forEach(n=>{n.draw()})},_endDragAfter(t){Oe.DD._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&Oe.DD._dragElements.delete(n)})}};co.Konva.isBrowser&&(window.addEventListener("mouseup",Oe.DD._endDragBefore,!0),window.addEventListener("touchend",Oe.DD._endDragBefore,!0),window.addEventListener("mousemove",Oe.DD._drag),window.addEventListener("touchmove",Oe.DD._drag),window.addEventListener("mouseup",Oe.DD._endDragAfter,!1),window.addEventListener("touchend",Oe.DD._endDragAfter,!1))});var ve=x(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.Node=void 0;var Y=ge(),ho=$(),uo=lo(),wn=G(),ot=na(),ye=q(),ia="absoluteOpacity",ra="allEventListeners",Qt="absoluteTransform",o0="absoluteScale",tr="canvas",FE="Change",kE="children",LE="konva",Md="listening",s0="mouseenter",a0="mouseleave",l0="set",c0="Shape",oa=" ",u0="stage",bn="transform",jE="Stage",Td="visible",VE=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(oa),UE=1,P=class t{constructor(e){this._id=UE++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===bn||e===Qt)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),i=e===bn||e===Qt,o=r===void 0||i&&r.dirty===!0;return o&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){let i=n.map(o=>o+"Change.konva").join(oa);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(tr)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Qt&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(tr)){let{scene:e,filter:n,hit:r}=this._cache.get(tr);Y.Util.releaseCanvas(e,n,r),this._cache.delete(tr)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));var i=Math.ceil(n.width||r.width),o=Math.ceil(n.height||r.height),s=n.pixelRatio,a=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,c=n.offset||0,u=n.drawBorder||!1,d=n.hitCanvasPixelRatio||1;if(!i||!o){Y.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}let h=Math.abs(Math.round(r.x)-a)>.5?1:0,f=Math.abs(Math.round(r.y)-l)>.5?1:0;i+=c*2+h,o+=c*2+f,a-=c,l-=c;var p=new uo.SceneCanvas({pixelRatio:s,width:i,height:o}),g=new uo.SceneCanvas({pixelRatio:s,width:0,height:0,willReadFrequently:!0}),m=new uo.HitCanvas({pixelRatio:d,width:i,height:o}),v=p.getContext(),y=m.getContext();return m.isCache=!0,p.isCache=!0,this._cache.delete(tr),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(p.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),v.save(),y.save(),v.translate(-a,-l),y.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(ia),this._clearSelfAndDescendantCache(o0),this.drawScene(p,this),this.drawHit(m,this),this._isUnderCache=!1,v.restore(),y.restore(),u&&(v.save(),v.beginPath(),v.rect(0,0,i,o),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),this._cache.set(tr,{scene:p,filter:g,hit:m,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(tr)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i=1/0,o=1/0,s=-1/0,a=-1/0,l=this.getAbsoluteTransform(n);return r.forEach(function(c){var u=l.point(c);i===void 0&&(i=s=u.x,o=a=u.y),i=Math.min(i,u.x),o=Math.min(o,u.y),s=Math.max(s,u.x),a=Math.max(a,u.y)}),{x:i,y:o,width:s-i,height:a-o}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);let n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,o=i.getContext(),s,a,l,c;if(e){if(!this._filterUpToDate){var u=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(s=e.length,o.clear(),o.drawImage(r._canvas,0,0,r.getWidth()/u,r.getHeight()/u),a=o.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<s;l++){if(c=e[l],typeof c!="function"){Y.Util.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,a),o.putImageData(a,0,0)}}catch(d){Y.Util.error("Unable to apply filter. "+d.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(ra),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(oa),i=r.length,o,s,a,l,c;for(o=0;o<i;o++)s=r[o],a=s.split("."),l=a[0],c=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:n});return this}off(e,n){var r=(e||"").split(oa),i=r.length,o,s,a,l,c,u;if(this._cache&&this._cache.delete(ra),!e)for(s in this.eventListeners)this._off(s);for(o=0;o<i;o++)if(a=r[o],l=a.split("."),c=l[0],u=l[1],c)this.eventListeners[c]&&this._off(c,u,n);else for(s in this.eventListeners)this._off(s,u,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var i=this;this.on(e,function(o){for(var s=o.target.findAncestors(n,!0,i),a=0;a<s.length;a++)o=Y.Util.cloneObject(o),o.currentTarget=s[a],r.call(s[a],o)})}remove(){return this.isDragging()&&this.stopDrag(),ot.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Qt),this._clearSelfAndDescendantCache(ia),this._clearSelfAndDescendantCache(o0),this._clearSelfAndDescendantCache(u0),this._clearSelfAndDescendantCache(Td),this._clearSelfAndDescendantCache(Md)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+Y.Util._capitalize(e);return Y.Util._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==kE&&(r=l0+Y.Util._capitalize(n),Y.Util._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(Md,this._isListening)}_isListening(e){if(!this.listening())return!1;let r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(Td,this._isVisible)}_isVisible(e){if(!this.visible())return!1;let r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;ot.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(s.node.nodeType==="Stage"||s.node.getLayer()===r)&&(i=!0)});var o=!n&&!wn.Konva.hitOnDragEnabled&&(i||wn.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,i,o,s,a;function l(u){for(i=[],o=u.length,s=0;s<o;s++)a=u[s],r++,a.nodeType!==c0&&(i=i.concat(a.getChildren().slice())),a._id===n._id&&(s=o);i.length>0&&i[0].getDepth()<=e&&l(i)}let c=this.getStage();return n.nodeType!==jE&&c&&l(c.getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(bn),this._clearSelfAndDescendantCache(Qt)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let e=this.getStage();if(!e)return null;var n=e.getPointerPosition();if(!n)return null;var r=this.getAbsoluteTransform().copy();return r.invert(),r.point(n)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),o=new Y.Transform,s=this.offset();return o.m=i.slice(),o.translate(s.x,s.y),o.getTranslation()}setAbsolutePosition(e){let s=this._clearTransform(),{x:n,y:r}=s,i=Ch(s,["x","y"]);this.attrs.x=n,this.attrs.y=r,this._clearCache(bn);var o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(e.x,e.y),e={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(bn),this._clearSelfAndDescendantCache(Qt),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,i=this.x(),o=this.y();return n!==void 0&&(i+=n),r!==void 0&&(o+=r),this.setPosition({x:i,y:o}),this}_eachAncestorReverse(e,n){var r=[],i=this.getParent(),o,s;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(o=r.length,s=0;s<o;s++)e(r[s])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Y.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Y.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Y.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Y.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Y.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Y.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ia,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e=this.getAttrs(),n,r,i,o,s;let a={attrs:{},className:this.getClassName()};for(n in e)r=e[n],s=Y.Util.isObject(r)&&!Y.Util._isPlainObject(r)&&!Y.Util._isArray(r),!s&&(i=typeof this[n]=="function"&&this[n],delete e[n],o=i?i.call(this):null,e[n]=r,o!==r&&(a.attrs[n]=r));return Y.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var i=[];n&&this._isMatch(e)&&i.push(this);for(var o=this.parent;o;){if(o===r)return i;o._isMatch(e)&&i.push(o),o=o.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,i,o;for(i=0;i<r;i++)if(o=n[i],Y.Util.isValidSelector(o)||(Y.Util.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Y.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Y.Util.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(u0,this._getStage)}_getStage(){var e=this.getParent();return e?e.getStage():null}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Qt,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Y.Transform,this._eachAncestorReverse(function(i){var o=i.transformsEnabled();o==="all"?n.multiply(i.getTransform()):o==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),n;n=this._cache.get(Qt)||new Y.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){let i=this.attrs.x||0,o=this.attrs.y||0,s=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(i-s,o-a)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();let i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(bn,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(bn)||new Y.Transform;r.reset();var i=this.x(),o=this.y(),s=wn.Konva.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,c=this.attrs.skewX||0,u=this.attrs.skewY||0,d=this.attrs.offsetX||0,h=this.attrs.offsetY||0;return(i!==0||o!==0)&&r.translate(i,o),s!==0&&r.rotate(s),(c!==0||u!==0)&&r.skew(c,u),(a!==1||l!==1)&&r.scale(a,l),(d!==0||h!==0)&&r.translate(-1*d,-1*h),r.dirty=!1,r}clone(e){var n=Y.Util.cloneObject(this.attrs),r,i,o,s,a;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],o=i.length,s=0;s<o;s++)a=i[s],a.name.indexOf(LE)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(a));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(n.x),o=e.y!==void 0?e.y:Math.floor(n.y),s=e.pixelRatio||1,a=new uo.SceneCanvas({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:s}),l=a.getContext();let c=new uo.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(i),height:a.height/a.pixelRatio+Math.abs(o),pixelRatio:a.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||o)&&l.translate(-1*i,-1*o),this.drawScene(a,void 0,c),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((n,r)=>{try{let i=e?.callback;i&&delete e.callback,Y.Util._urlToImage(this.toDataURL(e),function(o){n(o),i?.(o)})}catch(i){r(i)}})}toBlob(e){return new Promise((n,r)=>{try{let i=e?.callback;i&&delete e.callback,this.toCanvas(e).toBlob(o=>{n(o),i?.(o)},e?.mimeType,e?.quality)}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():wn.Konva.dragDistance}_off(e,n,r){var i=this.eventListeners[e],o,s,a;for(o=0;o<i.length;o++)if(s=i[o].name,a=i[o].handler,(s!=="konva"||n==="konva")&&(!n||s===n)&&(!r||r===a)){if(i.splice(o,1),i.length===0){delete this.eventListeners[e];break}o--}}_fireChangeEvent(e,n,r){this._fire(e+FE,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;let n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[l0+Y.Util._capitalize(e)];return Y.Util._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(wn.Konva.autoDrawEnabled){let e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!Y.Util.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){n&&this.nodeType===c0&&(n.target=this);var i=(e===s0||e===a0)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(e,n);var o=(e===s0||e===a0)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!o&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,r,i;let o=(n=this._cache.get(ra))!==null&&n!==void 0?n:{},s=o?.[e];if(s===void 0){s=[];let a=Object.getPrototypeOf(this);for(;a;){let l=(i=(r=a.eventListeners)===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:[];s.push(...l),a=Object.getPrototypeOf(a)}o[e]=s,this._cache.set(ra,o)}return s}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;let r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);let o=this.eventListeners[e];if(o)for(var i=0;i<o.length;i++)o[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition();if(r){var o=r._getPointerById(n)||r._changedPointerPositions[0]||i;ot.DD._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-i.x,y:o.y-i.y},dragStatus:"ready",pointerId:n})}}startDrag(e,n=!0){ot.DD._dragElements.has(this._id)||this._createDragElement(e);let r=ot.DD._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){let r=this.getStage()._getPointerById(n.pointerId);if(r){var i={x:r.x-n.offset.x,y:r.y-n.offset.y},o=this.dragBoundFunc();if(o!==void 0){let s=o.call(this,i,e);s?i=s:Y.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){let n=ot.DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),ot.DD._endDragBefore(e),ot.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){let e=ot.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||wn.Konva.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var i=!1;ot.DD._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(i=!0)}),i||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;let n=ot.DD._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&ot.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){let n=this.getStage();if(!n)return!1;let r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return Y.Util.haveIntersection(r,this.getClientRect())}static create(e,n){return Y.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=t.prototype.getClassName.call(e),i=e.children,o,s,a;n&&(e.attrs.container=n),wn.Konva[r]||(Y.Util.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");let l=wn.Konva[r];if(o=new l(e.attrs),i)for(s=i.length,a=0;a<s;a++)o.add(t._createNode(i[a]));return o}};sa.Node=P;P.prototype.nodeType="Node";P.prototype._attrsAffectingSize=[];P.prototype.eventListeners={};P.prototype.on.call(P.prototype,VE,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(bn),this._clearSelfAndDescendantCache(Qt)});P.prototype.on.call(P.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Td)});P.prototype.on.call(P.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Md)});P.prototype.on.call(P.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ia)});var ae=ho.Factory.addGetterSetter;ae(P,"zIndex");ae(P,"absolutePosition");ae(P,"position");ae(P,"x",0,(0,ye.getNumberValidator)());ae(P,"y",0,(0,ye.getNumberValidator)());ae(P,"globalCompositeOperation","source-over",(0,ye.getStringValidator)());ae(P,"opacity",1,(0,ye.getNumberValidator)());ae(P,"name","",(0,ye.getStringValidator)());ae(P,"id","",(0,ye.getStringValidator)());ae(P,"rotation",0,(0,ye.getNumberValidator)());ho.Factory.addComponentsGetterSetter(P,"scale",["x","y"]);ae(P,"scaleX",1,(0,ye.getNumberValidator)());ae(P,"scaleY",1,(0,ye.getNumberValidator)());ho.Factory.addComponentsGetterSetter(P,"skew",["x","y"]);ae(P,"skewX",0,(0,ye.getNumberValidator)());ae(P,"skewY",0,(0,ye.getNumberValidator)());ho.Factory.addComponentsGetterSetter(P,"offset",["x","y"]);ae(P,"offsetX",0,(0,ye.getNumberValidator)());ae(P,"offsetY",0,(0,ye.getNumberValidator)());ae(P,"dragDistance",null,(0,ye.getNumberValidator)());ae(P,"width",0,(0,ye.getNumberValidator)());ae(P,"height",0,(0,ye.getNumberValidator)());ae(P,"listening",!0,(0,ye.getBooleanValidator)());ae(P,"preventDefault",!0,(0,ye.getBooleanValidator)());ae(P,"filters",null,function(t){return this._filterUpToDate=!1,t});ae(P,"visible",!0,(0,ye.getBooleanValidator)());ae(P,"transformsEnabled","all",(0,ye.getStringValidator)());ae(P,"size");ae(P,"dragBoundFunc");ae(P,"draggable",!1,(0,ye.getBooleanValidator)());ho.Factory.backCompat(P,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})});var fo=x(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.Container=void 0;var Qr=$(),xd=ve(),aa=q(),Jt=class extends xd.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];let n=this.children||[];var r=[];return n.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}let r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(i=>{let o=i._isMatch(e);return o&&r.push(i),!!(o&&n)}),r}_descendants(e){let n=!1,r=this.getChildren();for(let i of r){if(n=e(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){var e=xd.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=xd.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(r=>{r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n,r){var i=this.getLayer(),o=e||i&&i.getCanvas(),s=o&&o.getContext(),a=this._getCanvasCache(),l=a&&a.scene,c=o&&o.isCache;if(!this.isVisible()&&!c)return this;if(l){s.save();var u=this.getAbsoluteTransform(n).getMatrix();s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",o,n,r);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,o=i&&i.getContext(),s=this._getCanvasCache(),a=s&&s.hit;if(a){o.save();var l=this.getAbsoluteTransform(n).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r,i){var o,s=n&&n.getContext(),a=this.clipWidth(),l=this.clipHeight(),c=this.clipFunc(),u=typeof a=="number"&&typeof l=="number"||c;let d=r===this;if(u){s.save();var h=this.getAbsoluteTransform(r),f=h.getMatrix();s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),s.beginPath();let v;if(c)v=c.call(this,s,this);else{var p=this.clipX(),g=this.clipY();s.rect(p||0,g||0,a,l)}s.clip.apply(s,v),f=h.copy().invert().getMatrix(),s.transform(f[0],f[1],f[2],f[3],f[4],f[5])}var m=!d&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";m&&(s.save(),s._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(v){v[e](n,r,i)}),m&&s.restore(),u&&s.restore()}getClientRect(e={}){var n,r=e.skipTransform,i=e.relativeTo,o,s,a,l,c={x:1/0,y:1/0,width:0,height:0},u=this;(n=this.children)===null||n===void 0||n.forEach(function(g){if(g.visible()){var m=g.getClientRect({relativeTo:u,skipShadow:e.skipShadow,skipStroke:e.skipStroke});m.width===0&&m.height===0||(o===void 0?(o=m.x,s=m.y,a=m.x+m.width,l=m.y+m.height):(o=Math.min(o,m.x),s=Math.min(s,m.y),a=Math.max(a,m.x+m.width),l=Math.max(l,m.y+m.height)))}});for(var d=this.find("Shape"),h=!1,f=0;f<d.length;f++){var p=d[f];if(p._isVisible(this)){h=!0;break}}return h&&o!==void 0?c={x:o,y:s,width:a-o,height:l-s}:c={x:0,y:0,width:0,height:0},r?c:this._transformedRect(c,i)}};la.Container=Jt;Qr.Factory.addComponentsGetterSetter(Jt,"clip",["x","y","width","height"]);Qr.Factory.addGetterSetter(Jt,"clipX",void 0,(0,aa.getNumberValidator)());Qr.Factory.addGetterSetter(Jt,"clipY",void 0,(0,aa.getNumberValidator)());Qr.Factory.addGetterSetter(Jt,"clipWidth",void 0,(0,aa.getNumberValidator)());Qr.Factory.addGetterSetter(Jt,"clipHeight",void 0,(0,aa.getNumberValidator)());Qr.Factory.addGetterSetter(Jt,"clipFunc")});var Nd=x(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.releaseCapture=st.setPointerCapture=st.hasPointerCapture=st.createEvent=st.getCapturedShape=void 0;var BE=G(),po=new Map,d0=BE.Konva._global.PointerEvent!==void 0;function HE(t){return po.get(t)}st.getCapturedShape=HE;function Ad(t){return{evt:t,pointerId:t.pointerId}}st.createEvent=Ad;function GE(t,e){return po.get(t)===e}st.hasPointerCapture=GE;function $E(t,e){h0(t),e.getStage()&&(po.set(t,e),d0&&e._fire("gotpointercapture",Ad(new PointerEvent("gotpointercapture"))))}st.setPointerCapture=$E;function h0(t,e){let n=po.get(t);if(!n)return;let r=n.getStage();r&&r.content,po.delete(t),d0&&n._fire("lostpointercapture",Ad(new PointerEvent("lostpointercapture")))}st.releaseCapture=h0});var I0=x(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.Stage=Rt.stages=void 0;var Nt=ge(),qE=$(),f0=fo(),De=G(),Rd=lo(),Od=na(),zE=G(),en=Nd(),WE="Stage",YE="string",p0="px",KE="mouseout",m0="mouseleave",v0="mouseover",y0="mouseenter",D0="mousemove",_0="mousedown",C0="mouseup",go="pointermove",mo="pointerdown",ei="pointerup",vo="pointercancel",XE="lostpointercapture",ca="pointerout",ua="pointerleave",da="pointerover",ha="pointerenter",Fd="contextmenu",w0="touchstart",b0="touchend",E0="touchmove",S0="touchcancel",kd="wheel",ZE=5,QE=[[y0,"_pointerenter"],[_0,"_pointerdown"],[D0,"_pointermove"],[C0,"_pointerup"],[m0,"_pointerleave"],[w0,"_pointerdown"],[E0,"_pointermove"],[b0,"_pointerup"],[S0,"_pointercancel"],[v0,"_pointerover"],[kd,"_wheel"],[Fd,"_contextmenu"],[mo,"_pointerdown"],[go,"_pointermove"],[ei,"_pointerup"],[vo,"_pointercancel"],[XE,"_lostpointercapture"]],Pd={mouse:{[ca]:KE,[ua]:m0,[da]:v0,[ha]:y0,[go]:D0,[mo]:_0,[ei]:C0,[vo]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[ca]:"touchout",[ua]:"touchleave",[da]:"touchover",[ha]:"touchenter",[go]:E0,[mo]:w0,[ei]:b0,[vo]:S0,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[ca]:ca,[ua]:ua,[da]:da,[ha]:ha,[go]:go,[mo]:mo,[ei]:ei,[vo]:vo,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},yo=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",Jr=t=>{let e=yo(t);if(e==="pointer")return De.Konva.pointerEventsEnabled&&Pd.pointer;if(e==="touch")return Pd.touch;if(e==="mouse")return Pd.mouse};function g0(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&Nt.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}var JE="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";Rt.stages=[];var ti=class extends f0.Container{constructor(e){super(g0(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Rt.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{g0(this.attrs)}),this._checkVisibility()}_validateAdd(e){let n=e.getType()==="Layer",r=e.getType()==="FastLayer";n||r||Nt.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===YE){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var r;e.charAt(0)!=="#"?r=e:r=e.slice(1),e=document.getElementById(r)}if(!e)throw"Can not find container in document with id "+r}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,r;for(r=0;r<n;r++)e[r].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),f0.Container.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&Nt.Util._isInDocument(e)&&this.container().removeChild(e);var n=Rt.stages.indexOf(this);return n>-1&&Rt.stages.splice(n,1),Nt.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(Nt.Util.warn(JE),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new Rd.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),r=n.getContext()._context,i=this.children;return(e.x||e.y)&&r.translate(-1*e.x,-1*e.y),i.forEach(function(o){if(o.isVisible()){var s=o._toKonvaCanvas(e);r.drawImage(s._canvas,e.x,e.y,s.getWidth()/s.getPixelRatio(),s.getHeight()/s.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,r=n.length,i=r-1,o;for(o=i;o>=0;o--){let s=n[o].getIntersection(e);if(s)return s}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+p0,this.content.style.height=n+p0),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(r=>{r.setSize({width:e,height:n}),r.draw()})}add(e,...n){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var i=this.children.length;return i>ZE&&Nt.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),De.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return en.hasPointerCapture(e,this)}setPointerCapture(e){en.setPointerCapture(e,this)}releaseCapture(e){en.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){De.Konva.isBrowser&&QE.forEach(([e,n])=>{this.content.addEventListener(e,r=>{this[n](r)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);let n=Jr(e.type);n&&this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);let n=Jr(e.type);n&&this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){let n=Jr(e.type),r=yo(e.type);if(n){this.setPointersPositions(e);var i=this._getTargetShape(r),o=!(De.Konva.isDragging()||De.Konva.isTransforming())||De.Konva.hitOnDragEnabled;i&&o?(i._fireAndBubble(n.pointerout,{evt:e}),i._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[r+"targetShape"]=null):o&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}}_pointerdown(e){let n=Jr(e.type),r=yo(e.type);if(n){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach(o=>{var s=this.getIntersection(o);if(Od.DD.justDragged=!1,De.Konva["_"+r+"ListenClick"]=!0,!s||!s.isListening()){this[r+"ClickStartShape"]=void 0;return}De.Konva.capturePointerEventsEnabled&&s.setPointerCapture(o.id),this[r+"ClickStartShape"]=s,s._fireAndBubble(n.pointerdown,{evt:e,pointerId:o.id}),i=!0;let a=e.type.indexOf("touch")>=0;s.preventDefault()&&e.cancelable&&a&&e.preventDefault()}),i||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){let n=Jr(e.type),r=yo(e.type);if(!n)return;De.Konva.isDragging()&&Od.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var i=!(De.Konva.isDragging()||De.Konva.isTransforming())||De.Konva.hitOnDragEnabled;if(!i)return;var o={};let s=!1;var a=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{let c=en.getCapturedShape(l.id)||this.getIntersection(l),u=l.id,d={evt:e,pointerId:u};var h=a!==c;if(h&&a&&(a._fireAndBubble(n.pointerout,S({},d),c),a._fireAndBubble(n.pointerleave,S({},d),c)),c){if(o[c._id])return;o[c._id]=!0}c&&c.isListening()?(s=!0,h&&(c._fireAndBubble(n.pointerover,S({},d),a),c._fireAndBubble(n.pointerenter,S({},d),a),this[r+"targetShape"]=c),c._fireAndBubble(n.pointermove,S({},d))):a&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:u}),this[r+"targetShape"]=null)}),s||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){let n=Jr(e.type),r=yo(e.type);if(!n)return;this.setPointersPositions(e);let i=this[r+"ClickStartShape"],o=this[r+"ClickEndShape"];var s={};let a=!1;this._changedPointerPositions.forEach(l=>{let c=en.getCapturedShape(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),s[c._id])return;s[c._id]=!0}let u=l.id,d={evt:e,pointerId:u},h=!1;De.Konva["_"+r+"InDblClickWindow"]?(h=!0,clearTimeout(this[r+"DblTimeout"])):Od.DD.justDragged||(De.Konva["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){De.Konva["_"+r+"InDblClickWindow"]=!1},De.Konva.dblClickWindow),c&&c.isListening()?(a=!0,this[r+"ClickEndShape"]=c,c._fireAndBubble(n.pointerup,S({},d)),De.Konva["_"+r+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(n.pointerclick,S({},d)),h&&o&&o===c&&c._fireAndBubble(n.pointerdblclick,S({},d)))):(this[r+"ClickEndShape"]=null,De.Konva["_"+r+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:u}),h&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:u}))}),a||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),De.Konva["_"+r+"ListenClick"]=!1,e.cancelable&&r!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Fd,{evt:e}):this._fire(Fd,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(kd,{evt:e}):this._fire(kd,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);let n=en.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(ei,en.createEvent(e)),en.releaseCapture(e.pointerId)}_lostpointercapture(e){en.releaseCapture(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),r=null,i=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-n.left)/n.scaleX,y:(o.clientY-n.top)/n.scaleY})})):(r=(e.clientX-n.left)/n.scaleX,i=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:Nt.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:r,y:i,id:Nt.Util._getFirstPointerId(e)}])}_setPointerPosition(e){Nt.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Rd.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Rd.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!De.Konva.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return Nt.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Rt.Stage=ti;ti.prototype.nodeType=WE;(0,zE._registerNode)(ti);qE.Factory.addGetterSetter(ti,"container");De.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{Rt.stages.forEach(t=>{t.batchDraw()})})});var Ie=x(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.Shape=tn.shapes=void 0;var eS=G(),Ot=ge(),M=$(),M0=ve(),be=q(),tS=G(),Ld=Nd(),T0="hasShadow",x0="shadowRGBA",A0="patternImage",N0="linearGradient",R0="radialGradient",fa;function jd(){return fa||(fa=Ot.Util.createCanvasElement().getContext("2d"),fa)}tn.shapes={};function nS(t){let e=this.attrs.fillRule;e?t.fill(e):t.fill()}function rS(t){t.stroke()}function iS(t){let e=this.attrs.fillRule;e?t.fill(e):t.fill()}function oS(t){t.stroke()}function sS(){this._clearCache(T0)}function aS(){this._clearCache(x0)}function lS(){this._clearCache(A0)}function cS(){this._clearCache(N0)}function uS(){this._clearCache(R0)}var w=class extends M0.Node{constructor(e){super(e);let n;for(;n=Ot.Util.getRandomColor(),!(n&&!(n in tn.shapes)););this.colorKey=n,tn.shapes[n]=this}getContext(){return Ot.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Ot.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(T0,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(A0,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=jd();let n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){let r=new Ot.Transform;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(eS.Konva.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let i=r.getMatrix(),o=typeof DOMMatrix>"u"?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);n.setTransform(o)}return n}}_getLinearGradient(){return this._getCache(N0,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=jd(),r=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),o=n.createLinearGradient(r.x,r.y,i.x,i.y),s=0;s<e.length;s+=2)o.addColorStop(e[s],e[s+1]);return o}}_getRadialGradient(){return this._getCache(R0,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=jd(),r=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),o=n.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),s=0;s<e.length;s+=2)o.addColorStop(e[s],e[s+1]);return o}}getShadowRGBA(){return this._getCache(x0,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=Ot.Util.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage();if(!n)return!1;let r=n.bufferHitCanvas;return r.getContext().clear(),this.drawHit(r,void 0,!0),r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return M0.Node.prototype.destroy.call(this),delete tn.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;let i=e||this.hasFill(),o=this.hasStroke(),s=this.getAbsoluteOpacity()!==1;if(i&&o&&s)return!0;let a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(i&&o&&a&&l)}setStrokeHitEnabled(e){Ot.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let n=!1,r=this.getParent();for(;r;){if(r.isCached()){n=!0;break}r=r.getParent()}let i=e.skipTransform,o=e.relativeTo||n&&this.getStage()||void 0,s=this.getSelfRect(),l=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,c=s.width+l,u=s.height+l,d=!e.skipShadow&&this.hasShadow(),h=d?this.shadowOffsetX():0,f=d?this.shadowOffsetY():0,p=c+Math.abs(h),g=u+Math.abs(f),m=d&&this.shadowBlur()||0,v=p+m*2,y=g+m*2,D={width:v,height:y,x:-(l/2+m)+Math.min(h,0)+s.x,y:-(l/2+m)+Math.min(f,0)+s.y};return i?D:this._transformedRect(D,o)}drawScene(e,n,r){var i=this.getLayer(),o=e||i.getCanvas(),s=o.getContext(),a=this._getCanvasCache(),l=this.getSceneFunc(),c=this.hasShadow(),u,d,h=o.isCache,f=n===this;if(!this.isVisible()&&!f)return this;if(a){s.save();var p=this.getAbsoluteTransform(n).getMatrix();return s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!l)return this;if(s.save(),this._useBufferCanvas()&&!h){u=this.getStage();let v=r||u.bufferCanvas;d=v.getContext(),d.clear(),d.save(),d._applyLineJoin(this);var g=this.getAbsoluteTransform(n).getMatrix();d.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.call(this,d,this),d.restore();var m=v.pixelRatio;c&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(v._canvas,0,0,v.width/m,v.height/m)}else{if(s._applyLineJoin(this),!f){var g=this.getAbsoluteTransform(n).getMatrix();s.transform(g[0],g[1],g[2],g[3],g[4],g[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}c&&s._applyShadow(this),l.call(this,s,this)}return s.restore(),this}drawHit(e,n,r=!1){if(!this.shouldDrawHit(n,r))return this;var i=this.getLayer(),o=e||i.hitCanvas,s=o&&o.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||Ot.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){s.save();var u=this.getAbsoluteTransform(n).getMatrix();return s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!a)return this;if(s.save(),s._applyLineJoin(this),!(this===n)){var h=this.getAbsoluteTransform(n).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return a.call(this,s,this),s.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),r=this._getCachedSceneCanvas(),i=n.hit,o=i.getContext(),s=i.getWidth(),a=i.getHeight(),l,c,u,d,h,f;o.clear(),o.drawImage(r._canvas,0,0,s,a);try{for(l=o.getImageData(0,0,s,a),c=l.data,u=c.length,d=Ot.Util._hexToRgb(this.colorKey),h=0;h<u;h+=4)f=c[h+3],f>e?(c[h]=d.r,c[h+1]=d.g,c[h+2]=d.b,c[h+3]=255):c[h+3]=0;o.putImageData(l,0,0)}catch(p){Ot.Util.error("Unable to draw hit graph from cached scene canvas. "+p.message)}return this}hasPointerCapture(e){return Ld.hasPointerCapture(e,this)}setPointerCapture(e){Ld.setPointerCapture(e,this)}releaseCapture(e){Ld.releaseCapture(e,this)}};tn.Shape=w;w.prototype._fillFunc=nS;w.prototype._strokeFunc=rS;w.prototype._fillFuncHit=iS;w.prototype._strokeFuncHit=oS;w.prototype._centroid=!1;w.prototype.nodeType="Shape";(0,tS._registerNode)(w);w.prototype.eventListeners={};w.prototype.on.call(w.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",sS);w.prototype.on.call(w.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",aS);w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",lS);w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",cS);w.prototype.on.call(w.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",uS);M.Factory.addGetterSetter(w,"stroke",void 0,(0,be.getStringOrGradientValidator)());M.Factory.addGetterSetter(w,"strokeWidth",2,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"fillAfterStrokeEnabled",!1);M.Factory.addGetterSetter(w,"hitStrokeWidth","auto",(0,be.getNumberOrAutoValidator)());M.Factory.addGetterSetter(w,"strokeHitEnabled",!0,(0,be.getBooleanValidator)());M.Factory.addGetterSetter(w,"perfectDrawEnabled",!0,(0,be.getBooleanValidator)());M.Factory.addGetterSetter(w,"shadowForStrokeEnabled",!0,(0,be.getBooleanValidator)());M.Factory.addGetterSetter(w,"lineJoin");M.Factory.addGetterSetter(w,"lineCap");M.Factory.addGetterSetter(w,"sceneFunc");M.Factory.addGetterSetter(w,"hitFunc");M.Factory.addGetterSetter(w,"dash");M.Factory.addGetterSetter(w,"dashOffset",0,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"shadowColor",void 0,(0,be.getStringValidator)());M.Factory.addGetterSetter(w,"shadowBlur",0,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"shadowOpacity",1,(0,be.getNumberValidator)());M.Factory.addComponentsGetterSetter(w,"shadowOffset",["x","y"]);M.Factory.addGetterSetter(w,"shadowOffsetX",0,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"shadowOffsetY",0,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"fillPatternImage");M.Factory.addGetterSetter(w,"fill",void 0,(0,be.getStringOrGradientValidator)());M.Factory.addGetterSetter(w,"fillPatternX",0,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"fillPatternY",0,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"fillLinearGradientColorStops");M.Factory.addGetterSetter(w,"strokeLinearGradientColorStops");M.Factory.addGetterSetter(w,"fillRadialGradientStartRadius",0);M.Factory.addGetterSetter(w,"fillRadialGradientEndRadius",0);M.Factory.addGetterSetter(w,"fillRadialGradientColorStops");M.Factory.addGetterSetter(w,"fillPatternRepeat","repeat");M.Factory.addGetterSetter(w,"fillEnabled",!0);M.Factory.addGetterSetter(w,"strokeEnabled",!0);M.Factory.addGetterSetter(w,"shadowEnabled",!0);M.Factory.addGetterSetter(w,"dashEnabled",!0);M.Factory.addGetterSetter(w,"strokeScaleEnabled",!0);M.Factory.addGetterSetter(w,"fillPriority","color");M.Factory.addComponentsGetterSetter(w,"fillPatternOffset",["x","y"]);M.Factory.addGetterSetter(w,"fillPatternOffsetX",0,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"fillPatternOffsetY",0,(0,be.getNumberValidator)());M.Factory.addComponentsGetterSetter(w,"fillPatternScale",["x","y"]);M.Factory.addGetterSetter(w,"fillPatternScaleX",1,(0,be.getNumberValidator)());M.Factory.addGetterSetter(w,"fillPatternScaleY",1,(0,be.getNumberValidator)());M.Factory.addComponentsGetterSetter(w,"fillLinearGradientStartPoint",["x","y"]);M.Factory.addComponentsGetterSetter(w,"strokeLinearGradientStartPoint",["x","y"]);M.Factory.addGetterSetter(w,"fillLinearGradientStartPointX",0);M.Factory.addGetterSetter(w,"strokeLinearGradientStartPointX",0);M.Factory.addGetterSetter(w,"fillLinearGradientStartPointY",0);M.Factory.addGetterSetter(w,"strokeLinearGradientStartPointY",0);M.Factory.addComponentsGetterSetter(w,"fillLinearGradientEndPoint",["x","y"]);M.Factory.addComponentsGetterSetter(w,"strokeLinearGradientEndPoint",["x","y"]);M.Factory.addGetterSetter(w,"fillLinearGradientEndPointX",0);M.Factory.addGetterSetter(w,"strokeLinearGradientEndPointX",0);M.Factory.addGetterSetter(w,"fillLinearGradientEndPointY",0);M.Factory.addGetterSetter(w,"strokeLinearGradientEndPointY",0);M.Factory.addComponentsGetterSetter(w,"fillRadialGradientStartPoint",["x","y"]);M.Factory.addGetterSetter(w,"fillRadialGradientStartPointX",0);M.Factory.addGetterSetter(w,"fillRadialGradientStartPointY",0);M.Factory.addComponentsGetterSetter(w,"fillRadialGradientEndPoint",["x","y"]);M.Factory.addGetterSetter(w,"fillRadialGradientEndPointX",0);M.Factory.addGetterSetter(w,"fillRadialGradientEndPointY",0);M.Factory.addGetterSetter(w,"fillPatternRotation",0);M.Factory.addGetterSetter(w,"fillRule",void 0,(0,be.getStringValidator)());M.Factory.backCompat(w,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})});var Bd=x(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.Layer=void 0;var nn=ge(),Vd=fo(),ni=ve(),Ud=$(),O0=lo(),dS=q(),hS=Ie(),fS=G(),pS="#",gS="beforeDraw",mS="draw",P0=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],vS=P0.length,En=class extends Vd.Container{constructor(e){super(e),this.canvas=new O0.SceneCanvas,this.hitCanvas=new O0.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){ni.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=ni.Node.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(ni.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(ni.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return ni.Node.prototype.remove.call(this),e&&e.parentNode&&nn.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&nn.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),ni.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){nn.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){nn.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,nn.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(let i=0;i<vS;i++){let o=P0[i],s=this._getIntersection({x:e.x+o.x*n,y:e.y+o.y*n}),a=s.shape;if(a)return a;if(r=!!s.antialiased,!s.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){let n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){let o=nn.Util._rgbToHex(r[0],r[1],r[2]),s=hS.shapes[pS+o];return s?{shape:s}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(gS,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Vd.Container.prototype.drawScene.call(this,i,n),this._fire(mS,{node:this}),this}drawHit(e,n){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Vd.Container.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){nn.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return nn.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return nn.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};pa.Layer=En;En.prototype.nodeType="Layer";(0,fS._registerNode)(En);Ud.Factory.addGetterSetter(En,"imageSmoothingEnabled",!0);Ud.Factory.addGetterSetter(En,"clearBeforeDraw",!0);Ud.Factory.addGetterSetter(En,"hitGraphEnabled",!0,(0,dS.getBooleanValidator)())});var F0=x(ga=>{"use strict";Object.defineProperty(ga,"__esModule",{value:!0});ga.FastLayer=void 0;var yS=ge(),DS=Bd(),_S=G(),Do=class extends DS.Layer{constructor(e){super(e),this.listening(!1),yS.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};ga.FastLayer=Do;Do.prototype.nodeType="FastLayer";(0,_S._registerNode)(Do)});var va=x(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.Group=void 0;var CS=ge(),wS=fo(),bS=G(),_o=class extends wS.Container{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&CS.Util.throw("You may only add groups and shapes to groups.")}};ma.Group=_o;_o.prototype.nodeType="Group";(0,bS._registerNode)(_o)});var Da=x(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.Animation=void 0;var Hd=G(),k0=ge(),Gd=function(){return Hd.glob.performance&&Hd.glob.performance.now?function(){return Hd.glob.performance.now()}:function(){return new Date().getTime()}}(),ri=class t{constructor(e,n){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Gd(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){let n=this.layers,r=n.length;for(let i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){let n=t.animations,r=n.length;for(let i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Gd(),t._addAnimation(this),this}stop(){return t._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){let n=e.id,r=this.animations,i=r.length;for(let o=0;o<i;o++)if(r[o].id===n){this.animations.splice(o,1);break}}static _runFrames(){let e={},n=this.animations;for(let r=0;r<n.length;r++){let i=n[r],o=i.layers,s=i.func;i._updateFrameObject(Gd());let a=o.length,l;if(s?l=s.call(i,i.frame)!==!1:l=!0,!!l)for(let c=0;c<a;c++){let u=o[c];u._id!==void 0&&(e[u._id]=u)}}for(let r in e)e.hasOwnProperty(r)&&e[r].batchDraw()}static _animationLoop(){let e=t;e.animations.length?(e._runFrames(),k0.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,k0.Util.requestAnimFrame(this._animationLoop))}};ya.Animation=ri;ri.animations=[];ri.animIdCounter=0;ri.animRunning=!1});var U0=x(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.Easings=Pt.Tween=void 0;var rn=ge(),ES=Da(),SS=ve(),IS=G(),MS={node:1,duration:1,easing:1,onFinish:1,yoyo:1},TS=1,L0=2,j0=3,xS=0,V0=["fill","stroke","shadowColor"],$d=class{constructor(e,n,r,i,o,s,a){this.prop=e,this.propFunc=n,this.begin=i,this._pos=i,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=o-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=L0,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=j0,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===L0?this.setTime(e):this.state===j0&&this.setTime(this.duration-e)}pause(){this.state=TS,this.fire("onPause")}getTimer(){return new Date().getTime()}},ii=class t{constructor(e){var n=this,r=e.node,i=r._id,o,s=e.easing||Pt.Easings.Linear,a=!!e.yoyo,l;typeof e.duration>"u"?o=.3:e.duration===0?o=.001:o=e.duration,this.node=r,this._id=xS++;var c=r.getLayer()||(r instanceof IS.Konva.Stage?r.getLayers():null);c||rn.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ES.Animation(function(){n.tween.onEnterFrame()},c),this.tween=new $d(l,function(u){n._tweenFunc(u)},s,0,1,o*1e3,a),this._addListeners(),t.attrs[i]||(t.attrs[i]={}),t.attrs[i][this._id]||(t.attrs[i][this._id]={}),t.tweens[i]||(t.tweens[i]={});for(l in e)MS[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var r=this.node,i=r._id,o,s,a,l,c,u,d,h;if(a=t.tweens[i][e],a&&delete t.attrs[i][a][e],o=r.getAttr(e),rn.Util._isArray(n))if(s=[],c=Math.max(n.length,o.length),e==="points"&&n.length!==o.length&&(n.length>o.length?(d=o,o=rn.Util._prepareArrayForTween(o,n,r.closed())):(u=n,n=rn.Util._prepareArrayForTween(n,o,r.closed()))),e.indexOf("fill")===0)for(l=0;l<c;l++)if(l%2===0)s.push(n[l]-o[l]);else{var f=rn.Util.colorToRGBA(o[l]);h=rn.Util.colorToRGBA(n[l]),o[l]=f,s.push({r:h.r-f.r,g:h.g-f.g,b:h.b-f.b,a:h.a-f.a})}else for(l=0;l<c;l++)s.push(n[l]-o[l]);else V0.indexOf(e)!==-1?(o=rn.Util.colorToRGBA(o),h=rn.Util.colorToRGBA(n),s={r:h.r-o.r,g:h.g-o.g,b:h.b-o.b,a:h.a-o.a}):s=n-o;t.attrs[i][this._id][e]={start:o,diff:s,end:n,trueEnd:u,trueStart:d},t.tweens[i][e]=this._id}_tweenFunc(e){var n=this.node,r=t.attrs[n._id][this._id],i,o,s,a,l,c,u,d;for(i in r){if(o=r[i],s=o.start,a=o.diff,d=o.end,rn.Util._isArray(s))if(l=[],u=Math.max(s.length,d.length),i.indexOf("fill")===0)for(c=0;c<u;c++)c%2===0?l.push((s[c]||0)+a[c]*e):l.push("rgba("+Math.round(s[c].r+a[c].r*e)+","+Math.round(s[c].g+a[c].g*e)+","+Math.round(s[c].b+a[c].b*e)+","+(s[c].a+a[c].a*e)+")");else for(c=0;c<u;c++)l.push((s[c]||0)+a[c]*e);else V0.indexOf(i)!==-1?l="rgba("+Math.round(s.r+a.r*e)+","+Math.round(s.g+a.g*e)+","+Math.round(s.b+a.b*e)+","+(s.a+a.a*e)+")":l=s+a*e;n.setAttr(i,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=t.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=t.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,r=t.tweens[e],i;this.pause();for(i in r)delete t.tweens[e][i];delete t.attrs[e][n]}};Pt.Tween=ii;ii.attrs={};ii.tweens={};SS.Node.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var n=new ii(t);n.play()};Pt.Easings={BackEaseIn(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},ElasticEaseIn(t,e,n,r,i,o){var s=0;return t===0?e:(t/=r)===1?e+n:(o||(o=r*.3),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o))+e)},ElasticEaseOut(t,e,n,r,i,o){var s=0;return t===0?e:(t/=r)===1?e+n:(o||(o=r*.3),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-s)*(2*Math.PI)/o)+n+e)},ElasticEaseInOut(t,e,n,r,i,o){var s=0;return t===0?e:(t/=r/2)===2?e+n:(o||(o=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,s=o/4):s=o/(2*Math.PI)*Math.asin(n/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-s)*(2*Math.PI)/o)*.5+n+e)},BounceEaseOut(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,n,r){return n-Pt.Easings.BounceEaseOut(r-t,0,n,r)+e},BounceEaseInOut(t,e,n,r){return t<r/2?Pt.Easings.BounceEaseIn(t*2,0,n,r)*.5+e:Pt.Easings.BounceEaseOut(t*2-r,0,n,r)*.5+n*.5+e},EaseIn(t,e,n,r){return n*(t/=r)*t+e},EaseOut(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,n,r){return n*t/r+e}}});var $0=x(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.Konva=void 0;var AS=G(),qd=ge(),NS=ve(),RS=fo(),B0=I0(),OS=Bd(),PS=F0(),FS=va(),kS=na(),H0=Ie(),LS=Da(),G0=U0(),jS=Ed(),VS=lo();oi.Konva=qd.Util._assign(AS.Konva,{Util:qd.Util,Transform:qd.Transform,Node:NS.Node,Container:RS.Container,Stage:B0.Stage,stages:B0.stages,Layer:OS.Layer,FastLayer:PS.FastLayer,Group:FS.Group,DD:kS.DD,Shape:H0.Shape,shapes:H0.shapes,Animation:LS.Animation,Tween:G0.Tween,Easings:G0.Easings,Context:jS.Context,Canvas:VS.Canvas});oi.default=oi.Konva});var z0=x(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.Arc=void 0;var _a=$(),US=Ie(),q0=G(),Ca=q(),BS=G(),yt=class extends US.Shape{_sceneFunc(e){var n=q0.Konva.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){let e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=q0.Konva.getAngle(r?360-this.angle():this.angle()),o=Math.cos(Math.min(i,Math.PI)),s=1,a=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),c=o*(o>0?e:n),u=s*(s>0?n:e),d=a*(a>0?e:n),h=l*(l>0?n:e);return{x:c,y:r?-1*h:d,width:u-c,height:h-d}}};wa.Arc=yt;yt.prototype._centroid=!0;yt.prototype.className="Arc";yt.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,BS._registerNode)(yt);_a.Factory.addGetterSetter(yt,"innerRadius",0,(0,Ca.getNumberValidator)());_a.Factory.addGetterSetter(yt,"outerRadius",0,(0,Ca.getNumberValidator)());_a.Factory.addGetterSetter(yt,"angle",0,(0,Ca.getNumberValidator)());_a.Factory.addGetterSetter(yt,"clockwise",!1,(0,Ca.getBooleanValidator)())});var Wd=x(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.Line=void 0;var ba=$(),HS=Ie(),Y0=q(),GS=G();function zd(t,e,n,r,i,o,s){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2)),c=s*a/(a+l),u=s*l/(a+l),d=n-c*(i-t),h=r-c*(o-e),f=n+u*(i-t),p=r+u*(o-e);return[d,h,f,p]}function W0(t,e){var n=t.length,r=[],i,o;for(i=2;i<n-2;i+=2)o=zd(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),!isNaN(o[0])&&(r.push(o[0]),r.push(o[1]),r.push(t[i]),r.push(t[i+1]),r.push(o[2]),r.push(o[3]));return r}var Ft=class extends HS.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,i=this.tension(),o=this.closed(),s=this.bezier(),a,l,c;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){for(a=this.getTensionPoints(),l=a.length,c=o?0:4,o||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);c<l-2;)e.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);o||e.quadraticCurveTo(a[l-2],a[l-1],n[r-2],n[r-1])}else if(s)for(c=2;c<r;)e.bezierCurveTo(n[c++],n[c++],n[c++],n[c++],n[c++],n[c++]);else for(c=2;c<r;c+=2)e.lineTo(n[c],n[c+1]);o?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():W0(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),i=zd(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),o=zd(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),s=W0(e,r),a=[i[2],i[3]].concat(s).concat([o[0],o[1],e[n-2],e[n-1],o[2],o[3],i[0],i[1],e[0],e[1]]);return a}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],i=e[1],o=e[1],s,a,l=0;l<e.length/2;l++)s=e[l*2],a=e[l*2+1],n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,a),o=Math.max(o,a);return{x:n,y:i,width:r-n,height:o-i}}};Ea.Line=Ft;Ft.prototype.className="Line";Ft.prototype._attrsAffectingSize=["points","bezier","tension"];(0,GS._registerNode)(Ft);ba.Factory.addGetterSetter(Ft,"closed",!1);ba.Factory.addGetterSetter(Ft,"bezier",!1);ba.Factory.addGetterSetter(Ft,"tension",0,(0,Y0.getNumberValidator)());ba.Factory.addGetterSetter(Ft,"points",[],(0,Y0.getNumberArrayValidator)())});var K0=x(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.t2length=Pe.getQuadraticArcLength=Pe.getCubicArcLength=Pe.binomialCoefficients=Pe.cValues=Pe.tValues=void 0;Pe.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]];Pe.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]];Pe.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];var $S=(t,e,n)=>{let r,i,o;r=n/2,i=0;for(let a=0;a<20;a++)o=r*Pe.tValues[20][a]+r,i+=Pe.cValues[20][a]*zS(t,e,o);return r*i};Pe.getCubicArcLength=$S;var qS=(t,e,n)=>{n===void 0&&(n=1);let r=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],s=2*e[1]-2*e[0],a=4*(r*r+i*i),l=4*(r*o+i*s),c=o*o+s*s;if(a===0)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));let u=l/(2*a),d=c/a,h=n+u,f=d-u*u,p=h*h+f>0?Math.sqrt(h*h+f):0,g=u*u+f>0?Math.sqrt(u*u+f):0,m=u+Math.sqrt(u*u+f)!==0?f*Math.log(Math.abs((h+p)/(u+g))):0;return Math.sqrt(a)/2*(h*p-u*g+m)};Pe.getQuadraticArcLength=qS;function zS(t,e,n){let r=Yd(1,n,t),i=Yd(1,n,e),o=r*r+i*i;return Math.sqrt(o)}var Yd=(t,e,n)=>{let r=n.length-1,i,o;if(r===0)return 0;if(t===0){o=0;for(let s=0;s<=r;s++)o+=Pe.binomialCoefficients[r][s]*Math.pow(1-e,r-s)*Math.pow(e,s)*n[s];return o}else{i=new Array(r);for(let s=0;s<r;s++)i[s]=r*(n[s+1]-n[s]);return Yd(t-1,e,i)}},WS=(t,e,n)=>{let r=1,i=t/e,o=(t-n(i))/e,s=0;for(;r>.001;){let a=n(i+o),l=Math.abs(t-a)/e;if(l<r)r=l,i+=o;else{let c=n(i-o),u=Math.abs(t-c)/e;u<r?(r=u,i-=o):o/=2}if(s++,s>500)break}return i};Pe.t2length=WS});var Ia=x(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.Path=void 0;var YS=$(),KS=Ie(),XS=G(),si=K0(),nr=class t extends KS.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=t.parsePathData(this.data()),this.pathLength=t.getPathLength(this.dataArray)}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,i=0;i<n.length;i++){var o=n[i].command,s=n[i].points;switch(o){case"L":e.lineTo(s[0],s[1]);break;case"M":e.moveTo(s[0],s[1]);break;case"C":e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":e.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var a=s[0],l=s[1],c=s[2],u=s[3],d=s[4],h=s[5],f=s[6],p=s[7],g=c>u?c:u,m=c>u?1:c/u,v=c>u?u/c:1;e.translate(a,l),e.rotate(f),e.scale(m,v),e.arc(0,0,g,d,d+h,1-p),e.scale(1/m,1/v),e.rotate(-f),e.translate(-a,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(c){if(c.command==="A"){var u=c.points[4],d=c.points[5],h=c.points[4]+d,f=Math.PI/180;if(Math.abs(u-h)<f&&(f=Math.abs(u-h)),d<0)for(let p=u-f;p>h;p-=f){let g=t.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],p,0);e.push(g.x,g.y)}else for(let p=u+f;p<h;p+=f){let g=t.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],p,0);e.push(g.x,g.y)}}else if(c.command==="C")for(let p=0;p<=1;p+=.01){let g=t.getPointOnCubicBezier(p,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(g.x,g.y)}else e=e.concat(c.points)});for(var n=e[0],r=e[0],i=e[1],o=e[1],s,a,l=0;l<e.length/2;l++)s=e[l*2],a=e[l*2+1],isNaN(s)||(n=Math.min(n,s),r=Math.max(r,s)),isNaN(a)||(i=Math.min(i,a),o=Math.max(o,a));return{x:n,y:i,width:r-n,height:o-i}}getLength(){return this.pathLength}getPointAtLength(e){return t.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPathLength(e){let n=0;for(var r=0;r<e.length;++r)n+=e[r].pathLength;return n}static getPointAtLengthOfDataArray(e,n){var r,i=0,o=n.length;if(!o)return null;for(;i<o&&e>n[i].pathLength;)e-=n[i].pathLength,++i;if(i===o)return r=n[i-1].points.slice(-2),{x:r[0],y:r[1]};if(e<.01)return r=n[i].points.slice(0,2),{x:r[0],y:r[1]};var s=n[i],a=s.points;switch(s.command){case"L":return t.getPointOnLine(e,s.start.x,s.start.y,a[0],a[1]);case"C":return t.getPointOnCubicBezier((0,si.t2length)(e,t.getPathLength(n),g=>(0,si.getCubicArcLength)([s.start.x,a[0],a[2],a[4]],[s.start.y,a[1],a[3],a[5]],g)),s.start.x,s.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return t.getPointOnQuadraticBezier((0,si.t2length)(e,t.getPathLength(n),g=>(0,si.getQuadraticArcLength)([s.start.x,a[0],a[2]],[s.start.y,a[1],a[3]],g)),s.start.x,s.start.y,a[0],a[1],a[2],a[3]);case"A":var l=a[0],c=a[1],u=a[2],d=a[3],h=a[4],f=a[5],p=a[6];return h+=f*e/s.pathLength,t.getPointOnEllipticalArc(l,c,u,d,h,p)}return null}static getPointOnLine(e,n,r,i,o,s,a){s=s??n,a=a??r;let l=this.getLineLength(n,r,i,o);if(l<1e-10)return{x:n,y:r};if(i===n)return{x:s,y:a+(o>r?e:-e)};let c=(o-r)/(i-n),u=Math.sqrt(e*e/(1+c*c))*(i<n?-1:1),d=c*u;if(Math.abs(a-r-c*(s-n))<1e-10)return{x:s+u,y:a+d};let h=((s-n)*(i-n)+(a-r)*(o-r))/(l*l),f=n+h*(i-n),p=r+h*(o-r),g=this.getLineLength(s,a,f,p),m=Math.sqrt(e*e-g*g),v=Math.sqrt(m*m/(1+c*c))*(i<n?-1:1),y=c*v;return{x:f+v,y:p+y}}static getPointOnCubicBezier(e,n,r,i,o,s,a,l,c){function u(m){return m*m*m}function d(m){return 3*m*m*(1-m)}function h(m){return 3*m*(1-m)*(1-m)}function f(m){return(1-m)*(1-m)*(1-m)}var p=l*u(e)+s*d(e)+i*h(e)+n*f(e),g=c*u(e)+a*d(e)+o*h(e)+r*f(e);return{x:p,y:g}}static getPointOnQuadraticBezier(e,n,r,i,o,s,a){function l(f){return f*f}function c(f){return 2*f*(1-f)}function u(f){return(1-f)*(1-f)}var d=s*l(e)+i*c(e)+n*u(e),h=a*l(e)+o*c(e)+r*u(e);return{x:d,y:h}}static getPointOnEllipticalArc(e,n,r,i,o,s){var a=Math.cos(s),l=Math.sin(s),c={x:r*Math.cos(o),y:i*Math.sin(o)};return{x:e+(c.x*a-c.y*l),y:n+(c.x*l+c.y*a)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);var o=n.split("|"),s=[],a=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,d;for(i=1;i<o.length;i++){var h=o[i],f=h.charAt(0);for(h=h.slice(1),a.length=0;d=u.exec(h);)a.push(d[0]);for(var p=[],g=0,m=a.length;g<m;g++){if(a[g]==="00"){p.push(0,0);continue}var v=parseFloat(a[g]);isNaN(v)?p.push(0):p.push(v)}for(;p.length>0&&!isNaN(p[0]);){var y="",D=[],_=l,b=c,C,A,I,R,N,T,le,ue,xe,Fe;switch(f){case"l":l+=p.shift(),c+=p.shift(),y="L",D.push(l,c);break;case"L":l=p.shift(),c=p.shift(),D.push(l,c);break;case"m":var oe=p.shift(),qe=p.shift();if(l+=oe,c+=qe,y="M",s.length>2&&s[s.length-1].command==="z"){for(var Ge=s.length-2;Ge>=0;Ge--)if(s[Ge].command==="M"){l=s[Ge].points[0]+oe,c=s[Ge].points[1]+qe;break}}D.push(l,c),f="l";break;case"M":l=p.shift(),c=p.shift(),y="M",D.push(l,c),f="L";break;case"h":l+=p.shift(),y="L",D.push(l,c);break;case"H":l=p.shift(),y="L",D.push(l,c);break;case"v":c+=p.shift(),y="L",D.push(l,c);break;case"V":c=p.shift(),y="L",D.push(l,c);break;case"C":D.push(p.shift(),p.shift(),p.shift(),p.shift()),l=p.shift(),c=p.shift(),D.push(l,c);break;case"c":D.push(l+p.shift(),c+p.shift(),l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),y="C",D.push(l,c);break;case"S":A=l,I=c,C=s[s.length-1],C.command==="C"&&(A=l+(l-C.points[2]),I=c+(c-C.points[3])),D.push(A,I,p.shift(),p.shift()),l=p.shift(),c=p.shift(),y="C",D.push(l,c);break;case"s":A=l,I=c,C=s[s.length-1],C.command==="C"&&(A=l+(l-C.points[2]),I=c+(c-C.points[3])),D.push(A,I,l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),y="C",D.push(l,c);break;case"Q":D.push(p.shift(),p.shift()),l=p.shift(),c=p.shift(),D.push(l,c);break;case"q":D.push(l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),y="Q",D.push(l,c);break;case"T":A=l,I=c,C=s[s.length-1],C.command==="Q"&&(A=l+(l-C.points[0]),I=c+(c-C.points[1])),l=p.shift(),c=p.shift(),y="Q",D.push(A,I,l,c);break;case"t":A=l,I=c,C=s[s.length-1],C.command==="Q"&&(A=l+(l-C.points[0]),I=c+(c-C.points[1])),l+=p.shift(),c+=p.shift(),y="Q",D.push(A,I,l,c);break;case"A":R=p.shift(),N=p.shift(),T=p.shift(),le=p.shift(),ue=p.shift(),xe=l,Fe=c,l=p.shift(),c=p.shift(),y="A",D=this.convertEndpointToCenterParameterization(xe,Fe,l,c,le,ue,R,N,T);break;case"a":R=p.shift(),N=p.shift(),T=p.shift(),le=p.shift(),ue=p.shift(),xe=l,Fe=c,l+=p.shift(),c+=p.shift(),y="A",D=this.convertEndpointToCenterParameterization(xe,Fe,l,c,le,ue,R,N,T);break}s.push({command:y||f,points:D,start:{x:_,y:b},pathLength:this.calcLength(_,b,y||f,D)})}(f==="z"||f==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,n,r,i){var o,s,a,l,c=t;switch(r){case"L":return c.getLineLength(e,n,i[0],i[1]);case"C":return(0,si.getCubicArcLength)([e,i[0],i[2],i[4]],[n,i[1],i[3],i[5]],1);case"Q":return(0,si.getQuadraticArcLength)([e,i[0],i[2]],[n,i[1],i[3]],1);case"A":o=0;var u=i[4],d=i[5],h=i[4]+d,f=Math.PI/180;if(Math.abs(u-h)<f&&(f=Math.abs(u-h)),s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),d<0)for(l=u-f;l>h;l-=f)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(s.x,s.y,a.x,a.y),s=a;else for(l=u+f;l<h;l+=f)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),o+=c.getLineLength(s.x,s.y,a.x,a.y),s=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),o+=c.getLineLength(s.x,s.y,a.x,a.y),o}return 0}static convertEndpointToCenterParameterization(e,n,r,i,o,s,a,l,c){var u=c*(Math.PI/180),d=Math.cos(u)*(e-r)/2+Math.sin(u)*(n-i)/2,h=-1*Math.sin(u)*(e-r)/2+Math.cos(u)*(n-i)/2,f=d*d/(a*a)+h*h/(l*l);f>1&&(a*=Math.sqrt(f),l*=Math.sqrt(f));var p=Math.sqrt((a*a*(l*l)-a*a*(h*h)-l*l*(d*d))/(a*a*(h*h)+l*l*(d*d)));o===s&&(p*=-1),isNaN(p)&&(p=0);var g=p*a*h/l,m=p*-l*d/a,v=(e+r)/2+Math.cos(u)*g-Math.sin(u)*m,y=(n+i)/2+Math.sin(u)*g+Math.cos(u)*m,D=function(N){return Math.sqrt(N[0]*N[0]+N[1]*N[1])},_=function(N,T){return(N[0]*T[0]+N[1]*T[1])/(D(N)*D(T))},b=function(N,T){return(N[0]*T[1]<N[1]*T[0]?-1:1)*Math.acos(_(N,T))},C=b([1,0],[(d-g)/a,(h-m)/l]),A=[(d-g)/a,(h-m)/l],I=[(-1*d-g)/a,(-1*h-m)/l],R=b(A,I);return _(A,I)<=-1&&(R=Math.PI),_(A,I)>=1&&(R=0),s===0&&R>0&&(R=R-2*Math.PI),s===1&&R<0&&(R=R+2*Math.PI),[v,y,a,l,C,R,u,s]}};Sa.Path=nr;nr.prototype.className="Path";nr.prototype._attrsAffectingSize=["data"];(0,XS._registerNode)(nr);YS.Factory.addGetterSetter(nr,"data")});var Q0=x(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.Arrow=void 0;var Ma=$(),ZS=Wd(),Z0=q(),QS=G(),X0=Ia(),on=class extends ZS.Line{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),i=r,o=this.tension()!==0&&r.length>4;o&&(i=this.getTensionPoints());var s=this.pointerLength(),a=r.length,l,c;if(o){let h=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[a-2],r[a-1]],f=X0.Path.calcLength(i[i.length-4],i[i.length-3],"C",h),p=X0.Path.getPointOnQuadraticBezier(Math.min(1,1-s/f),h[0],h[1],h[2],h[3],h[4],h[5]);l=r[a-2]-p.x,c=r[a-1]-p.y}else l=r[a-2]-r[a-4],c=r[a-1]-r[a-3];var u=(Math.atan2(c,l)+n)%n,d=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(u),e.moveTo(0,0),e.lineTo(-s,d/2),e.lineTo(-s,-d/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),o?(l=(i[0]+i[2])/2-r[0],c=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],c=r[3]-r[1]),e.rotate((Math.atan2(-c,-l)+n)%n),e.moveTo(0,0),e.lineTo(-s,d/2),e.lineTo(-s,-d/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){let e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}};Ta.Arrow=on;on.prototype.className="Arrow";(0,QS._registerNode)(on);Ma.Factory.addGetterSetter(on,"pointerLength",10,(0,Z0.getNumberValidator)());Ma.Factory.addGetterSetter(on,"pointerWidth",10,(0,Z0.getNumberValidator)());Ma.Factory.addGetterSetter(on,"pointerAtBeginning",!1);Ma.Factory.addGetterSetter(on,"pointerAtEnding",!0)});var J0=x(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.Circle=void 0;var JS=$(),eI=Ie(),tI=q(),nI=G(),Sn=class extends eI.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};xa.Circle=Sn;Sn.prototype._centroid=!0;Sn.prototype.className="Circle";Sn.prototype._attrsAffectingSize=["radius"];(0,nI._registerNode)(Sn);JS.Factory.addGetterSetter(Sn,"radius",0,(0,tI.getNumberValidator)())});var tv=x(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.Ellipse=void 0;var Kd=$(),rI=Ie(),ev=q(),iI=G(),kt=class extends rI.Shape{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};Aa.Ellipse=kt;kt.prototype.className="Ellipse";kt.prototype._centroid=!0;kt.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,iI._registerNode)(kt);Kd.Factory.addComponentsGetterSetter(kt,"radius",["x","y"]);Kd.Factory.addGetterSetter(kt,"radiusX",0,(0,ev.getNumberValidator)());Kd.Factory.addGetterSetter(kt,"radiusY",0,(0,ev.getNumberValidator)())});var nv=x(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.Image=void 0;var Xd=ge(),rr=$(),oI=Ie(),sI=G(),Co=q(),at=class t extends oI.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){let e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){let n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),o=this.attrs.image,s;if(o){let a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?s=[o,this.cropX(),this.cropY(),a,l,0,0,n,r]:s=[o,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?Xd.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),o&&(i&&e.clip(),e.drawImage.apply(e,s))}_hitFunc(e){var n=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?Xd.Util.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var i=Xd.Util.createImageElement();i.onload=function(){var o=new t({image:i});n(o)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}};Na.Image=at;at.prototype.className="Image";(0,sI._registerNode)(at);rr.Factory.addGetterSetter(at,"cornerRadius",0,(0,Co.getNumberOrArrayOfNumbersValidator)(4));rr.Factory.addGetterSetter(at,"image");rr.Factory.addComponentsGetterSetter(at,"crop",["x","y","width","height"]);rr.Factory.addGetterSetter(at,"cropX",0,(0,Co.getNumberValidator)());rr.Factory.addGetterSetter(at,"cropY",0,(0,Co.getNumberValidator)());rr.Factory.addGetterSetter(at,"cropWidth",0,(0,Co.getNumberValidator)());rr.Factory.addGetterSetter(at,"cropHeight",0,(0,Co.getNumberValidator)())});var ov=x(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.Tag=ai.Label=void 0;var Ra=$(),aI=Ie(),lI=va(),th=q(),rv=G(),iv=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],cI="Change.konva",uI="none",Zd="up",Qd="right",Jd="down",eh="left",dI=iv.length,wo=class extends lI.Group{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,i=function(){n._sync()};for(r=0;r<dI;r++)e.on(iv[r]+cI,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,i,o,s,a,l,c;if(e&&n){switch(r=e.width(),i=e.height(),o=n.pointerDirection(),s=n.pointerWidth(),c=n.pointerHeight(),a=0,l=0,o){case Zd:a=r/2,l=-1*c;break;case Qd:a=r+s,l=i/2;break;case Jd:a=r/2,l=i+c;break;case eh:a=-1*s,l=i/2;break}n.setAttrs({x:-1*a,y:-1*l,width:r,height:i}),e.setAttrs({x:-1*a,y:-1*l})}}};ai.Label=wo;wo.prototype.className="Label";(0,rv._registerNode)(wo);var sn=class extends aI.Shape{_sceneFunc(e){var n=this.width(),r=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),s=this.pointerHeight(),a=this.cornerRadius();let l=0,c=0,u=0,d=0;typeof a=="number"?l=c=u=d=Math.min(a,n/2,r/2):(l=Math.min(a[0]||0,n/2,r/2),c=Math.min(a[1]||0,n/2,r/2),d=Math.min(a[2]||0,n/2,r/2),u=Math.min(a[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),i===Zd&&(e.lineTo((n-o)/2,0),e.lineTo(n/2,-1*s),e.lineTo((n+o)/2,0)),e.lineTo(n-c,0),e.arc(n-c,c,c,Math.PI*3/2,0,!1),i===Qd&&(e.lineTo(n,(r-s)/2),e.lineTo(n+o,r/2),e.lineTo(n,(r+s)/2)),e.lineTo(n,r-d),e.arc(n-d,r-d,d,0,Math.PI/2,!1),i===Jd&&(e.lineTo((n+o)/2,r),e.lineTo(n/2,r+s),e.lineTo((n-o)/2,r)),e.lineTo(u,r),e.arc(u,r-u,u,Math.PI/2,Math.PI,!1),i===eh&&(e.lineTo(0,(r+s)/2),e.lineTo(-1*o,r/2),e.lineTo(0,(r-s)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),s=this.width(),a=this.height();return o===Zd?(n-=i,a+=i):o===Jd?a+=i:o===eh?(e-=r*1.5,s+=r):o===Qd&&(s+=r*1.5),{x:e,y:n,width:s,height:a}}};ai.Tag=sn;sn.prototype.className="Tag";(0,rv._registerNode)(sn);Ra.Factory.addGetterSetter(sn,"pointerDirection",uI);Ra.Factory.addGetterSetter(sn,"pointerWidth",0,(0,th.getNumberValidator)());Ra.Factory.addGetterSetter(sn,"pointerHeight",0,(0,th.getNumberValidator)());Ra.Factory.addGetterSetter(sn,"cornerRadius",0,(0,th.getNumberOrArrayOfNumbersValidator)(4))});var nh=x(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});Oa.Rect=void 0;var hI=$(),fI=Ie(),pI=G(),gI=ge(),mI=q(),li=class extends fI.Shape{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),n?gI.Util.drawRoundedRectPath(e,r,i,n):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}};Oa.Rect=li;li.prototype.className="Rect";(0,pI._registerNode)(li);hI.Factory.addGetterSetter(li,"cornerRadius",0,(0,mI.getNumberOrArrayOfNumbersValidator)(4))});var lv=x(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.RegularPolygon=void 0;var sv=$(),vI=Ie(),av=q(),yI=G(),an=class extends vI.Shape{_sceneFunc(e){let n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){let e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){let e=this._getPoints();var n=e[0].x,r=e[0].y,i=e[0].x,o=e[0].y;return e.forEach(s=>{n=Math.min(n,s.x),r=Math.max(r,s.x),i=Math.min(i,s.y),o=Math.max(o,s.y)}),{x:n,y:i,width:r-n,height:o-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Pa.RegularPolygon=an;an.prototype.className="RegularPolygon";an.prototype._centroid=!0;an.prototype._attrsAffectingSize=["radius"];(0,yI._registerNode)(an);sv.Factory.addGetterSetter(an,"radius",0,(0,av.getNumberValidator)());sv.Factory.addGetterSetter(an,"sides",0,(0,av.getNumberValidator)())});var hv=x(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.Ring=void 0;var uv=$(),DI=Ie(),dv=q(),_I=G(),cv=Math.PI*2,ln=class extends DI.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,cv,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),cv,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};Fa.Ring=ln;ln.prototype.className="Ring";ln.prototype._centroid=!0;ln.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,_I._registerNode)(ln);uv.Factory.addGetterSetter(ln,"innerRadius",0,(0,dv.getNumberValidator)());uv.Factory.addGetterSetter(ln,"outerRadius",0,(0,dv.getNumberValidator)())});var pv=x(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.Sprite=void 0;var ir=$(),CI=Ie(),wI=Da(),fv=q(),bI=G(),lt=class extends CI.Shape{constructor(e){super(e),this._updated=!0,this.anim=new wI.Animation(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,o=this.animations()[n],s=this.frameOffsets(),a=o[i+0],l=o[i+1],c=o[i+2],u=o[i+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,u),e.closePath(),e.fillStrokeShape(this)),d)if(s){var h=s[n],f=r*2;e.drawImage(d,a,l,c,u,h[f+0],h[f+1],c,u)}else e.drawImage(d,a,l,c,u,0,0,c,u)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,o=this.animations()[n],s=this.frameOffsets(),a=o[i+2],l=o[i+3];if(e.beginPath(),s){var c=s[n],u=r*2;e.rect(c[u+0],c[u+1],a,l)}else e.rect(0,0,a,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],o=i.length/4;e<o-1?this.frameIndex(e+1):this.frameIndex(0)}};ka.Sprite=lt;lt.prototype.className="Sprite";(0,bI._registerNode)(lt);ir.Factory.addGetterSetter(lt,"animation");ir.Factory.addGetterSetter(lt,"animations");ir.Factory.addGetterSetter(lt,"frameOffsets");ir.Factory.addGetterSetter(lt,"image");ir.Factory.addGetterSetter(lt,"frameIndex",0,(0,fv.getNumberValidator)());ir.Factory.addGetterSetter(lt,"frameRate",17,(0,fv.getNumberValidator)());ir.Factory.backCompat(lt,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})});var gv=x(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});La.Star=void 0;var rh=$(),EI=Ie(),ih=q(),SI=G(),Lt=class extends EI.Shape{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var o=1;o<i*2;o++){var s=o%2===0?r:n,a=s*Math.sin(o*Math.PI/i),l=-1*s*Math.cos(o*Math.PI/i);e.lineTo(a,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};La.Star=Lt;Lt.prototype.className="Star";Lt.prototype._centroid=!0;Lt.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,SI._registerNode)(Lt);rh.Factory.addGetterSetter(Lt,"numPoints",5,(0,ih.getNumberValidator)());rh.Factory.addGetterSetter(Lt,"innerRadius",0,(0,ih.getNumberValidator)());rh.Factory.addGetterSetter(Lt,"outerRadius",0,(0,ih.getNumberValidator)())});var ch=x(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.Text=ui.stringToArray=void 0;var lh=ge(),Ue=$(),II=Ie(),oh=G(),In=q(),MI=G();function _v(t){return[...t].reduce((e,n,r,i)=>(new RegExp("\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?(?:\\u200D\\p{Emoji_Presentation})+","u").test(n)?e.push(n):new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(i[r+1]||""))?e.push(n+i[r+1]):r>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?e[e.length-1]+=n:e.push(n),e),[])}ui.stringToArray=_v;var ci="auto",TI="center",Cv="inherit",bo="justify",xI="Change.konva",AI="2d",mv="-",wv="left",NI="text",RI="Text",OI="top",PI="bottom",vv="middle",bv="normal",FI="px ",ja=" ",kI="right",yv="rtl",LI="word",jI="char",Dv="none",sh="\u2026",Ev=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],VI=Ev.length;function UI(t){return t.split(",").map(e=>{e=e.trim();let n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var Va;function ah(){return Va||(Va=lh.Util.createCanvasElement().getContext(AI),Va)}function BI(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function HI(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function GI(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}var pe=class extends II.Shape{constructor(e){super(GI(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<VI;n++)this.on(Ev[n]+xI,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var i=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,a=this.verticalAlign(),l=this.direction(),c=0,u=this.align(),d=this.getWidth(),h=this.letterSpacing(),f=this.fill(),p=this.textDecoration(),g=p.indexOf("underline")!==-1,m=p.indexOf("line-through")!==-1,v;l=l===Cv?e.direction:l;var y=s/2,D=vv;if(oh.Konva._fixTextRendering){var _=this.measureSize("M");D="alphabetic",y=(_.fontBoundingBoxAscent-_.fontBoundingBoxDescent)/2+s/2}var b=0,C=0;for(l===yv&&e.setAttr("direction",l),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",D),e.setAttr("textAlign",wv),a===vv?c=(this.getHeight()-r*s-i*2)/2:a===PI&&(c=this.getHeight()-r*s-i*2),e.translate(i,c+i),v=0;v<r;v++){var b=0,C=0,A=n[v],I=A.text,R=A.width,N=A.lastInParagraph,T,le,ue;if(e.save(),u===kI?b+=d-R-i*2:u===TI&&(b+=(d-R-i*2)/2),g){e.save(),e.beginPath();let cn=oh.Konva._fixTextRendering?Math.round(o/4):Math.round(o/2),K=b,de=y+C+cn;e.moveTo(K,de),T=I.split(" ").length-1,le=T===0,ue=u===bo&&!N?d-i*2:R,e.lineTo(K+Math.round(ue),de),e.lineWidth=o/15;let ke=this._getLinearGradient();e.strokeStyle=ke||f,e.stroke(),e.restore()}if(m){e.save(),e.beginPath();let cn=oh.Konva._fixTextRendering?-Math.round(o/4):0;e.moveTo(b,y+C+cn),T=I.split(" ").length-1,le=T===0,ue=u===bo&&N&&!le?d-i*2:R,e.lineTo(b+Math.round(ue),y+C+cn),e.lineWidth=o/15;let K=this._getLinearGradient();e.strokeStyle=K||f,e.stroke(),e.restore()}if(l!==yv&&(h!==0||u===bo)){T=I.split(" ").length-1;for(var xe=_v(I),Fe=0;Fe<xe.length;Fe++){var oe=xe[Fe];oe===" "&&!N&&u===bo&&(b+=(d-i*2-R)/T),this._partialTextX=b,this._partialTextY=y+C,this._partialText=oe,e.fillStrokeShape(this),b+=this.measureSize(oe).width+h}}else h!==0&&e.setAttr("letterSpacing",`${h}px`),this._partialTextX=b,this._partialTextY=y+C,this._partialText=I,e.fillStrokeShape(this);e.restore(),r>1&&(y+=s)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=lh.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(NI,n),this}getWidth(){var e=this.attrs.width===ci||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===ci||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return lh.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,r,i,o,s,a,l,c,u,d,h,f=ah(),p=this.fontSize(),g;f.save(),f.font=this._getContextFont(),g=f.measureText(e),f.restore();let m=p/100;return{actualBoundingBoxAscent:(n=g.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*m,actualBoundingBoxDescent:(r=g.actualBoundingBoxDescent)!==null&&r!==void 0?r:0,actualBoundingBoxLeft:(i=g.actualBoundingBoxLeft)!==null&&i!==void 0?i:-7.421875*m,actualBoundingBoxRight:(o=g.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*m,alphabeticBaseline:(s=g.alphabeticBaseline)!==null&&s!==void 0?s:0,emHeightAscent:(a=g.emHeightAscent)!==null&&a!==void 0?a:100*m,emHeightDescent:(l=g.emHeightDescent)!==null&&l!==void 0?l:-20*m,fontBoundingBoxAscent:(c=g.fontBoundingBoxAscent)!==null&&c!==void 0?c:91*m,fontBoundingBoxDescent:(u=g.fontBoundingBoxDescent)!==null&&u!==void 0?u:21*m,hangingBaseline:(d=g.hangingBaseline)!==null&&d!==void 0?d:72.80000305175781*m,ideographicBaseline:(h=g.ideographicBaseline)!==null&&h!==void 0?h:-21*m,width:g.width,height:p}}_getContextFont(){return this.fontStyle()+ja+this.fontVariant()+ja+(this.fontSize()+FI)+UI(this.fontFamily())}_addTextLine(e){this.align()===bo&&(e=e.trim());var r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return ah().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,o=this.attrs.width,s=this.attrs.height,a=o!==ci&&o!==void 0,l=s!==ci&&s!==void 0,c=this.padding(),u=o-c*2,d=s-c*2,h=0,f=this.wrap(),p=f!==Dv,g=f!==jI&&p,m=this.ellipsis();this.textArr=[],ah().font=this._getContextFont();for(var v=m?this._getTextWidth(sh):0,y=0,D=e.length;y<D;++y){var _=e[y],b=this._getTextWidth(_);if(a&&b>u)for(;_.length>0;){for(var C=0,A=_.length,I="",R=0;C<A;){var N=C+A>>>1,T=_.slice(0,N+1),le=this._getTextWidth(T)+v;le<=u?(C=N+1,I=T,R=le):A=N}if(I){if(g){var ue,xe=_[I.length],Fe=xe===ja||xe===mv;Fe&&R<=u?ue=I.length:ue=Math.max(I.lastIndexOf(ja),I.lastIndexOf(mv))+1,ue>0&&(C=ue,I=I.slice(0,C),R=this._getTextWidth(I))}I=I.trimRight(),this._addTextLine(I),r=Math.max(r,R),h+=i;var oe=this._shouldHandleEllipsis(h);if(oe){this._tryToAddEllipsisToLastLine();break}if(_=_.slice(C),_=_.trimLeft(),_.length>0&&(b=this._getTextWidth(_),b<=u)){this._addTextLine(_),h+=i,r=Math.max(r,b);break}}else break}else this._addTextLine(_),h+=i,r=Math.max(r,b),this._shouldHandleEllipsis(h)&&y<D-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&h+i>d)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,o=i!==ci&&i!==void 0,s=this.padding(),a=i-s*2,l=this.wrap(),c=l!==Dv;return!c||o&&e+r>a}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==ci&&e!==void 0,r=this.padding(),i=e-r*2,o=this.ellipsis(),s=this.textArr[this.textArr.length-1];if(!(!s||!o)){if(n){var a=this._getTextWidth(s.text+sh)<i;a||(s.text=s.text.slice(0,s.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(s.text+sh)}}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};ui.Text=pe;pe.prototype._fillFunc=BI;pe.prototype._strokeFunc=HI;pe.prototype.className=RI;pe.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,MI._registerNode)(pe);Ue.Factory.overWriteSetter(pe,"width",(0,In.getNumberOrAutoValidator)());Ue.Factory.overWriteSetter(pe,"height",(0,In.getNumberOrAutoValidator)());Ue.Factory.addGetterSetter(pe,"direction",Cv);Ue.Factory.addGetterSetter(pe,"fontFamily","Arial");Ue.Factory.addGetterSetter(pe,"fontSize",12,(0,In.getNumberValidator)());Ue.Factory.addGetterSetter(pe,"fontStyle",bv);Ue.Factory.addGetterSetter(pe,"fontVariant",bv);Ue.Factory.addGetterSetter(pe,"padding",0,(0,In.getNumberValidator)());Ue.Factory.addGetterSetter(pe,"align",wv);Ue.Factory.addGetterSetter(pe,"verticalAlign",OI);Ue.Factory.addGetterSetter(pe,"lineHeight",1,(0,In.getNumberValidator)());Ue.Factory.addGetterSetter(pe,"wrap",LI);Ue.Factory.addGetterSetter(pe,"ellipsis",!1,(0,In.getBooleanValidator)());Ue.Factory.addGetterSetter(pe,"letterSpacing",0,(0,In.getNumberValidator)());Ue.Factory.addGetterSetter(pe,"text","",(0,In.getStringValidator)());Ue.Factory.addGetterSetter(pe,"textDecoration","")});var xv=x(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.TextPath=void 0;var uh=ge(),Dt=$(),$I=Ie(),Eo=Ia(),dh=ch(),Sv=q(),qI=G(),zI="",Iv="normal";function Mv(t){t.fillText(this.partialText,0,0)}function Tv(t){t.strokeText(this.partialText,0,0)}var _e=class extends $I.Shape{constructor(e){super(e),this.dummyCanvas=uh.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Eo.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;let n=this.pathLength;return e-1>n?null:Eo.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Eo.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),i=this.fontSize(),o=this.glyphInfo;n==="underline"&&e.beginPath();for(var s=0;s<o.length;s++){e.save();var a=o[s].p0;e.translate(a.x,a.y),e.rotate(o[s].rotation),this.partialText=o[s].text,e.fillStrokeShape(this),n==="underline"&&(s===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<n.length;i++){var o=n[i].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return uh.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return dh.Text.prototype.setText.call(this,e)}_getContextFont(){return dh.Text.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let{width:e,height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;let r=this.letterSpacing(),i=this.align(),o=this.kerningFunc(),s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0),a=0;i==="center"&&(a=Math.max(0,this.pathLength/2-s/2)),i==="right"&&(a=Math.max(0,this.pathLength-s));let l=(0,dh.stringToArray)(this.text()),c=a;for(var u=0;u<l.length;u++){let d=this._getPointAtLength(c);if(!d)return;let h=this._getTextSize(l[u]).width+r;if(l[u]===" "&&i==="justify"){let y=this.text().split(" ").length-1;h+=(this.pathLength-s)/y}let f=this._getPointAtLength(c+h);if(!f)return;let p=Eo.Path.getLineLength(d.x,d.y,f.x,f.y),g=0;if(o)try{g=o(l[u-1],l[u])*this.fontSize()}catch{g=0}d.x+=g,f.x+=g,this.textWidth+=g;let m=Eo.Path.getPointOnLine(g+p/2,d.x,d.y,f.x,f.y),v=Math.atan2(f.y-d.y,f.x-d.x);this.glyphInfo.push({transposeX:m.x,transposeY:m.y,text:l[u],rotation:v,p0:d,p1:f}),c+=h}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(u){e.push(u.p0.x),e.push(u.p0.y),e.push(u.p1.x),e.push(u.p1.y)});for(var n=e[0]||0,r=e[0]||0,i=e[1]||0,o=e[1]||0,s,a,l=0;l<e.length/2;l++)s=e[l*2],a=e[l*2+1],n=Math.min(n,s),r=Math.max(r,s),i=Math.min(i,a),o=Math.max(o,a);var c=this.fontSize();return{x:n-c/2,y:i-c/2,width:r-n+c,height:o-i+c}}destroy(){return uh.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};Ua.TextPath=_e;_e.prototype._fillFunc=Mv;_e.prototype._strokeFunc=Tv;_e.prototype._fillFuncHit=Mv;_e.prototype._strokeFuncHit=Tv;_e.prototype.className="TextPath";_e.prototype._attrsAffectingSize=["text","fontSize","data"];(0,qI._registerNode)(_e);Dt.Factory.addGetterSetter(_e,"data");Dt.Factory.addGetterSetter(_e,"fontFamily","Arial");Dt.Factory.addGetterSetter(_e,"fontSize",12,(0,Sv.getNumberValidator)());Dt.Factory.addGetterSetter(_e,"fontStyle",Iv);Dt.Factory.addGetterSetter(_e,"align","left");Dt.Factory.addGetterSetter(_e,"letterSpacing",0,(0,Sv.getNumberValidator)());Dt.Factory.addGetterSetter(_e,"textBaseline","middle");Dt.Factory.addGetterSetter(_e,"fontVariant",Iv);Dt.Factory.addGetterSetter(_e,"text",zI);Dt.Factory.addGetterSetter(_e,"textDecoration",null);Dt.Factory.addGetterSetter(_e,"kerningFunc",null)});var kv=x(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Transformer=void 0;var ie=ge(),te=$(),Av=ve(),WI=Ie(),YI=nh(),Nv=va(),_t=G(),Mn=q(),KI=G(),Pv="tr-konva",XI=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${Pv}`).join(" "),Rv="nodesRect",ZI=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],QI={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},JI="ontouchstart"in _t.Konva._global;function e3(t,e,n){if(t==="rotater")return n;e+=ie.Util.degToRad(QI[t]||0);var r=(ie.Util.radToDeg(e)%360+360)%360;return ie.Util._inRange(r,315+22.5,360)||ie.Util._inRange(r,0,22.5)?"ns-resize":ie.Util._inRange(r,45-22.5,45+22.5)?"nesw-resize":ie.Util._inRange(r,90-22.5,90+22.5)?"ew-resize":ie.Util._inRange(r,135-22.5,135+22.5)?"nwse-resize":ie.Util._inRange(r,180-22.5,180+22.5)?"ns-resize":ie.Util._inRange(r,225-22.5,225+22.5)?"nesw-resize":ie.Util._inRange(r,270-22.5,270+22.5)?"ew-resize":ie.Util._inRange(r,315-22.5,315+22.5)?"nwse-resize":(ie.Util.error("Transformer has unknown angle for cursor detection: "+r),"pointer")}var Ba=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Ov=1e8;function t3(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function Fv(t,e,n){let r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return he(S({},t),{rotation:t.rotation+e,x:r,y:i})}function n3(t,e){let n=t3(t);return Fv(t,e,n)}function r3(t,e,n){let r=e;for(let i=0;i<t.length;i++){let o=_t.Konva.getAngle(t[i]),s=Math.abs(o-e)%(Math.PI*2);Math.min(s,Math.PI*2-s)<n&&(r=o)}return r}var hh=0,z=class extends Nv.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(XI,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return ie.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Pv+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();let n=e.filter(i=>i.isAncestorOf(this)?(ie.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{let o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},s=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(s,o),i.on(ZI.map(a=>a+`.${this._getEventNamespace()}`).join(" "),o),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(i)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;let i=e.getAbsolutePosition(),o=i.x-n.x,s=i.y-n.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;let l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+o,y:l.y+s}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Rv),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Rv,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=e.getAbsoluteScale(r),s=e.getAbsolutePosition(r),a=i.x*o.x-e.offsetX()*o.x,l=i.y*o.y-e.offsetY()*o.y;let c=(_t.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),u={x:s.x+a*Math.cos(c)+l*Math.sin(-c),y:s.y+l*Math.cos(c)+a*Math.sin(c),width:i.width*o.x,height:i.height*o.y,rotation:c};return Fv(u,-_t.Konva.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-Ov,y:-Ov,width:0,height:0,rotation:0};let n=[];this.nodes().map(c=>{let u=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var d=[{x:u.x,y:u.y},{x:u.x+u.width,y:u.y},{x:u.x+u.width,y:u.y+u.height},{x:u.x,y:u.y+u.height}],h=c.getAbsoluteTransform();d.forEach(function(f){var p=h.point(f);n.push(p)})});let r=new ie.Transform;r.rotate(-_t.Konva.getAngle(this.rotation()));var i=1/0,o=1/0,s=-1/0,a=-1/0;n.forEach(function(c){var u=r.point(c);i===void 0&&(i=s=u.x,o=a=u.y),i=Math.min(i,u.x),o=Math.min(o,u.y),s=Math.max(s,u.x),a=Math.max(a,u.y)}),r.invert();let l=r.point({x:i,y:o});return{x:l.x,y:l.y,width:s-i,height:a-o,rotation:_t.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Ba.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){var n=new YI.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:JI?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{var i=_t.Konva.getAngle(this.rotation()),o=this.rotateAnchorCursor(),s=e3(e,i,o);n.getStage().content&&(n.getStage().content.style.cursor=s),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new WI.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(n,r){var i=r.getParent(),o=i.padding();n.beginPath(),n.rect(-o,-o,r.width()+o*2,r.height()+o*2),n.moveTo(r.width()/2,-o),i.rotateEnabled()&&i.rotateLineVisible()&&n.lineTo(r.width()/2,-i.rotateAnchorOffset()*ie.Util._sign(r.height())-o),n.fillStrokeShape(r)},hitFunc:(n,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(!this._transforming){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),r=n.width,i=n.height,o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(r/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var s=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-s.x,y:a.y-s.y},hh++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}}_handleMouseMove(e){var n,r,i,o=this.findOne("."+this._movingAnchorName),s=o.getStage();s.setPointersPositions(e);let a=s.getPointerPosition(),l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y},c=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,e)),o.setAbsolutePosition(l);let u=o.getAbsolutePosition();if(!(c.x===u.x&&c.y===u.y)){if(this._movingAnchorName==="rotater"){var d=this._getNodeRect();n=o.x()-d.width/2,r=-o.y()+d.height/2;let ue=Math.atan2(-r,n)+Math.PI/2;d.height<0&&(ue-=Math.PI);var h=_t.Konva.getAngle(this.rotation());let xe=h+ue,Fe=_t.Konva.getAngle(this.rotationSnapTolerance()),qe=r3(this.rotationSnaps(),xe,Fe)-d.rotation,Ge=n3(d,qe);this._fitNodesInto(Ge,e);return}var f=this.shiftBehavior(),p;f==="inverted"?p=this.keepRatio()&&!e.shiftKey:f==="none"?p=this.keepRatio():p=this.keepRatio()||e.shiftKey;var D=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(p){var g=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(g.x-o.x(),2)+Math.pow(g.y-o.y(),2));var m=this.findOne(".top-left").x()>g.x?-1:1,v=this.findOne(".top-left").y()>g.y?-1:1;n=i*this.cos*m,r=i*this.sin*v,this.findOne(".top-left").x(g.x-n),this.findOne(".top-left").y(g.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(p){var g=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(o.x()-g.x,2)+Math.pow(g.y-o.y(),2));var m=this.findOne(".top-right").x()<g.x?-1:1,v=this.findOne(".top-right").y()>g.y?-1:1;n=i*this.cos*m,r=i*this.sin*v,this.findOne(".top-right").x(g.x+n),this.findOne(".top-right").y(g.y-r)}var y=o.position();this.findOne(".top-left").y(y.y),this.findOne(".bottom-right").x(y.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(p){var g=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(g.x-o.x(),2)+Math.pow(o.y()-g.y,2));var m=g.x<o.x()?-1:1,v=o.y()<g.y?-1:1;n=i*this.cos*m,r=i*this.sin*v,o.x(g.x-n),o.y(g.y+r)}y=o.position(),this.findOne(".top-left").x(y.x),this.findOne(".bottom-right").y(y.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(p){var g=D?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(o.x()-g.x,2)+Math.pow(o.y()-g.y,2));var m=this.findOne(".bottom-right").x()<g.x?-1:1,v=this.findOne(".bottom-right").y()<g.y?-1:1;n=i*this.cos*m,r=i*this.sin*v,this.findOne(".bottom-right").x(g.x+n),this.findOne(".bottom-right").y(g.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var D=this.centeredScaling()||e.altKey;if(D){var _=this.findOne(".top-left"),b=this.findOne(".bottom-right"),C=_.x(),A=_.y(),I=this.getWidth()-b.x(),R=this.getHeight()-b.y();b.move({x:-C,y:-A}),_.move({x:I,y:R})}var N=this.findOne(".top-left").getAbsolutePosition();n=N.x,r=N.y;var T=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),le=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:T,height:le,rotation:_t.Konva.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var r=this.getNode();hh--,this._fire("transformend",{evt:e,target:r}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),r&&this._nodes.forEach(i=>{var o;i._fire("transformend",{evt:e,target:i}),(o=i.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){var r=this._getNodeRect();let i=1;if(ie.Util._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(ie.Util._inRange(e.height,-this.padding()*2-i,i)){this.update();return}var o=new ie.Transform;if(o.rotate(_t.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){let h=o.point({x:-this.padding()*2,y:0});e.x+=h.x,e.y+=h.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){let h=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){let h=o.point({x:0,y:-this.padding()*2});e.x+=h.x,e.y+=h.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let h=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=h.x,this._anchorDragOffset.y-=h.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){let h=this.boundBoxFunc()(r,e);h?e=h:ie.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let s=1e7,a=new ie.Transform;a.translate(r.x,r.y),a.rotate(r.rotation),a.scale(r.width/s,r.height/s);let l=new ie.Transform,c=e.width/s,u=e.height/s;this.flipEnabled()===!1?(l.translate(e.x,e.y),l.rotate(e.rotation),l.translate(e.width<0?e.width:0,e.height<0?e.height:0),l.scale(Math.abs(c),Math.abs(u))):(l.translate(e.x,e.y),l.rotate(e.rotation),l.scale(c,u));let d=l.multiply(a.invert());this._nodes.forEach(h=>{var f;let p=h.getParent().getAbsoluteTransform(),g=h.getTransform().copy();g.translate(h.offsetX(),h.offsetY());let m=new ie.Transform;m.multiply(p.copy().invert()).multiply(d).multiply(p).multiply(g);let v=m.decompose();h.setAttrs(v),(f=h.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(ie.Util._getRotation(e.rotation)),this._nodes.forEach(h=>{this._fire("transform",{evt:n,target:h}),h._fire("transform",{evt:n,target:h})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(ie.Util._getRotation(n.rotation));var r=n.width,i=n.height,o=this.enabledAnchors(),s=this.resizeEnabled(),a=this.padding(),l=this.anchorSize();let c=this.find("._anchor");c.forEach(d=>{d.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:s&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+a,visible:s&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:s&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+a,visible:s&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-a,visible:s&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+a,offsetY:l/2-a,visible:s&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-a,visible:s&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-a,offsetY:l/2-a,visible:s&&o.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*ie.Util._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});let u=this.anchorStyleFunc();u&&c.forEach(d=>{u(d)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Nv.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Av.Node.prototype.toObject.call(this)}clone(e){var n=Av.Node.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ha.Transformer=z;z.isTransforming=()=>hh>0;function i3(t){return t instanceof Array||ie.Util.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Ba.indexOf(e)===-1&&ie.Util.warn("Unknown anchor name: "+e+". Available names are: "+Ba.join(", "))}),t||[]}z.prototype.className="Transformer";(0,KI._registerNode)(z);te.Factory.addGetterSetter(z,"enabledAnchors",Ba,i3);te.Factory.addGetterSetter(z,"flipEnabled",!0,(0,Mn.getBooleanValidator)());te.Factory.addGetterSetter(z,"resizeEnabled",!0);te.Factory.addGetterSetter(z,"anchorSize",10,(0,Mn.getNumberValidator)());te.Factory.addGetterSetter(z,"rotateEnabled",!0);te.Factory.addGetterSetter(z,"rotateLineVisible",!0);te.Factory.addGetterSetter(z,"rotationSnaps",[]);te.Factory.addGetterSetter(z,"rotateAnchorOffset",50,(0,Mn.getNumberValidator)());te.Factory.addGetterSetter(z,"rotateAnchorCursor","crosshair");te.Factory.addGetterSetter(z,"rotationSnapTolerance",5,(0,Mn.getNumberValidator)());te.Factory.addGetterSetter(z,"borderEnabled",!0);te.Factory.addGetterSetter(z,"anchorStroke","rgb(0, 161, 255)");te.Factory.addGetterSetter(z,"anchorStrokeWidth",1,(0,Mn.getNumberValidator)());te.Factory.addGetterSetter(z,"anchorFill","white");te.Factory.addGetterSetter(z,"anchorCornerRadius",0,(0,Mn.getNumberValidator)());te.Factory.addGetterSetter(z,"borderStroke","rgb(0, 161, 255)");te.Factory.addGetterSetter(z,"borderStrokeWidth",1,(0,Mn.getNumberValidator)());te.Factory.addGetterSetter(z,"borderDash");te.Factory.addGetterSetter(z,"keepRatio",!0);te.Factory.addGetterSetter(z,"shiftBehavior","default");te.Factory.addGetterSetter(z,"centeredScaling",!1);te.Factory.addGetterSetter(z,"ignoreStroke",!1);te.Factory.addGetterSetter(z,"padding",0,(0,Mn.getNumberValidator)());te.Factory.addGetterSetter(z,"node");te.Factory.addGetterSetter(z,"nodes");te.Factory.addGetterSetter(z,"boundBoxFunc");te.Factory.addGetterSetter(z,"anchorDragBoundFunc");te.Factory.addGetterSetter(z,"anchorStyleFunc");te.Factory.addGetterSetter(z,"shouldOverdrawWholeArea",!1);te.Factory.addGetterSetter(z,"useSingleNodeRotation",!0);te.Factory.backCompat(z,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})});var jv=x($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});$a.Wedge=void 0;var Ga=$(),o3=Ie(),s3=G(),Lv=q(),a3=G(),Ct=class extends o3.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,s3.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};$a.Wedge=Ct;Ct.prototype.className="Wedge";Ct.prototype._centroid=!0;Ct.prototype._attrsAffectingSize=["radius"];(0,a3._registerNode)(Ct);Ga.Factory.addGetterSetter(Ct,"radius",0,(0,Lv.getNumberValidator)());Ga.Factory.addGetterSetter(Ct,"angle",0,(0,Lv.getNumberValidator)());Ga.Factory.addGetterSetter(Ct,"clockwise",!1);Ga.Factory.backCompat(Ct,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})});var Bv=x(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.Blur=void 0;var Vv=$(),l3=ve(),c3=q();function Uv(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var u3=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],d3=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function h3(t,e){var n=t.data,r=t.width,i=t.height,o,s,a,l,c,u,d,h,f,p,g,m,v,y,D,_,b,C,A,I,R,N,T,le,ue=e+e+1,xe=r-1,Fe=i-1,oe=e+1,qe=oe*(oe+1)/2,Ge=new Uv,cn=null,K=Ge,de=null,ke=null,un=u3[e],dn=d3[e];for(a=1;a<ue;a++)K=K.next=new Uv,a===oe&&(cn=K);for(K.next=Ge,d=u=0,s=0;s<i;s++){for(_=b=C=A=h=f=p=g=0,m=oe*(I=n[u]),v=oe*(R=n[u+1]),y=oe*(N=n[u+2]),D=oe*(T=n[u+3]),h+=qe*I,f+=qe*R,p+=qe*N,g+=qe*T,K=Ge,a=0;a<oe;a++)K.r=I,K.g=R,K.b=N,K.a=T,K=K.next;for(a=1;a<oe;a++)l=u+((xe<a?xe:a)<<2),h+=(K.r=I=n[l])*(le=oe-a),f+=(K.g=R=n[l+1])*le,p+=(K.b=N=n[l+2])*le,g+=(K.a=T=n[l+3])*le,_+=I,b+=R,C+=N,A+=T,K=K.next;for(de=Ge,ke=cn,o=0;o<r;o++)n[u+3]=T=g*un>>dn,T!==0?(T=255/T,n[u]=(h*un>>dn)*T,n[u+1]=(f*un>>dn)*T,n[u+2]=(p*un>>dn)*T):n[u]=n[u+1]=n[u+2]=0,h-=m,f-=v,p-=y,g-=D,m-=de.r,v-=de.g,y-=de.b,D-=de.a,l=d+((l=o+e+1)<xe?l:xe)<<2,_+=de.r=n[l],b+=de.g=n[l+1],C+=de.b=n[l+2],A+=de.a=n[l+3],h+=_,f+=b,p+=C,g+=A,de=de.next,m+=I=ke.r,v+=R=ke.g,y+=N=ke.b,D+=T=ke.a,_-=I,b-=R,C-=N,A-=T,ke=ke.next,u+=4;d+=r}for(o=0;o<r;o++){for(b=C=A=_=f=p=g=h=0,u=o<<2,m=oe*(I=n[u]),v=oe*(R=n[u+1]),y=oe*(N=n[u+2]),D=oe*(T=n[u+3]),h+=qe*I,f+=qe*R,p+=qe*N,g+=qe*T,K=Ge,a=0;a<oe;a++)K.r=I,K.g=R,K.b=N,K.a=T,K=K.next;for(c=r,a=1;a<=e;a++)u=c+o<<2,h+=(K.r=I=n[u])*(le=oe-a),f+=(K.g=R=n[u+1])*le,p+=(K.b=N=n[u+2])*le,g+=(K.a=T=n[u+3])*le,_+=I,b+=R,C+=N,A+=T,K=K.next,a<Fe&&(c+=r);for(u=o,de=Ge,ke=cn,s=0;s<i;s++)l=u<<2,n[l+3]=T=g*un>>dn,T>0?(T=255/T,n[l]=(h*un>>dn)*T,n[l+1]=(f*un>>dn)*T,n[l+2]=(p*un>>dn)*T):n[l]=n[l+1]=n[l+2]=0,h-=m,f-=v,p-=y,g-=D,m-=de.r,v-=de.g,y-=de.b,D-=de.a,l=o+((l=s+oe)<Fe?l:Fe)*r<<2,h+=_+=de.r=n[l],f+=b+=de.g=n[l+1],p+=C+=de.b=n[l+2],g+=A+=de.a=n[l+3],de=de.next,m+=I=ke.r,v+=R=ke.g,y+=N=ke.b,D+=T=ke.a,_-=I,b-=R,C-=N,A-=T,ke=ke.next,u+=r}}var f3=function(e){var n=Math.round(this.blurRadius());n>0&&h3(e,n)};qa.Blur=f3;Vv.Factory.addGetterSetter(l3.Node,"blurRadius",0,(0,c3.getNumberValidator)(),Vv.Factory.afterSetFilter)});var Gv=x(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});za.Brighten=void 0;var Hv=$(),p3=ve(),g3=q(),m3=function(t){var e=this.brightness()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};za.Brighten=m3;Hv.Factory.addGetterSetter(p3.Node,"brightness",0,(0,g3.getNumberValidator)(),Hv.Factory.afterSetFilter)});var qv=x(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.Contrast=void 0;var $v=$(),v3=ve(),y3=q(),D3=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,i=150,o=150,s=150,a;for(a=0;a<r;a+=4)i=n[a],o=n[a+1],s=n[a+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,s=s<0?0:s>255?255:s,n[a]=i,n[a+1]=o,n[a+2]=s};Wa.Contrast=D3;$v.Factory.addGetterSetter(v3.Node,"contrast",0,(0,y3.getNumberValidator)(),$v.Factory.afterSetFilter)});var Wv=x(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.Emboss=void 0;var Tn=$(),Ya=ve(),_3=ge(),zv=q(),C3=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),o=0,s=0,a=t.data,l=t.width,c=t.height,u=l*4,d=c;switch(r){case"top-left":o=-1,s=-1;break;case"top":o=-1,s=0;break;case"top-right":o=-1,s=1;break;case"right":o=0,s=1;break;case"bottom-right":o=1,s=1;break;case"bottom":o=1,s=0;break;case"bottom-left":o=1,s=-1;break;case"left":o=0,s=-1;break;default:_3.Util.error("Unknown emboss direction: "+r)}do{var h=(d-1)*u,f=o;d+f<1&&(f=0),d+f>c&&(f=0);var p=(d-1+f)*l*4,g=l;do{var m=h+(g-1)*4,v=s;g+v<1&&(v=0),g+v>l&&(v=0);var y=p+(g-1+v)*4,D=a[m]-a[y],_=a[m+1]-a[y+1],b=a[m+2]-a[y+2],C=D,A=C>0?C:-C,I=_>0?_:-_,R=b>0?b:-b;if(I>A&&(C=_),R>A&&(C=b),C*=e,i){var N=a[m]+C,T=a[m+1]+C,le=a[m+2]+C;a[m]=N>255?255:N<0?0:N,a[m+1]=T>255?255:T<0?0:T,a[m+2]=le>255?255:le<0?0:le}else{var ue=n-C;ue<0?ue=0:ue>255&&(ue=255),a[m]=a[m+1]=a[m+2]=ue}}while(--g)}while(--d)};Ka.Emboss=C3;Tn.Factory.addGetterSetter(Ya.Node,"embossStrength",.5,(0,zv.getNumberValidator)(),Tn.Factory.afterSetFilter);Tn.Factory.addGetterSetter(Ya.Node,"embossWhiteLevel",.5,(0,zv.getNumberValidator)(),Tn.Factory.afterSetFilter);Tn.Factory.addGetterSetter(Ya.Node,"embossDirection","top-left",null,Tn.Factory.afterSetFilter);Tn.Factory.addGetterSetter(Ya.Node,"embossBlend",!1,null,Tn.Factory.afterSetFilter)});var Kv=x(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.Enhance=void 0;var Yv=$(),w3=ve(),b3=q();function fh(t,e,n,r,i){var o=n-e,s=i-r,a;return o===0?r+s/2:s===0?r:(a=(t-e)/o,a=s*a+r,a)}var E3=function(t){var e=t.data,n=e.length,r=e[0],i=r,o,s=e[1],a=s,l,c=e[2],u=c,d,h,f=this.enhance();if(f!==0){for(h=0;h<n;h+=4)o=e[h+0],o<r?r=o:o>i&&(i=o),l=e[h+1],l<s?s=l:l>a&&(a=l),d=e[h+2],d<c?c=d:d>u&&(u=d);i===r&&(i=255,r=0),a===s&&(a=255,s=0),u===c&&(u=255,c=0);var p,g,m,v,y,D,_,b,C;for(f>0?(g=i+f*(255-i),m=r-f*(r-0),y=a+f*(255-a),D=s-f*(s-0),b=u+f*(255-u),C=c-f*(c-0)):(p=(i+r)*.5,g=i+f*(i-p),m=r+f*(r-p),v=(a+s)*.5,y=a+f*(a-v),D=s+f*(s-v),_=(u+c)*.5,b=u+f*(u-_),C=c+f*(c-_)),h=0;h<n;h+=4)e[h+0]=fh(e[h+0],r,i,m,g),e[h+1]=fh(e[h+1],s,a,D,y),e[h+2]=fh(e[h+2],c,u,C,b)}};Xa.Enhance=E3;Yv.Factory.addGetterSetter(w3.Node,"enhance",0,(0,b3.getNumberValidator)(),Yv.Factory.afterSetFilter)});var Xv=x(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.Grayscale=void 0;var S3=function(t){var e=t.data,n=e.length,r,i;for(r=0;r<n;r+=4)i=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=i,e[r+1]=i,e[r+2]=i};Za.Grayscale=S3});var Zv=x(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.HSL=void 0;var di=$(),ph=ve(),gh=q();di.Factory.addGetterSetter(ph.Node,"hue",0,(0,gh.getNumberValidator)(),di.Factory.afterSetFilter);di.Factory.addGetterSetter(ph.Node,"saturation",0,(0,gh.getNumberValidator)(),di.Factory.afterSetFilter);di.Factory.addGetterSetter(ph.Node,"luminance",0,(0,gh.getNumberValidator)(),di.Factory.afterSetFilter);var I3=function(t){var e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,s=this.luminance()*127,a,l=r*i*Math.cos(o*Math.PI/180),c=r*i*Math.sin(o*Math.PI/180),u=.299*r+.701*l+.167*c,d=.587*r-.587*l+.33*c,h=.114*r-.114*l-.497*c,f=.299*r-.299*l-.328*c,p=.587*r+.413*l+.035*c,g=.114*r-.114*l+.293*c,m=.299*r-.3*l+1.25*c,v=.587*r-.586*l-1.05*c,y=.114*r+.886*l-.2*c,D,_,b,C;for(a=0;a<n;a+=4)D=e[a+0],_=e[a+1],b=e[a+2],C=e[a+3],e[a+0]=u*D+d*_+h*b+s,e[a+1]=f*D+p*_+g*b+s,e[a+2]=m*D+v*_+y*b+s,e[a+3]=C};Qa.HSL=I3});var Qv=x(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.HSV=void 0;var hi=$(),mh=ve(),vh=q(),M3=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,s,a=r*i*Math.cos(o*Math.PI/180),l=r*i*Math.sin(o*Math.PI/180),c=.299*r+.701*a+.167*l,u=.587*r-.587*a+.33*l,d=.114*r-.114*a-.497*l,h=.299*r-.299*a-.328*l,f=.587*r+.413*a+.035*l,p=.114*r-.114*a+.293*l,g=.299*r-.3*a+1.25*l,m=.587*r-.586*a-1.05*l,v=.114*r+.886*a-.2*l,y,D,_,b;for(s=0;s<n;s+=4)y=e[s+0],D=e[s+1],_=e[s+2],b=e[s+3],e[s+0]=c*y+u*D+d*_,e[s+1]=h*y+f*D+p*_,e[s+2]=g*y+m*D+v*_,e[s+3]=b};Ja.HSV=M3;hi.Factory.addGetterSetter(mh.Node,"hue",0,(0,vh.getNumberValidator)(),hi.Factory.afterSetFilter);hi.Factory.addGetterSetter(mh.Node,"saturation",0,(0,vh.getNumberValidator)(),hi.Factory.afterSetFilter);hi.Factory.addGetterSetter(mh.Node,"value",0,(0,vh.getNumberValidator)(),hi.Factory.afterSetFilter)});var Jv=x(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.Invert=void 0;var T3=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};el.Invert=T3});var ry=x(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.Kaleidoscope=void 0;var tl=$(),ty=ve(),ey=ge(),ny=q(),x3=function(t,e,n){var r=t.data,i=e.data,o=t.width,s=t.height,a=n.polarCenterX||o/2,l=n.polarCenterY||s/2,c,u,d,h=0,f=0,p=0,g=0,m,v=Math.sqrt(a*a+l*l);u=o-a,d=s-l,m=Math.sqrt(u*u+d*d),v=m>v?m:v;var y=s,D=o,_,b,C=360/D*Math.PI/180,A,I;for(b=0;b<D;b+=1)for(A=Math.sin(b*C),I=Math.cos(b*C),_=0;_<y;_+=1)u=Math.floor(a+v*_/y*I),d=Math.floor(l+v*_/y*A),c=(d*o+u)*4,h=r[c+0],f=r[c+1],p=r[c+2],g=r[c+3],c=(b+_*o)*4,i[c+0]=h,i[c+1]=f,i[c+2]=p,i[c+3]=g},A3=function(t,e,n){var r=t.data,i=e.data,o=t.width,s=t.height,a=n.polarCenterX||o/2,l=n.polarCenterY||s/2,c,u,d,h,f,p=0,g=0,m=0,v=0,y,D=Math.sqrt(a*a+l*l);u=o-a,d=s-l,y=Math.sqrt(u*u+d*d),D=y>D?y:D;var _=s,b=o,C,A,I=n.polarRotation||0,R,N;for(u=0;u<o;u+=1)for(d=0;d<s;d+=1)h=u-a,f=d-l,C=Math.sqrt(h*h+f*f)*_/D,A=(Math.atan2(f,h)*180/Math.PI+360+I)%360,A=A*b/360,R=Math.floor(A),N=Math.floor(C),c=(N*o+R)*4,p=r[c+0],g=r[c+1],m=r[c+2],v=r[c+3],c=(d*o+u)*4,i[c+0]=p,i[c+1]=g,i[c+2]=m,i[c+3]=v},N3=function(t){var e=t.width,n=t.height,r,i,o,s,a,l,c,u,d,h,f=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),g=Math.floor(e*(p%360)/360);if(!(f<1)){var m=ey.Util.createCanvasElement();m.width=e,m.height=n;var v=m.getContext("2d").getImageData(0,0,e,n);ey.Util.releaseCanvas(m),x3(t,v,{polarCenterX:e/2,polarCenterY:n/2});for(var y=e/Math.pow(2,f);y<=8;)y=y*2,f-=1;y=Math.ceil(y);var D=y,_=0,b=D,C=1;for(g+y>e&&(_=D,b=0,C=-1),i=0;i<n;i+=1)for(r=_;r!==b;r+=C)o=Math.round(r+g)%e,d=(e*i+o)*4,a=v.data[d+0],l=v.data[d+1],c=v.data[d+2],u=v.data[d+3],h=(e*i+r)*4,v.data[h+0]=a,v.data[h+1]=l,v.data[h+2]=c,v.data[h+3]=u;for(i=0;i<n;i+=1)for(D=Math.floor(y),s=0;s<f;s+=1){for(r=0;r<D+1;r+=1)d=(e*i+r)*4,a=v.data[d+0],l=v.data[d+1],c=v.data[d+2],u=v.data[d+3],h=(e*i+D*2-r-1)*4,v.data[h+0]=a,v.data[h+1]=l,v.data[h+2]=c,v.data[h+3]=u;D*=2}A3(v,t,{polarRotation:0})}};nl.Kaleidoscope=N3;tl.Factory.addGetterSetter(ty.Node,"kaleidoscopePower",2,(0,ny.getNumberValidator)(),tl.Factory.afterSetFilter);tl.Factory.addGetterSetter(ty.Node,"kaleidoscopeAngle",0,(0,ny.getNumberValidator)(),tl.Factory.afterSetFilter)});var oy=x(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.Mask=void 0;var iy=$(),R3=ve(),O3=q();function rl(t,e,n){var r=(n*t.width+e)*4,i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function So(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function P3(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function F3(t,e){var n=rl(t,0,0),r=rl(t,t.width-1,0),i=rl(t,0,t.height-1),o=rl(t,t.width-1,t.height-1),s=e||10;if(So(n,r)<s&&So(r,o)<s&&So(o,i)<s&&So(i,n)<s){for(var a=P3([r,n,o,i]),l=[],c=0;c<t.width*t.height;c++){var u=So(a,[t.data[c*4],t.data[c*4+1],t.data[c*4+2]]);l[c]=u<s?0:255}return l}}function k3(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function L3(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,u=0,d=0;d<i;d++)for(var h=0;h<i;h++){var f=a+d-o,p=l+h-o;if(f>=0&&f<n&&p>=0&&p<e){var g=f*e+p,m=r[d*i+h];u+=t[g]*m}}s[c]=u===255*8?255:0}return s}function j3(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,u=0,d=0;d<i;d++)for(var h=0;h<i;h++){var f=a+d-o,p=l+h-o;if(f>=0&&f<n&&p>=0&&p<e){var g=f*e+p,m=r[d*i+h];u+=t[g]*m}}s[c]=u>=255*4?255:0}return s}function V3(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),o=Math.floor(i/2),s=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,u=0,d=0;d<i;d++)for(var h=0;h<i;h++){var f=a+d-o,p=l+h-o;if(f>=0&&f<n&&p>=0&&p<e){var g=f*e+p,m=r[d*i+h];u+=t[g]*m}}s[c]=u}return s}var U3=function(t){var e=this.threshold(),n=F3(t,e);return n&&(n=L3(n,t.width,t.height),n=j3(n,t.width,t.height),n=V3(n,t.width,t.height),k3(t,n)),t};il.Mask=U3;iy.Factory.addGetterSetter(R3.Node,"threshold",0,(0,O3.getNumberValidator)(),iy.Factory.afterSetFilter)});var ay=x(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.Noise=void 0;var sy=$(),B3=ve(),H3=q(),G3=function(t){var e=this.noise()*255,n=t.data,r=n.length,i=e/2,o;for(o=0;o<r;o+=4)n[o+0]+=i-2*i*Math.random(),n[o+1]+=i-2*i*Math.random(),n[o+2]+=i-2*i*Math.random()};ol.Noise=G3;sy.Factory.addGetterSetter(B3.Node,"noise",.2,(0,H3.getNumberValidator)(),sy.Factory.afterSetFilter)});var cy=x(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.Pixelate=void 0;var ly=$(),$3=ge(),q3=ve(),z3=q(),W3=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i,o,s,a,l,c,u,d=Math.ceil(n/e),h=Math.ceil(r/e),f,p,g,m,v,y,D,_=t.data;if(e<=0){$3.Util.error("pixelSize value can not be <= 0");return}for(v=0;v<d;v+=1)for(y=0;y<h;y+=1){for(a=0,l=0,c=0,u=0,f=v*e,p=f+e,g=y*e,m=g+e,D=0,i=f;i<p;i+=1)if(!(i>=n))for(o=g;o<m;o+=1)o>=r||(s=(n*o+i)*4,a+=_[s+0],l+=_[s+1],c+=_[s+2],u+=_[s+3],D+=1);for(a=a/D,l=l/D,c=c/D,u=u/D,i=f;i<p;i+=1)if(!(i>=n))for(o=g;o<m;o+=1)o>=r||(s=(n*o+i)*4,_[s+0]=a,_[s+1]=l,_[s+2]=c,_[s+3]=u)}};sl.Pixelate=W3;ly.Factory.addGetterSetter(q3.Node,"pixelSize",8,(0,z3.getNumberValidator)(),ly.Factory.afterSetFilter)});var dy=x(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.Posterize=void 0;var uy=$(),Y3=ve(),K3=q(),X3=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e,o;for(o=0;o<r;o+=1)n[o]=Math.floor(n[o]/i)*i};al.Posterize=X3;uy.Factory.addGetterSetter(Y3.Node,"levels",.5,(0,K3.getNumberValidator)(),uy.Factory.afterSetFilter)});var hy=x(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.RGB=void 0;var ll=$(),yh=ve(),Z3=q(),Q3=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),o=this.blue(),s,a;for(s=0;s<n;s+=4)a=(.34*e[s]+.5*e[s+1]+.16*e[s+2])/255,e[s]=a*r,e[s+1]=a*i,e[s+2]=a*o,e[s+3]=e[s+3]};cl.RGB=Q3;ll.Factory.addGetterSetter(yh.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});ll.Factory.addGetterSetter(yh.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});ll.Factory.addGetterSetter(yh.Node,"blue",0,Z3.RGBComponent,ll.Factory.afterSetFilter)});var fy=x(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.RGBA=void 0;var Io=$(),ul=ve(),J3=q(),e5=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),o=this.blue(),s=this.alpha(),a,l;for(a=0;a<n;a+=4)l=1-s,e[a]=r*s+e[a]*l,e[a+1]=i*s+e[a+1]*l,e[a+2]=o*s+e[a+2]*l};dl.RGBA=e5;Io.Factory.addGetterSetter(ul.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Io.Factory.addGetterSetter(ul.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Io.Factory.addGetterSetter(ul.Node,"blue",0,J3.RGBComponent,Io.Factory.afterSetFilter);Io.Factory.addGetterSetter(ul.Node,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t})});var py=x(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.Sepia=void 0;var t5=function(t){var e=t.data,n=e.length,r,i,o,s;for(r=0;r<n;r+=4)i=e[r+0],o=e[r+1],s=e[r+2],e[r+0]=Math.min(255,i*.393+o*.769+s*.189),e[r+1]=Math.min(255,i*.349+o*.686+s*.168),e[r+2]=Math.min(255,i*.272+o*.534+s*.131)};hl.Sepia=t5});var gy=x(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.Solarize=void 0;var n5=function(t){var e=t.data,n=t.width,r=t.height,i=n*4,o=r;do{var s=(o-1)*i,a=n;do{var l=s+(a-1)*4,c=e[l],u=e[l+1],d=e[l+2];c>127&&(c=255-c),u>127&&(u=255-u),d>127&&(d=255-d),e[l]=c,e[l+1]=u,e[l+2]=d}while(--a)}while(--o)};fl.Solarize=n5});var vy=x(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.Threshold=void 0;var my=$(),r5=ve(),i5=q(),o5=function(t){var e=this.threshold()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=1)n[i]=n[i]<e?0:255};pl.Threshold=o5;my.Factory.addGetterSetter(r5.Node,"threshold",.5,(0,i5.getNumberValidator)(),my.Factory.afterSetFilter)});var _y=x(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.Konva=void 0;var yy=$0(),s5=z0(),a5=Q0(),l5=J0(),c5=tv(),u5=nv(),Dy=ov(),d5=Wd(),h5=Ia(),f5=nh(),p5=lv(),g5=hv(),m5=pv(),v5=gv(),y5=ch(),D5=xv(),_5=kv(),C5=jv(),w5=Bv(),b5=Gv(),E5=qv(),S5=Wv(),I5=Kv(),M5=Xv(),T5=Zv(),x5=Qv(),A5=Jv(),N5=ry(),R5=oy(),O5=ay(),P5=cy(),F5=dy(),k5=hy(),L5=fy(),j5=py(),V5=gy(),U5=vy();gl.Konva=yy.Konva.Util._assign(yy.Konva,{Arc:s5.Arc,Arrow:a5.Arrow,Circle:l5.Circle,Ellipse:c5.Ellipse,Image:u5.Image,Label:Dy.Label,Tag:Dy.Tag,Line:d5.Line,Path:h5.Path,Rect:f5.Rect,RegularPolygon:p5.RegularPolygon,Ring:g5.Ring,Sprite:m5.Sprite,Star:v5.Star,Text:y5.Text,TextPath:D5.TextPath,Transformer:_5.Transformer,Wedge:C5.Wedge,Filters:{Blur:w5.Blur,Brighten:b5.Brighten,Contrast:E5.Contrast,Emboss:S5.Emboss,Enhance:I5.Enhance,Grayscale:M5.Grayscale,HSL:T5.HSL,HSV:x5.HSV,Invert:A5.Invert,Kaleidoscope:N5.Kaleidoscope,Mask:R5.Mask,Noise:O5.Noise,Pixelate:P5.Pixelate,Posterize:F5.Posterize,RGB:k5.RGB,RGBA:L5.RGBA,Sepia:j5.Sepia,Solarize:V5.Solarize,Threshold:U5.Threshold}})});var by=x((Cy,wy)=>{"use strict";Object.defineProperty(Cy,"__esModule",{value:!0});var B5=_y();wy.exports=B5.Konva});var bl=null;var wl=1,wh=Symbol("SIGNAL");function J(t){let e=bl;return bl=t,e}function bh(){return bl}var El={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ky(t){if(!(xl(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===wl)){if(!t.producerMustRecompute(t)&&!Il(t)){t.dirty=!1,t.lastCleanEpoch=wl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=wl}}function Sl(t){return t&&(t.nextProducerIndex=0),J(t)}function Eh(t,e){if(J(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(xl(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Tl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Il(t){Al(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ky(n),r!==n.version))return!0}return!1}function Ml(t){if(Al(t),xl(t))for(let e=0;e<t.producerNode.length;e++)Tl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Tl(t,e){if(Ly(t),t.liveConsumerNode.length===1&&jy(t))for(let r=0;r<t.producerNode.length;r++)Tl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Al(i),i.producerIndexOfThis[r]=e}}function xl(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Al(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Ly(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function jy(t){return t.producerNode!==void 0}function Vy(){throw new Error}var Uy=Vy;function Sh(t){Uy=t}function L(t){return typeof t=="function"}function or(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ao=or(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function pi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(L(r))try{r()}catch(o){e=o instanceof Ao?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Ih(o)}catch(s){e=e??[],s instanceof Ao?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ao(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ih(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&pi(n,e)}remove(e){let{_finalizers:n}=this;n&&pi(n,e),e instanceof t&&e._removeParent(this)}};Ce.EMPTY=(()=>{let t=new Ce;return t.closed=!0,t})();var Nl=Ce.EMPTY;function No(t){return t instanceof Ce||t&&"closed"in t&&L(t.remove)&&L(t.add)&&L(t.unsubscribe)}function Ih(t){L(t)?t():t.unsubscribe()}var ct={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var sr={setTimeout(t,e,...n){let{delegate:r}=sr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=sr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ro(t){sr.setTimeout(()=>{let{onUnhandledError:e}=ct;if(e)e(t);else throw t})}function gi(){}var Mh=Rl("C",void 0,void 0);function Th(t){return Rl("E",void 0,t)}function xh(t){return Rl("N",t,void 0)}function Rl(t,e,n){return{kind:t,value:e,error:n}}var xn=null;function ar(t){if(ct.useDeprecatedSynchronousErrorHandling){let e=!xn;if(e&&(xn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=xn;if(xn=null,n)throw r}}else t()}function Ah(t){ct.useDeprecatedSynchronousErrorHandling&&xn&&(xn.errorThrown=!0,xn.error=t)}var An=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,No(e)&&e.add(this)):this.destination=Gy}static create(e,n,r){return new lr(e,n,r)}next(e){this.isStopped?Pl(xh(e),this):this._next(e)}error(e){this.isStopped?Pl(Th(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pl(Mh,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},By=Function.prototype.bind;function Ol(t,e){return By.call(t,e)}var Fl=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Oo(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Oo(r)}else Oo(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Oo(n)}}},lr=class extends An{constructor(e,n,r){super();let i;if(L(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ct.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ol(e.next,o),error:e.error&&Ol(e.error,o),complete:e.complete&&Ol(e.complete,o)}):i=e}this.destination=new Fl(i)}};function Oo(t){ct.useDeprecatedSynchronousErrorHandling?Ah(t):Ro(t)}function Hy(t){throw t}function Pl(t,e){let{onStoppedNotification:n}=ct;n&&sr.setTimeout(()=>n(t,e))}var Gy={closed:!0,next:gi,error:Hy,complete:gi};var cr=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ze(t){return t}function kl(...t){return Ll(t)}function Ll(t){return t.length===0?ze:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var re=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=qy(n)?n:new lr(n,r,i);return ar(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Nh(r),new r((i,o)=>{let s=new lr({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[cr](){return this}pipe(...n){return Ll(n)(this)}toPromise(n){return n=Nh(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Nh(t){var e;return(e=t??ct.Promise)!==null&&e!==void 0?e:Promise}function $y(t){return t&&L(t.next)&&L(t.error)&&L(t.complete)}function qy(t){return t&&t instanceof An||$y(t)&&No(t)}function jl(t){return L(t?.lift)}function Z(t){return e=>{if(jl(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Q(t,e,n,r,i){return new Vl(t,e,n,r,i)}var Vl=class extends An{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ur(){return Z((t,e)=>{let n=null;t._refCount++;let r=Q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var dr=class extends re{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,jl(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let n=this.getSubject();e.add(this.source.subscribe(Q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return ur()(this)}};var Rh=or(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Be=(()=>{class t extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Po(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Rh}next(n){ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ar(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Nl:(this.currentObservers=null,o.push(n),new Ce(()=>{this.currentObservers=null,pi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return t.create=(e,n)=>new Po(e,n),t})(),Po=class extends Be{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Nl}};var Ae=class extends Be{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var We=new re(t=>t.complete());function Oh(t){return t&&L(t.schedule)}function Ph(t){return t[t.length-1]}function Fh(t){return L(Ph(t))?t.pop():void 0}function hn(t){return Oh(Ph(t))?t.pop():void 0}function Lh(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function kh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nn(t){return this instanceof Nn?(this.v=t,this):new Nn(t)}function jh(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(m,v){o.push([f,g,m,v])>1||l(f,g)})},p&&(i[f]=p(i[f])))}function l(f,p){try{c(r[f](p))}catch(g){h(o[0][3],g)}}function c(f){f.value instanceof Nn?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Vh(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof kh=="function"?kh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var Fo=t=>t&&typeof t.length=="number"&&typeof t!="function";function ko(t){return L(t?.then)}function Lo(t){return L(t[cr])}function jo(t){return Symbol.asyncIterator&&L(t?.[Symbol.asyncIterator])}function Vo(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zy(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Uo=zy();function Bo(t){return L(t?.[Uo])}function Ho(t){return jh(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Nn(n.read());if(i)return yield Nn(void 0);yield yield Nn(r)}}finally{n.releaseLock()}})}function Go(t){return L(t?.getReader)}function Me(t){if(t instanceof re)return t;if(t!=null){if(Lo(t))return Wy(t);if(Fo(t))return Yy(t);if(ko(t))return Ky(t);if(jo(t))return Uh(t);if(Bo(t))return Xy(t);if(Go(t))return Zy(t)}throw Vo(t)}function Wy(t){return new re(e=>{let n=t[cr]();if(L(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Yy(t){return new re(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Ky(t){return new re(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ro)})}function Xy(t){return new re(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Uh(t){return new re(e=>{Qy(t,e).catch(n=>e.error(n))})}function Zy(t){return Uh(Ho(t))}function Qy(t,e){var n,r,i,o;return Lh(this,void 0,void 0,function*(){try{for(n=Vh(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function $e(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function $o(t,e=0){return Z((n,r)=>{n.subscribe(Q(r,i=>$e(r,t,()=>r.next(i),e),()=>$e(r,t,()=>r.complete(),e),i=>$e(r,t,()=>r.error(i),e)))})}function qo(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Bh(t,e){return Me(t).pipe(qo(e),$o(e))}function Hh(t,e){return Me(t).pipe(qo(e),$o(e))}function Gh(t,e){return new re(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function $h(t,e){return new re(n=>{let r;return $e(n,e,()=>{r=t[Uo](),$e(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>L(r?.return)&&r.return()})}function zo(t,e){if(!t)throw new Error("Iterable cannot be null");return new re(n=>{$e(n,e,()=>{let r=t[Symbol.asyncIterator]();$e(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function qh(t,e){return zo(Ho(t),e)}function zh(t,e){if(t!=null){if(Lo(t))return Bh(t,e);if(Fo(t))return Gh(t,e);if(ko(t))return Hh(t,e);if(jo(t))return zo(t,e);if(Bo(t))return $h(t,e);if(Go(t))return qh(t,e)}throw Vo(t)}function Ee(t,e){return e?zh(t,e):Me(t)}function j(...t){let e=hn(t);return Ee(t,e)}function hr(t,e){let n=L(t)?t:()=>t,r=i=>i.error(n());return new re(e?i=>e.schedule(r,0,i):r)}function Ul(t){return!!t&&(t instanceof re||L(t.lift)&&L(t.subscribe))}var Vt=or(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function X(t,e){return Z((n,r)=>{let i=0;n.subscribe(Q(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:Jy}=Array;function e1(t,e){return Jy(e)?t(...e):t(e)}function Wh(t){return X(e=>e1(t,e))}var{isArray:t1}=Array,{getPrototypeOf:n1,prototype:r1,keys:i1}=Object;function Yh(t){if(t.length===1){let e=t[0];if(t1(e))return{args:e,keys:null};if(o1(e)){let n=i1(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function o1(t){return t&&typeof t=="object"&&n1(t)===r1}function Kh(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Wo(...t){let e=hn(t),n=Fh(t),{args:r,keys:i}=Yh(t);if(r.length===0)return Ee([],e);let o=new re(s1(r,e,i?s=>Kh(i,s):ze));return n?o.pipe(Wh(n)):o}function s1(t,e,n=ze){return r=>{Xh(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)Xh(e,()=>{let c=Ee(t[l],e),u=!1;c.subscribe(Q(r,d=>{o[l]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Xh(t,e,n){t?$e(n,t,e):e()}function Zh(t,e,n,r,i,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{o&&e.next(g),c++;let m=!1;Me(n(g,u++)).subscribe(Q(e,v=>{i?.(v),o?f(v):e.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<r;){let v=l.shift();s?$e(e,s,()=>p(v)):p(v)}h()}catch(v){e.error(v)}}))};return t.subscribe(Q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Se(t,e,n=1/0){return L(e)?Se((r,i)=>X((o,s)=>e(r,o,i,s))(Me(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>Zh(r,i,t,n)))}function Bl(t=1/0){return Se(ze,t)}function Qh(){return Bl(1)}function fr(...t){return Qh()(Ee(t,hn(t)))}function Yo(t){return new re(e=>{Me(t()).subscribe(e)})}function ut(t,e){return Z((n,r)=>{let i=0;n.subscribe(Q(r,o=>t.call(e,o,i++)&&r.next(o)))})}function fn(t){return Z((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Q(n,void 0,void 0,s=>{o=Me(t(s,fn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Jh(t,e,n,r,i){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(Q(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),r&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function pr(t,e){return L(e)?Se(t,e,1):Se(t,1)}function pn(t){return Z((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Ut(t){return t<=0?()=>We:Z((e,n)=>{let r=0;e.subscribe(Q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Hl(t){return X(()=>t)}function Ko(t=a1){return Z((e,n)=>{let r=!1;e.subscribe(Q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function a1(){return new Vt}function mi(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function wt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):ze,Ut(1),n?pn(e):Ko(()=>new Vt))}function gr(t){return t<=0?()=>We:Z((e,n)=>{let r=[];e.subscribe(Q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Gl(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ut((i,o)=>t(i,o,r)):ze,gr(1),n?pn(e):Ko(()=>new Vt))}function $l(t,e){return Z(Jh(t,e,arguments.length>=2,!0))}function ql(...t){let e=hn(t);return Z((n,r)=>{(e?fr(t,n,e):fr(t,n)).subscribe(r)})}function dt(t,e){return Z((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Q(r,l=>{i?.unsubscribe();let c=0,u=o++;Me(t(l,u)).subscribe(i=Q(r,d=>r.next(e?e(l,d,u,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function zl(t){return Z((e,n)=>{Me(t).subscribe(Q(n,()=>n.complete(),gi)),!n.closed&&e.subscribe(n)})}function Ne(t,e,n){let r=L(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Q(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):ze}var O=class extends Error{constructor(e,n){super(Uc(e,n)),this.code=e}};function Uc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Bc(t){return{toString:t}.toString()}function se(t){for(let e in t)if(t[e]===se)return e;throw Error("Could not find renamed property on target object.")}function Ye(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ye).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function ef(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var l1=se({__forward_ref__:se});function Lf(t){return t.__forward_ref__=Lf,t.toString=function(){return Ye(this())},t}function tt(t){return jf(t)?t():t}function jf(t){return typeof t=="function"&&t.hasOwnProperty(l1)&&t.__forward_ref__===Lf}function k(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Cs(t){return tf(t,Uf)||tf(t,Bf)}function Vf(t){return Cs(t)!==null}function tf(t,e){return t.hasOwnProperty(e)?t[e]:null}function c1(t){let e=t&&(t[Uf]||t[Bf]);return e||null}function nf(t){return t&&(t.hasOwnProperty(rf)||t.hasOwnProperty(u1))?t[rf]:null}var Uf=se({\u0275prov:se}),rf=se({\u0275inj:se}),Bf=se({ngInjectableDef:se}),u1=se({ngInjectorDef:se}),V=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=k({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hf(t){return t&&!!t.\u0275providers}var d1=se({\u0275cmp:se}),h1=se({\u0275dir:se}),f1=se({\u0275pipe:se}),p1=se({\u0275mod:se}),rs=se({\u0275fac:se}),Di=se({__NG_ELEMENT_ID__:se}),of=se({__NG_ENV_ID__:se});function g1(t){return typeof t=="string"?t:t==null?"":String(t)}function m1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():g1(t)}function v1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new O(-200,t)}function Hc(t,e){throw new O(-201,!1)}var B=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(B||{}),tc;function Gf(){return tc}function et(t){let e=tc;return tc=t,e}function $f(t,e,n){let r=Cs(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&B.Optional)return null;if(e!==void 0)return e;Hc(t,"Injector")}var y1={},_i=y1,D1="__NG_DI_FLAG__",is="ngTempTokenPath",_1="ngTokenPath",C1=/\n/gm,w1="\u0275",sf="__source",Dr;function b1(){return Dr}function gn(t){let e=Dr;return Dr=t,e}function E1(t,e=B.Default){if(Dr===void 0)throw new O(-203,!1);return Dr===null?$f(t,void 0,e):Dr.get(t,e&B.Optional?null:void 0,e)}function W(t,e=B.Default){return(Gf()||E1)(tt(t),e)}function E(t,e=B.Default){return W(t,ws(e))}function ws(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function nc(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new O(900,!1);let i,o=B.Default;for(let s=0;s<r.length;s++){let a=r[s],l=S1(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(W(i,o))}else e.push(W(r))}return e}function S1(t){return t[D1]}function I1(t,e,n,r){let i=t[is];throw e[sf]&&i.unshift(e[sf]),t.message=M1(`
`+t.message,i,n,r),t[_1]=i,t[is]=null,t}function M1(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==w1?t.slice(2):t;let i=Ye(e);if(Array.isArray(e))i=e.map(Ye).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Ye(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(C1,`
  `)}`}function Cr(t,e){let n=t.hasOwnProperty(rs);return n?t[rs]:null}function T1(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function x1(t){return t.flat(Number.POSITIVE_INFINITY)}function Gc(t,e){t.forEach(n=>Array.isArray(n)?Gc(n,e):e(n))}function qf(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function os(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Ci={},wr=[],br=new V(""),zf=new V("",-1),Wf=new V(""),ss=class{get(e,n=_i){if(n===_i){let r=new Error(`NullInjectorError: No provider for ${Ye(e)}!`);throw r.name="NullInjectorError",r}return n}},Yf=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Yf||{}),St=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(St||{}),vn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(vn||{});function A1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function rc(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];R1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function N1(t){return t===3||t===4||t===6}function R1(t){return t.charCodeAt(0)===64}function $c(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?af(t,n,i,null,e[++r]):af(t,n,i,null,null))}}return t}function af(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var Kf="ng-template";function O1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&A1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(qc(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function qc(t){return t.type===4&&t.value!==Kf}function P1(t,e,n){let r=t.type===4&&!n?Kf:t.value;return e===r}function F1(t,e,n){let r=4,i=t.attrs,o=i!==null?j1(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!ht(r)&&!ht(l))return!1;if(s&&ht(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!P1(t,l,n)||l===""&&e.length===1){if(ht(r))return!1;s=!0}}else if(r&8){if(i===null||!O1(t,i,l,n)){if(ht(r))return!1;s=!0}}else{let c=e[++a],u=k1(l,i,qc(t),n);if(u===-1){if(ht(r))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(ht(r))return!1;s=!0}}}}return ht(r)||s}function ht(t){return(t&1)===0}function k1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return V1(e,t)}function L1(t,e,n=!1){for(let r=0;r<e.length;r++)if(F1(t,e[r],n))return!0;return!1}function j1(t){for(let e=0;e<t.length;e++){let n=t[e];if(N1(n))return e}return t.length}function V1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function lf(t,e){return t?":not("+e.trim()+")":e}function U1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ht(s)&&(e+=lf(o,i),i=""),r=s,o=o||!ht(r);n++}return i!==""&&(e+=lf(o,i)),e}function B1(t){return t.map(U1).join(",")}function H1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!ht(i))break;i=o}r++}return{attrs:e,classes:n}}function Rr(t){return Bc(()=>{let e=ep(t),n=he(S({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Yf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||St.Emulated,styles:t.styles||wr,_:null,schemas:t.schemas||null,tView:null,id:""});tp(n);let r=t.dependencies;return n.directiveDefs=uf(r,!1),n.pipeDefs=uf(r,!0),n.id=q1(n),n})}function G1(t){return kn(t)||Xf(t)}function $1(t){return t!==null}function cf(t,e){if(t==null)return Ci;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=vn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==vn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function zc(t){return Bc(()=>{let e=ep(t);return tp(e),e})}function kn(t){return t[d1]||null}function Xf(t){return t[h1]||null}function Zf(t){return t[f1]||null}function Qf(t){let e=kn(t)||Xf(t)||Zf(t);return e!==null?e.standalone:!1}function Jf(t,e){let n=t[p1]||null;if(!n&&e===!0)throw new Error(`Type ${Ye(t)} does not have '\u0275mod' property.`);return n}function ep(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ci,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||wr,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cf(t.inputs,e),outputs:cf(t.outputs),debugInfo:null}}function tp(t){t.features?.forEach(e=>e(t))}function uf(t,e){if(!t)return null;let n=e?Zf:G1;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter($1)}function q1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function bs(t){return{\u0275providers:t}}function z1(...t){return{\u0275providers:np(!0,t),\u0275fromNgModule:!0}}function np(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Gc(e,s=>{let a=s;ic(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&rp(i,o),n}function rp(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Wc(i,o=>{e(o,r)})}}function ic(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,o=nf(t),s=!o&&kn(t);if(!o&&!s){let l=t.ngModule;if(o=nf(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)ic(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Gc(o.imports,u=>{ic(u,e,n,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&rp(c,e)}if(!a){let c=Cr(i)||(()=>new i);e({provide:i,useFactory:c,deps:wr},i),e({provide:Wf,useValue:i,multi:!0},i),e({provide:br,useValue:()=>W(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=t;Wc(l,u=>{e(u,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Wc(t,e){for(let n of t)Hf(n)&&(n=n.\u0275providers),Array.isArray(n)?Wc(n,e):e(n)}var W1=se({provide:String,useValue:se});function ip(t){return t!==null&&typeof t=="object"&&W1 in t}function Y1(t){return!!(t&&t.useExisting)}function K1(t){return!!(t&&t.useFactory)}function oc(t){return typeof t=="function"}var Es=new V(""),Zo={},X1={},Wl;function Yc(){return Wl===void 0&&(Wl=new ss),Wl}var rt=class{},wi=class extends rt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ac(e,s=>this.processProvider(s)),this.records.set(zf,mr(void 0,this)),i.has("environment")&&this.records.set(rt,mr(void 0,this));let o=this.records.get(Es);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Wf,wr,B.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=gn(this),r=et(void 0),i;try{return e()}finally{gn(n),et(r)}}get(e,n=_i,r=B.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(of))return e[of](this);r=ws(r);let i,o=gn(this),s=et(void 0);try{if(!(r&B.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=n2(e)&&Cs(e);c&&this.injectableDefInScope(c)?l=mr(sc(e),Zo):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&B.Self?Yc():this.parent;return n=r&B.Optional&&n===_i?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[is]=a[is]||[]).unshift(Ye(e)),o)throw a;return I1(a,e,"R3InjectorError",this.source)}else throw a}finally{et(s),gn(o)}}resolveInjectorInitializers(){let e=J(null),n=gn(this),r=et(void 0),i;try{let o=this.get(br,wr,B.Self);for(let s of o)s()}finally{gn(n),et(r),J(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ye(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){e=tt(e);let n=oc(e)?e:tt(e&&e.provide),r=Q1(e);if(!oc(e)&&e.multi===!0){let i=this.records.get(n);i||(i=mr(void 0,Zo,!0),i.factory=()=>nc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=J(null);try{return n.value===Zo&&(n.value=X1,n.value=n.factory()),typeof n.value=="object"&&n.value&&t2(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function sc(t){let e=Cs(t),n=e!==null?e.factory:Cr(t);if(n!==null)return n;if(t instanceof V)throw new O(204,!1);if(t instanceof Function)return Z1(t);throw new O(204,!1)}function Z1(t){if(t.length>0)throw new O(204,!1);let n=c1(t);return n!==null?()=>n.factory(t):()=>new t}function Q1(t){if(ip(t))return mr(void 0,t.useValue);{let e=J1(t);return mr(e,Zo)}}function J1(t,e,n){let r;if(oc(t)){let i=tt(t);return Cr(i)||sc(i)}else if(ip(t))r=()=>tt(t.useValue);else if(K1(t))r=()=>t.useFactory(...nc(t.deps||[]));else if(Y1(t))r=()=>W(tt(t.useExisting));else{let i=tt(t&&(t.useClass||t.provide));if(e2(t))r=()=>new i(...nc(t.deps));else return Cr(i)||sc(i)}return r}function mr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function e2(t){return!!t.deps}function t2(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function n2(t){return typeof t=="function"||typeof t=="object"&&t instanceof V}function ac(t,e){for(let n of t)Array.isArray(n)?ac(n,e):n&&Hf(n)?ac(n.\u0275providers,e):e(n)}function qt(t,e){t instanceof wi&&t.assertNotDestroyed();let n,r=gn(t),i=et(void 0);try{return e()}finally{gn(r),et(i)}}function r2(){return Gf()!==void 0||b1()!=null}function i2(t){return typeof t=="function"}var zt=0,H=1,F=2,je=3,ft=4,pt=5,as=6,ls=7,It=8,Er=9,Bt=10,Mt=11,bi=12,df=13,Ti=14,Tt=15,Ln=16,vr=17,Ht=18,Ss=19,op=20,mn=21,Yl=22,nt=23,Sr=25,sp=1;var jn=7,cs=8,Ir=9,Ke=10,us=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(us||{});function Pn(t){return Array.isArray(t)&&typeof t[sp]=="object"}function Wt(t){return Array.isArray(t)&&t[sp]===!0}function ap(t){return(t.flags&4)!==0}function Kc(t){return t.componentOffset>-1}function lp(t){return(t.flags&1)===1}function xi(t){return!!t.template}function lc(t){return(t[F]&512)!==0}var cc=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function cp(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Is(){return up}function up(t){return t.type.prototype.ngOnChanges&&(t.setInput=s2),o2}Is.ngInherit=!0;function o2(){let t=hp(this),e=t?.current;if(e){let n=t.previous;if(n===Ci)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function s2(t,e,n,r,i){let o=this.declaredInputs[r],s=hp(t)||a2(t,{previous:Ci,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new cc(c&&c.currentValue,n,l===Ci),cp(t,e,i,n)}var dp="__ngSimpleChanges__";function hp(t){return t[dp]||null}function a2(t,e){return t[dp]=e}var hf=null;var bt=function(t,e,n){hf?.(t,e,n)},l2="svg",c2="math";function Gt(t){for(;Array.isArray(t);)t=t[zt];return t}function xt(t,e){return Gt(e[t.index])}function u2(t,e){return t.data[e]}function Or(t,e){let n=e[t];return Pn(n)?n:n[zt]}function d2(t){return(t[F]&4)===4}function Xc(t){return(t[F]&128)===128}function h2(t){return Wt(t[je])}function ff(t,e){return e==null?null:t[e]}function fp(t){t[vr]=0}function pp(t){t[F]&1024||(t[F]|=1024,Xc(t)&&Ts(t))}function Ms(t){return!!(t[F]&9216||t[nt]?.dirty)}function uc(t){t[Bt].changeDetectionScheduler?.notify(8),t[F]&64&&(t[F]|=1024),Ms(t)&&Ts(t)}function Ts(t){t[Bt].changeDetectionScheduler?.notify(0);let e=Vn(t);for(;e!==null&&!(e[F]&8192||(e[F]|=8192,!Xc(e)));)e=Vn(e)}function gp(t,e){if((t[F]&256)===256)throw new O(911,!1);t[mn]===null&&(t[mn]=[]),t[mn].push(e)}function f2(t,e){if(t[mn]===null)return;let n=t[mn].indexOf(e);n!==-1&&t[mn].splice(n,1)}function Vn(t){let e=t[je];return Wt(e)?e[je]:e}var ee={lFrame:Ep(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mp=!1;function p2(){return ee.lFrame.elementDepthCount}function g2(){ee.lFrame.elementDepthCount++}function m2(){ee.lFrame.elementDepthCount--}function vp(){return ee.bindingsEnabled}function v2(){return ee.skipHydrationRootTNode!==null}function y2(t){return ee.skipHydrationRootTNode===t}function D2(){ee.skipHydrationRootTNode=null}function Ve(){return ee.lFrame.lView}function Ai(){return ee.lFrame.tView}function Ni(t){return ee.lFrame.contextLView=t,t[It]}function Ri(t){return ee.lFrame.contextLView=null,t}function gt(){let t=yp();for(;t!==null&&t.type===64;)t=t.parent;return t}function yp(){return ee.lFrame.currentTNode}function _2(){let t=ee.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Zc(t,e){let n=ee.lFrame;n.currentTNode=t,n.isParent=e}function Dp(){return ee.lFrame.isParent}function C2(){ee.lFrame.isParent=!1}function _p(){return mp}function pf(t){mp=t}function w2(t){return ee.lFrame.bindingIndex=t}function b2(){return ee.lFrame.inI18n}function E2(t,e){let n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=t,dc(e)}function S2(){return ee.lFrame.currentDirectiveIndex}function dc(t){ee.lFrame.currentDirectiveIndex=t}function Cp(){return ee.lFrame.currentQueryIndex}function Qc(t){ee.lFrame.currentQueryIndex=t}function I2(t){let e=t[H];return e.type===2?e.declTNode:e.type===1?t[pt]:null}function wp(t,e,n){if(n&B.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&B.Host);)if(i=I2(o),i===null||(o=o[Ti],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ee.lFrame=bp();return r.currentTNode=e,r.lView=t,!0}function Jc(t){let e=bp(),n=t[H];ee.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function bp(){let t=ee.lFrame,e=t===null?null:t.child;return e===null?Ep(t):e}function Ep(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Sp(){let t=ee.lFrame;return ee.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Ip=Sp;function eu(){let t=Sp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function M2(){return ee.lFrame.selectedIndex}function Un(t){ee.lFrame.selectedIndex=t}function T2(){return ee.lFrame.currentNamespace}var Mp=!0;function x2(){return Mp}function A2(t){Mp=t}function N2(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=up(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Tp(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Qo(t,e,n){xp(t,e,3,n)}function Jo(t,e,n,r){(t[F]&3)===n&&xp(t,e,n,r)}function Kl(t,e){let n=t[F];(n&3)===e&&(n&=16383,n+=1,t[F]=n)}function xp(t,e,n,r){let i=r!==void 0?t[vr]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[vr]+=65536),(a<o||o==-1)&&(R2(t,n,e,l),t[vr]=(t[vr]&4294901760)+l+2),l++}function gf(t,e){bt(4,t,e);let n=J(null);try{e.call(t)}finally{J(n),bt(5,t,e)}}function R2(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[F]>>14<t[vr]>>16&&(t[F]&3)===e&&(t[F]+=16384,gf(a,o)):gf(a,o)}var _r=-1,Ei=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function O2(t){return t instanceof Ei}function P2(t){return(t.flags&8)!==0}function F2(t){return(t.flags&16)!==0}var Xl={},hc=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=ws(r);let i=this.injector.get(e,Xl,r);return i!==Xl||n===Xl?i:this.parentInjector.get(e,n,r)}};function Ap(t){return t!==_r}function ds(t){return t&32767}function k2(t){return t>>16}function hs(t,e){let n=k2(t),r=e;for(;n>0;)r=r[Ti],n--;return r}var fc=!0;function mf(t){let e=fc;return fc=t,e}var L2=256,Np=L2-1,Rp=5,j2=0,Et={};function V2(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Di)&&(r=n[Di]),r==null&&(r=n[Di]=j2++);let i=r&Np,o=1<<i;e.data[t+(i>>Rp)]|=o}function Op(t,e){let n=Pp(t,e);if(n!==-1)return n;let r=e[H];r.firstCreatePass&&(t.injectorIndex=e.length,Zl(r.data,t),Zl(e,null),Zl(r.blueprint,null));let i=tu(t,e),o=t.injectorIndex;if(Ap(i)){let s=ds(i),a=hs(i,e),l=a[H].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Zl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pp(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function tu(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Vp(i),r===null)return _r;if(n++,i=i[Ti],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return _r}function U2(t,e,n){V2(t,e,n)}function Fp(t,e,n){if(n&B.Optional||t!==void 0)return t;Hc(e,"NodeInjector")}function kp(t,e,n,r){if(n&B.Optional&&r===void 0&&(r=null),!(n&(B.Self|B.Host))){let i=t[Er],o=et(void 0);try{return i?i.get(e,r,n&B.Optional):$f(e,r,n&B.Optional)}finally{et(o)}}return Fp(r,e,n)}function Lp(t,e,n,r=B.Default,i){if(t!==null){if(e[F]&2048&&!(r&B.Self)){let s=$2(t,e,n,r,Et);if(s!==Et)return s}let o=jp(t,e,n,r,Et);if(o!==Et)return o}return kp(e,n,r,i)}function jp(t,e,n,r,i){let o=H2(n);if(typeof o=="function"){if(!wp(e,t,r))return r&B.Host?Fp(i,n,r):kp(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&B.Optional))Hc(n);else return s}finally{Ip()}}else if(typeof o=="number"){let s=null,a=Pp(t,e),l=_r,c=r&B.Host?e[Tt][pt]:null;for((a===-1||r&B.SkipSelf)&&(l=a===-1?tu(t,e):e[a+8],l===_r||!yf(r,!1)?a=-1:(s=e[H],a=ds(l),e=hs(l,e)));a!==-1;){let u=e[H];if(vf(o,a,u.data)){let d=B2(a,e,n,s,r,c);if(d!==Et)return d}l=e[a+8],l!==_r&&yf(r,e[H].data[a+8]===c)&&vf(o,a,e)?(s=u,a=ds(l),e=hs(l,e)):a=-1}}return i}function B2(t,e,n,r,i,o){let s=e[H],a=s.data[t+8],l=r==null?Kc(a)&&fc:r!=s&&(a.type&3)!==0,c=i&B.Host&&o===a,u=es(a,s,n,l,c);return u!==null?Mr(e,s,u,a):Et}function es(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:c;for(let f=d;f<h;f++){let p=s[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(i){let f=s[l];if(f&&xi(f)&&f.type===n)return l}return null}function Mr(t,e,n,r){let i=t[n],o=e.data;if(O2(i)){let s=i;s.resolving&&v1(m1(o[n]));let a=mf(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?et(s.injectImpl):null,u=wp(t,r,B.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&N2(n,o[n],e)}finally{c!==null&&et(c),mf(a),s.resolving=!1,Ip()}}return i}function H2(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Di)?t[Di]:void 0;return typeof e=="number"?e>=0?e&Np:G2:e}function vf(t,e,n){let r=1<<t;return!!(n[e+(t>>Rp)]&r)}function yf(t,e){return!(t&B.Self)&&!(t&B.Host&&e)}var Fn=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Lp(this._tNode,this._lView,e,ws(r),n)}};function G2(){return new Fn(gt(),Ve())}function nu(t){return Bc(()=>{let e=t.prototype.constructor,n=e[rs]||pc(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[rs]||pc(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function pc(t){return jf(t)?()=>{let e=pc(tt(t));return e&&e()}:Cr(t)}function $2(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[F]&2048&&!(s[F]&512);){let a=jp(o,s,n,r|B.Self,Et);if(a!==Et)return a;let l=o.parent;if(!l){let c=s[op];if(c){let u=c.get(n,Et,r);if(u!==Et)return u}l=Vp(s),s=s[Ti]}o=l}return i}function Vp(t){let e=t[H],n=e.type;return n===2?e.declTNode:n===1?t[pt]:null}function Df(t,e=null,n=null,r){let i=Up(t,e,n,r);return i.resolveInjectorInitializers(),i}function Up(t,e=null,n=null,r,i=new Set){let o=[n||wr,z1(t)];return r=r||(typeof t=="object"?void 0:Ye(t)),new wi(o,e||Yc(),r||null,i)}var Rn=class Rn{static create(e,n){if(Array.isArray(e))return Df({name:""},n,e,"");{let r=e.name??"";return Df({name:r},e.parent,e.providers,r)}}};Rn.THROW_IF_NOT_FOUND=_i,Rn.NULL=new ss,Rn.\u0275prov=k({token:Rn,providedIn:"any",factory:()=>W(zf)}),Rn.__NG_ELEMENT_ID__=-1;var Bn=Rn;var q2=new V("");q2.__NG_ELEMENT_ID__=t=>{let e=gt();if(e===null)throw new O(204,!1);if(e.type&2)return e.value;if(t&B.Optional)return null;throw new O(204,!1)};var z2="ngOriginalError";function Ql(t){return t[z2]}var Bp=!0,Hp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=W2,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),gc=class extends Hp{constructor(e){super(),this._lView=e}onDestroy(e){return gp(this._lView,e),()=>f2(this._lView,e)}};function W2(){return new gc(Ve())}var Pr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ae(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=k({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var mc=class extends Be{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,r2()&&(this.destroyRef=E(Hp,{optional:!0})??void 0,this.pendingTasks=E(Pr,{optional:!0})??void 0)}emit(e){let n=J(null);try{super.next(e)}finally{J(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ce&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Le=mc;function fs(...t){}function Gp(t){let e,n;function r(){t=fs;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function _f(t){return queueMicrotask(()=>t()),()=>{t=fs}}var ru="isAngularZone",ps=ru+"_ID",Y2=0,we=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Bp}=e;if(typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Z2(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ru)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new O(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,K2,fs,fs);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},K2={};function iu(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function X2(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Gp(()=>{t.callbackScheduled=!1,vc(t),t.isCheckStableRunning=!0,iu(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),vc(t)}function Z2(t){let e=()=>{X2(t)},n=Y2++;t._inner=t._inner.fork({name:"angular",properties:{[ru]:!0,[ps]:n,[ps+n]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(Q2(l))return r.invokeTask(o,s,a,l);try{return Cf(t),r.invokeTask(o,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),wf(t)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return Cf(t),r.invoke(o,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!J2(l)&&e(),wf(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,vc(t),iu(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function vc(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Cf(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function wf(t){t._nesting--,iu(t)}var yc=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Q2(t){return $p(t,"__ignore_ng_zone__")}function J2(t){return $p(t,"__scheduler_tick__")}function $p(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var $t=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ql(e);for(;n&&Ql(n);)n=Ql(n);return n||null}},eD=new V("",{providedIn:"root",factory:()=>{let t=E(we),e=E($t);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function tD(){return Fr(gt(),Ve())}function Fr(t,e){return new Gn(xt(t,e))}var Gn=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=tD;let t=e;return t})();function nD(t){return t instanceof Gn?t.nativeElement:t}function rD(){return this._results[Symbol.iterator]()}var Dc=class t{get changes(){return this._changes??=new Le}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=rD)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=x1(e);(this._changesDetected=!T1(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function qp(t){return(t.flags&128)===128}var zp=new Map,iD=0;function oD(){return iD++}function sD(t){zp.set(t[Ss],t)}function _c(t){zp.delete(t[Ss])}var bf="__ngContext__";function Tr(t,e){Pn(e)?(t[bf]=e[Ss],sD(e)):t[bf]=e}function Wp(t){return Kp(t[bi])}function Yp(t){return Kp(t[ft])}function Kp(t){for(;t!==null&&!Wt(t);)t=t[ft];return t}var Cc;function Xp(t){Cc=t}function aD(){if(Cc!==void 0)return Cc;if(typeof document<"u")return document;throw new O(210,!1)}var ou=new V("",{providedIn:"root",factory:()=>lD}),lD="ng",su=new V(""),kr=new V("",{providedIn:"platform",factory:()=>"unknown"});var au=new V("",{providedIn:"root",factory:()=>aD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var cD="h",uD="b";var dD=()=>null;function lu(t,e,n=!1){return dD(t,e,n)}var Zp=!1,hD=new V("",{providedIn:"root",factory:()=>Zp});function Qp(t){return t instanceof Function?t():t}var $n=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}($n||{}),fD;function cu(t,e){return fD(t,e)}function yr(t,e,n,r,i){if(r!=null){let o,s=!1;Wt(r)?o=r:Pn(r)&&(s=!0,r=r[zt]);let a=Gt(r);t===0&&n!==null?i==null?rg(e,n,a):gs(e,n,a,i||null,!0):t===1&&n!==null?gs(e,n,a,i||null,!0):t===2?MD(e,a,s):t===3&&e.destroyNode(a),o!=null&&xD(e,t,o,n,i)}}function Jp(t,e,n){return t.createElement(e,n)}function pD(t,e){eg(t,e),e[zt]=null,e[pt]=null}function gD(t,e,n,r,i,o){r[zt]=i,r[pt]=e,xs(t,r,n,1,i,o)}function eg(t,e){e[Bt].changeDetectionScheduler?.notify(9),xs(t,e,e[Mt],2,null,null)}function mD(t){let e=t[bi];if(!e)return Jl(t[H],t);for(;e;){let n=null;if(Pn(e))n=e[bi];else{let r=e[Ke];r&&(n=r)}if(!n){for(;e&&!e[ft]&&e!==t;)Pn(e)&&Jl(e[H],e),e=e[je];e===null&&(e=t),Pn(e)&&Jl(e[H],e),n=e&&e[ft]}e=n}}function vD(t,e,n,r){let i=Ke+r,o=n.length;r>0&&(n[i-1][ft]=e),r<o-Ke?(e[ft]=n[i],qf(n,Ke+r,e)):(n.push(e),e[ft]=null),e[je]=n;let s=e[Ln];s!==null&&n!==s&&tg(s,e);let a=e[Ht];a!==null&&a.insertView(t),uc(e),e[F]|=128}function tg(t,e){let n=t[Ir],r=e[je];if(Pn(r))t[F]|=us.HasTransplantedViews;else{let i=r[je][Tt];e[Tt]!==i&&(t[F]|=us.HasTransplantedViews)}n===null?t[Ir]=[e]:n.push(e)}function uu(t,e){let n=t[Ir],r=n.indexOf(e);n.splice(r,1)}function wc(t,e){if(t.length<=Ke)return;let n=Ke+e,r=t[n];if(r){let i=r[Ln];i!==null&&i!==t&&uu(i,r),e>0&&(t[n-1][ft]=r[ft]);let o=os(t,Ke+e);pD(r[H],r);let s=o[Ht];s!==null&&s.detachView(o[H]),r[je]=null,r[ft]=null,r[F]&=-129}return r}function ng(t,e){if(!(e[F]&256)){let n=e[Mt];n.destroyNode&&xs(t,e,n,3,null,null),mD(e)}}function Jl(t,e){if(e[F]&256)return;let n=J(null);try{e[F]&=-129,e[F]|=256,e[nt]&&Ml(e[nt]),DD(t,e),yD(t,e),e[H].type===1&&e[Mt].destroy();let r=e[Ln];if(r!==null&&Wt(e[je])){r!==e[je]&&uu(r,e);let i=e[Ht];i!==null&&i.detachView(t)}_c(e)}finally{J(n)}}function yD(t,e){let n=t.cleanup,r=e[ls];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[ls]=null);let i=e[mn];if(i!==null){e[mn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function DD(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ei)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];bt(4,a,l);try{l.call(a)}finally{bt(5,a,l)}}else{bt(4,i,o);try{o.call(i)}finally{bt(5,i,o)}}}}}function _D(t,e,n){return CD(t,e.parent,n)}function CD(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[zt];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===St.None||o===St.Emulated)return null}return xt(r,n)}}function gs(t,e,n,r,i){t.insertBefore(e,n,r,i)}function rg(t,e,n){t.appendChild(e,n)}function Ef(t,e,n,r,i){r!==null?gs(t,e,n,r,i):rg(t,e,n)}function ig(t,e){return t.parentNode(e)}function wD(t,e){return t.nextSibling(e)}function bD(t,e,n){return SD(t,e,n)}function ED(t,e,n){return t.type&40?xt(t,n):null}var SD=ED,Sf;function ID(t,e,n,r){let i=_D(t,r,e),o=e[Mt],s=r.parent||e[pt],a=bD(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Ef(o,i,n[l],a,!1);else Ef(o,i,n,a,!1);Sf!==void 0&&Sf(o,r,e,n,i)}function vi(t,e){if(e!==null){let n=e.type;if(n&3)return xt(e,t);if(n&4)return bc(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return vi(t,r);{let i=t[e.index];return Wt(i)?bc(-1,i):Gt(i)}}else{if(n&128)return vi(t,e.next);if(n&32)return cu(e,t)()||Gt(t[e.index]);{let r=og(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vn(t[Tt]);return vi(i,r)}else return vi(t,e.next)}}}return null}function og(t,e){if(e!==null){let r=t[Tt][pt],i=e.projection;return r.projection[i]}return null}function bc(t,e){let n=Ke+t+1;if(n<e.length){let r=e[n],i=r[H].firstChild;if(i!==null)return vi(r,i)}return e[jn]}function MD(t,e,n){t.removeChild(null,e,n)}function du(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],l=n.type;if(s&&e===0&&(a&&Tr(Gt(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)du(t,e,n.child,r,i,o,!1),yr(e,t,i,a,o);else if(l&32){let c=cu(n,r),u;for(;u=c();)yr(e,t,i,u,o);yr(e,t,i,a,o)}else l&16?TD(t,e,r,n,i,o):yr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function xs(t,e,n,r,i,o){du(n,r,t.firstChild,e,i,o,!1)}function TD(t,e,n,r,i,o){let s=n[Tt],l=s[pt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];yr(e,t,i,u,o)}else{let c=l,u=s[je];qp(r)&&(c.flags|=128),du(t,e,c,u,i,o,!0)}}function xD(t,e,n,r,i){let o=n[jn],s=Gt(n);o!==s&&yr(e,t,r,o,i);for(let a=Ke;a<n.length;a++){let l=n[a];xs(l[H],l,t,e,r,o)}}function AD(t,e,n){t.setAttribute(e,"style",n)}function sg(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ag(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&rc(t,e,r),i!==null&&sg(t,e,i),o!==null&&AD(t,e,o)}var lg={};function ND(t,e,n,r){if(!r)if((e[F]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Qo(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Jo(e,o,0,n)}Un(n)}function hu(t,e=B.Default){let n=Ve();if(n===null)return W(t,e);let r=gt();return Lp(r,n,tt(t),e)}function cg(t,e,n,r,i,o){let s=J(null);try{let a=null;i&vn.SignalBased&&(a=e[r][wh]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&vn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):cp(e,a,r,o)}finally{J(s)}}function RD(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Un(~i);else{let o=i,s=n[++r],a=n[++r];E2(s,o);let l=e[o];a(2,l)}}}finally{Un(-1)}}function As(t,e,n,r,i,o,s,a,l,c,u){let d=e.blueprint.slice();return d[zt]=i,d[F]=r|4|128|8|64,(c!==null||t&&t[F]&2048)&&(d[F]|=2048),fp(d),d[je]=d[Ti]=t,d[It]=n,d[Bt]=s||t&&t[Bt],d[Mt]=a||t&&t[Mt],d[Er]=l||t&&t[Er]||null,d[pt]=o,d[Ss]=oD(),d[as]=u,d[op]=c,d[Tt]=e.type==2?t[Tt]:d,d}function ug(t,e,n,r,i){let o=t.data[e];if(o===null)o=OD(t,e,n,r,i),b2()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=_2();o.injectorIndex=s===null?-1:s.injectorIndex}return Zc(o,!0),o}function OD(t,e,n,r,i){let o=yp(),s=Dp(),a=s?o:o&&o.parent,l=t.data[e]=BD(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function dg(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function hg(t,e,n,r,i){let o=M2(),s=r&2;try{Un(-1),s&&e.length>Sr&&ND(t,e,Sr,!1),bt(s?2:0,i),n(r,i)}finally{Un(o),bt(s?3:1,i)}}function fg(t,e,n){if(ap(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{J(r)}}}function PD(t,e,n){vp()&&(zD(t,e,n,xt(n,e)),(n.flags&64)===64&&vg(t,e,n))}function FD(t,e,n=xt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function pg(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=gg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gg(t,e,n,r,i,o,s,a,l,c,u){let d=Sr+r,h=d+i,f=kD(d,h),p=typeof c=="function"?c():c;return f[H]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function kD(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:lg);return n}function LD(t,e,n,r){let o=r.get(hD,Zp)||n===St.ShadowDom,s=t.selectRootElement(e,o);return jD(s),s}function jD(t){VD(t)}var VD=()=>null;function UD(t,e,n,r){let i=Dg(e);i.push(n),t.firstCreatePass&&_g(t).push(r,i.length-1)}function BD(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return v2()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function If(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,l=vn.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(i!==null){if(!i.hasOwnProperty(o))continue;c=i[o]}t===0?Mf(r,n,c,a,l):Mf(r,n,c,a)}return r}function Mf(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function HD(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,c=null;for(let u=r;u<i;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=If(0,d.inputs,u,l,f),c=If(1,d.outputs,u,c,p);let g=l!==null&&s!==null&&!qc(e)?t_(l,u,s):null;a.push(g)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function GD(t,e,n,r){if(vp()){let i=r===null?null:{"":-1},o=YD(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&mg(t,e,n,s,i,a),i&&KD(n,r,i)}n.mergedAttrs=$c(n.mergedAttrs,n.attrs)}function mg(t,e,n,r,i,o){for(let c=0;c<r.length;c++)U2(Op(n,e),t,r[c].type);ZD(n,t.data.length,r.length);for(let c=0;c<r.length;c++){let u=r[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=dg(t,e,r.length,null);for(let c=0;c<r.length;c++){let u=r[c];n.mergedAttrs=$c(n.mergedAttrs,u.hostAttrs),QD(t,n,e,l,u),XD(l,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}HD(t,n,o)}function $D(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;qD(s)!=a&&s.push(a),s.push(n,r,o)}}function qD(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function zD(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Kc(n)&&JD(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Op(n,e),Tr(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let l=t.data[a],c=Mr(e,t,a,n);if(Tr(c,e),s!==null&&e_(e,a-i,c,l,n,s),xi(l)){let u=Or(n.index,e);u[It]=Mr(e,t,a,n)}}}function vg(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=S2();try{Un(o);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];dc(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&WD(l,c)}}finally{Un(-1),dc(s)}}function WD(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function YD(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(L1(e,s.selectors,!1))if(r||(r=[]),xi(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let l=a.length;Ec(t,e,l)}else r.unshift(s),Ec(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ec(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function KD(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new O(-301,!1);r.push(e[i],o)}}}function XD(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;xi(e)&&(n[""]=t)}}function ZD(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function QD(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Cr(i.type,!0)),s=new Ei(o,xi(i),hu);t.blueprint[r]=s,n[r]=s,$D(t,e,r,dg(t,n,i.hostVars,lg),i)}function JD(t,e,n){let r=xt(e,t),i=pg(n),o=t[Bt].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=fu(t,As(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function e_(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];cg(r,n,l,c,u,d)}}function t_(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function n_(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function yg(t,e){let n=t.contentQueries;if(n!==null){let r=J(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Qc(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function fu(t,e){return t[bi]?t[df][ft]=e:t[bi]=e,t[df]=e,e}function Sc(t,e,n){Qc(0);let r=J(null);try{e(t,n)}finally{J(r)}}function Dg(t){return t[ls]??=[]}function _g(t){return t.cleanup??=[]}function Cg(t,e){let n=t[Er],r=n?n.get($t,null):null;r&&r.handleError(e)}function wg(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=e[s],u=t.data[s];cg(u,c,r,a,l,i)}}function r_(t,e){let n=Or(e,t),r=n[H];i_(r,n);let i=n[zt];i!==null&&n[as]===null&&(n[as]=lu(i,n[Er])),pu(r,n,n[It])}function i_(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function pu(t,e,n){Jc(e);try{let r=t.viewQuery;r!==null&&Sc(1,r,n);let i=t.template;i!==null&&hg(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ht]?.finishViewCreation(t),t.staticContentQueries&&yg(t,e),t.staticViewQueries&&Sc(2,t.viewQuery,n);let o=t.components;o!==null&&o_(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[F]&=-5,eu()}}function o_(t,e){for(let n=0;n<e.length;n++)r_(t,e[n])}function s_(t,e,n,r){let i=J(null);try{let o=e.tView,a=t[F]&4096?4096:16,l=As(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[Ln]=c;let u=t[Ht];return u!==null&&(l[Ht]=u.createEmbeddedView(o)),pu(o,l,n),l}finally{J(i)}}function Tf(t,e){return!e||e.firstChild===null||qp(t)}function a_(t,e,n,r=!0){let i=e[H];if(vD(i,e,t,n),r){let s=bc(n,t),a=e[Mt],l=ig(a,t[jn]);l!==null&&gD(i,t[pt],a,e,l,s)}let o=e[as];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function ms(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Gt(o)),Wt(o)&&l_(o,r);let s=n.type;if(s&8)ms(t,e,n.child,r);else if(s&32){let a=cu(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=og(e,n);if(Array.isArray(a))r.push(...a);else{let l=Vn(e[Tt]);ms(l[H],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function l_(t,e){for(let n=Ke;n<t.length;n++){let r=t[n],i=r[H].firstChild;i!==null&&ms(r[H],r,i,e)}t[jn]!==t[zt]&&e.push(t[jn])}var bg=[];function c_(t){return t[nt]??u_(t)}function u_(t){let e=bg.pop()??Object.create(h_);return e.lView=t,e}function d_(t){t.lView[nt]!==t&&(t.lView=null,bg.push(t))}var h_=he(S({},El),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ts(t.lView)},consumerOnSignalRead(){this.lView[nt]=this}});function f_(t){let e=t[nt]??Object.create(p_);return e.lView=t,e}var p_=he(S({},El),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Vn(t.lView);for(;e&&!Eg(e[H]);)e=Vn(e);e&&pp(e)},consumerOnSignalRead(){this.lView[nt]=this}});function Eg(t){return t.type!==2}var g_=100;function Sg(t,e=!0,n=0){let r=t[Bt],i=r.rendererFactory,o=!1;o||i.begin?.();try{m_(t,n)}catch(s){throw e&&Cg(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function m_(t,e){let n=_p();try{pf(!0),Ic(t,e);let r=0;for(;Ms(t);){if(r===g_)throw new O(103,!1);r++,Ic(t,1)}}finally{pf(n)}}function v_(t,e,n,r){let i=e[F];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Bt].inlineEffectRunner?.flush(),Jc(e);let a=!0,l=null,c=null;o||(Eg(t)?(c=c_(e),l=Sl(c)):bh()===null?(a=!1,c=f_(e),l=Sl(c)):e[nt]&&(Ml(e[nt]),e[nt]=null));try{fp(e),w2(t.bindingStartIndex),n!==null&&hg(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let f=t.preOrderCheckHooks;f!==null&&Qo(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Jo(e,f,0,null),Kl(e,0)}if(s||y_(e),Ig(e,0),t.contentQueries!==null&&yg(t,e),!o)if(u){let f=t.contentCheckHooks;f!==null&&Qo(e,f)}else{let f=t.contentHooks;f!==null&&Jo(e,f,1),Kl(e,1)}RD(t,e);let d=t.components;d!==null&&Tg(e,d,0);let h=t.viewQuery;if(h!==null&&Sc(2,h,r),!o)if(u){let f=t.viewCheckHooks;f!==null&&Qo(e,f)}else{let f=t.viewHooks;f!==null&&Jo(e,f,2),Kl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Yl]){for(let f of e[Yl])f();e[Yl]=null}o||(e[F]&=-73)}catch(u){throw o||Ts(e),u}finally{c!==null&&(Eh(c,l),a&&d_(c)),eu()}}function Ig(t,e){for(let n=Wp(t);n!==null;n=Yp(n))for(let r=Ke;r<n.length;r++){let i=n[r];Mg(i,e)}}function y_(t){for(let e=Wp(t);e!==null;e=Yp(e)){if(!(e[F]&us.HasTransplantedViews))continue;let n=e[Ir];for(let r=0;r<n.length;r++){let i=n[r];pp(i)}}}function D_(t,e,n){let r=Or(e,t);Mg(r,n)}function Mg(t,e){Xc(t)&&Ic(t,e)}function Ic(t,e){let r=t[H],i=t[F],o=t[nt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Il(o)),s||=!1,o&&(o.dirty=!1),t[F]&=-9217,s)v_(r,t,r.template,t[It]);else if(i&8192){Ig(t,1);let a=r.components;a!==null&&Tg(t,a,1)}}function Tg(t,e,n){for(let r=0;r<e.length;r++)D_(t,e[r],n)}function gu(t,e){let n=_p()?64:1088;for(t[Bt].changeDetectionScheduler?.notify(e);t;){t[F]|=n;let r=Vn(t);if(lc(t)&&!r)return t;t=r}return null}var Hn=class{get rootNodes(){let e=this._lView,n=e[H];return ms(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[It]}set context(e){this._lView[It]=e}get destroyed(){return(this._lView[F]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[je];if(Wt(e)){let n=e[cs],r=n?n.indexOf(this):-1;r>-1&&(wc(e,r),os(n,r))}this._attachedToViewContainer=!1}ng(this._lView[H],this._lView)}onDestroy(e){gp(this._lView,e)}markForCheck(){gu(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[F]&=-129}reattach(){uc(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,Sg(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=lc(this._lView),n=this._lView[Ln];n!==null&&!e&&uu(n,this._lView),eg(this._lView[H],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e;let n=lc(this._lView),r=this._lView[Ln];r!==null&&!n&&tg(r,this._lView),uc(this._lView)}},Si=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=w_;let t=e;return t})(),__=Si,C_=class extends __{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=s_(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Hn(i)}};function w_(){return mu(gt(),Ve())}function mu(t,e){return t.type&4?new C_(e,t,Fr(t,e)):null}var J6=new RegExp(`^(\\d+)*(${uD}|${cD})*(.*)`);var b_=()=>null;function xf(t,e){return b_(t,e)}var xr=class{},vu=new V("",{providedIn:"root",factory:()=>!1});var xg=new V(""),Ag=new V(""),Mc=class{},vs=class{};function E_(t){let e=Error(`No component factory found for ${Ye(t)}.`);return e[S_]=t,e}var S_="ngComponent";var Tc=class{resolveComponentFactory(e){throw E_(e)}},Iu=class Iu{};Iu.NULL=new Tc;var Ar=Iu,Nr=class{};var I_=(()=>{let e=class e{};e.\u0275prov=k({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();function xc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ef(i,a);else if(o==2){let l=a,c=e[++s];r=ef(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var ys=class extends Ar{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=kn(e);return new Ii(n,this.ngModule)}};function Af(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:vn.None;e?n.push({propName:s,templateName:r,isSignal:(a&vn.SignalBased)!==0}):n.push({propName:s,templateName:r})}return n}function M_(t){let e=t.toLowerCase();return e==="svg"?l2:e==="math"?c2:null}var Ii=class extends vs{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Af(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Af(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=B1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=J(null);try{i=i||this.ngModule;let s=i instanceof rt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new hc(e,s):e,l=a.get(Nr,null);if(l===null)throw new O(407,!1);let c=a.get(I_,null),u=a.get(xr,null),d={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,changeDetectionScheduler:u},h=l.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?LD(h,r,this.componentDef.encapsulation,a):Jp(h,f,M_(f)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let m=null;p!==null&&(m=lu(p,a,!0));let v=gg(0,null,null,1,0,null,null,null,null,null,null),y=As(null,v,null,g,null,null,d,h,a,null,m);Jc(y);let D,_,b=null;try{let C=this.componentDef,A,I=null;C.findHostDirectiveDefs?(A=[],I=new Map,C.findHostDirectiveDefs(C,A,I),A.push(C)):A=[C];let R=T_(y,p);b=x_(R,p,C,A,y,d,h),_=u2(v,Sr),p&&R_(h,C,p,r),n!==void 0&&O_(_,this.ngContentSelectors,n),D=N_(b,C,A,I,y,[P_]),pu(v,y,null)}catch(C){throw b!==null&&_c(b),_c(y),C}finally{eu()}return new Ac(this.componentType,D,Fr(_,y),y,_)}finally{J(o)}}},Ac=class extends Mc{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Hn(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;wg(o[H],o,i,e,n),this.previousInputValues.set(e,n);let s=Or(this._tNode.index,o);gu(s,1)}}get injector(){return new Fn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function T_(t,e){let n=t[H],r=Sr;return t[r]=e,ug(n,r,2,"#host",null)}function x_(t,e,n,r,i,o,s){let a=i[H];A_(r,t,e,s);let l=null;e!==null&&(l=lu(e,i[Er]));let c=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=As(i,pg(n),null,u,i[t.index],t,o,c,null,null,l);return a.firstCreatePass&&Ec(a,t,r.length-1),fu(i,d),i[t.index]=d}function A_(t,e,n,r){for(let i of t)e.mergedAttrs=$c(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(xc(e,e.mergedAttrs,!0),n!==null&&ag(r,n,e))}function N_(t,e,n,r,i,o){let s=gt(),a=i[H],l=xt(s,i);mg(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Mr(i,a,d,s);Tr(h,i)}vg(a,i,s),l&&Tr(l,i);let c=Mr(i,a,s.directiveStart+s.componentOffset,s);if(t[It]=i[It]=c,o!==null)for(let u of o)u(c,e);return fg(a,s,i),c}function R_(t,e,n,r){if(r)rc(t,n,["ng-version","18.2.3"]);else{let{attrs:i,classes:o}=H1(e.selectors[0]);i&&rc(t,n,i),o&&o.length>0&&sg(t,n,o.join(" "))}}function O_(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function P_(){let t=gt();Tp(Ve()[H],t)}var Lr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=F_;let t=e;return t})();function F_(){let t=gt();return Rg(t,Ve())}var k_=Lr,Ng=class extends k_{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Fr(this._hostTNode,this._hostLView)}get injector(){return new Fn(this._hostTNode,this._hostLView)}get parentInjector(){let e=tu(this._hostTNode,this._hostLView);if(Ap(e)){let n=hs(e,this._hostLView),r=ds(e),i=n[H].data[r+8];return new Fn(i,n)}else return new Fn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Nf(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ke}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=xf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Tf(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!i2(e),a;if(s)a=n;else{let p=n||{};a=p.index,r=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?e:new Ii(kn(e)),c=r||this.parentInjector;if(!o&&l.ngModule==null){let g=(s?c:this.parentInjector).get(rt,null);g&&(o=g)}let u=kn(l.componentType??{}),d=xf(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,i,h,o);return this.insertImpl(f.hostView,a,Tf(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(h2(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[je],c=new Ng(l,l[pt],l[je]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return a_(s,i,o,r),e.attachToViewContainerRef(),qf(ec(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Nf(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=wc(this._lContainer,n);r&&(os(ec(this._lContainer),n),ng(r[H],r))}detach(e){let n=this._adjustIndex(e,-1),r=wc(this._lContainer,n);return r&&os(ec(this._lContainer),n)!=null?new Hn(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Nf(t){return t[cs]}function ec(t){return t[cs]||(t[cs]=[])}function Rg(t,e){let n,r=e[t.index];return Wt(r)?n=r:(n=n_(r,e,null,t),e[t.index]=n,fu(e,n)),j_(n,e,t,r),new Ng(n,t,e)}function L_(t,e){let n=t[Mt],r=n.createComment(""),i=xt(e,t),o=ig(n,i);return gs(n,o,r,wD(n,i),!1),r}var j_=V_;function V_(t,e,n,r){if(t[jn])return;let i;n.type&8?i=Gt(r):i=L_(e,n),t[jn]=i}var Nc=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Rc=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)yu(e,n).matches!==null&&this.queries[n].setDirty()}},Oc=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=W_(e):this.predicate=e}},Pc=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Fc=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,U_(n,o)),this.matchTNodeWithReadOption(e,n,es(n,e,o,!1,!1))}else r===Si?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,es(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Gn||i===Lr||i===Si&&n.type&4)this.addMatch(n.index,-2);else{let o=es(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function U_(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function B_(t,e){return t.type&11?Fr(t,e):t.type&4?mu(t,e):null}function H_(t,e,n,r){return n===-1?B_(e,t):n===-2?G_(t,e,r):Mr(t,t[H],n,e)}function G_(t,e,n){if(n===Gn)return Fr(e,t);if(n===Si)return mu(e,t);if(n===Lr)return Rg(e,t)}function Og(t,e,n,r){let i=e[Ht].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(H_(e,u,s[l+1],n.metadata.read))}}i.matches=a}return i.matches}function kc(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=Og(t,e,i,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)r.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=Ke;d<u.length;d++){let h=u[d];h[Ln]===h[je]&&kc(h[H],h,c,r)}if(u[Ir]!==null){let d=u[Ir];for(let h=0;h<d.length;h++){let f=d[h];kc(f[H],f,c,r)}}}}}return r}function $_(t,e){return t[Ht].queries[e].queryList}function q_(t,e,n){let r=new Dc((n&4)===4);return UD(t,e,r,r.destroy),(e[Ht]??=new Rc).queries.push(new Nc(r))-1}function z_(t,e,n){let r=Ai();return r.firstCreatePass&&(Y_(r,new Oc(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),q_(r,Ve(),e)}function W_(t){return t.split(",").map(e=>e.trim())}function Y_(t,e,n){t.queries===null&&(t.queries=new Pc),t.queries.track(new Fc(e,n))}function yu(t,e){return t.queries.getByIndex(e)}function K_(t,e){let n=t[H],r=yu(n,e);return r.crossesNgTemplate?kc(n,t,e,[]):Og(n,t,r,e)}var Rf=new Set;function Du(t){Rf.has(t)||(Rf.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var yn=class{},Mi=class{};var Lc=class extends yn{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ys(this);let o=Jf(e);this._bootstrapComponents=Qp(o.bootstrap),this._r3Injector=Up(e,n,[{provide:yn,useValue:this},{provide:Ar,useValue:this.componentFactoryResolver},...r],Ye(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},jc=class extends Mi{constructor(e){super(),this.moduleType=e}create(e){return new Lc(this.moduleType,e,[])}};var Ds=class extends yn{constructor(e){super(),this.componentFactoryResolver=new ys(this),this.instance=null;let n=new wi([...e.providers,{provide:yn,useValue:this},{provide:Ar,useValue:this.componentFactoryResolver}],e.parent||Yc(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _u(t,e,n=null){return new Ds({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function X_(t){return(t.flags&32)===32}var yi=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(yi||{}),Z_=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=k({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})(),On=class On{constructor(){this.ngZone=E(we),this.scheduler=E(xr),this.errorHandler=E($t,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of On.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};On.PHASES=[yi.EarlyRead,yi.Write,yi.MixedReadWrite,yi.Read],On.\u0275prov=k({token:On,providedIn:"root",factory:()=>new On});var Of=On;function Pf(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";wg(t,n,o[s],s,r)}function Q_(t,e,n,r,i,o){let s=e.consts,a=ff(s,i),l=ug(e,t,2,r,a);return GD(e,n,l,ff(s,o)),l.attrs!==null&&xc(l,l.attrs,!1),l.mergedAttrs!==null&&xc(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function qn(t,e,n,r){let i=Ve(),o=Ai(),s=Sr+t,a=i[Mt],l=o.firstCreatePass?Q_(s,o,i,e,n,r):o.data[s],c=J_(o,i,l,a,e,t);i[s]=c;let u=lp(l);return Zc(l,!0),ag(a,c,l),!X_(l)&&x2()&&ID(o,i,c,l),p2()===0&&Tr(c,i),g2(),u&&(PD(o,i,l),fg(o,l,i)),r!==null&&FD(i,l),qn}function zn(){let t=gt();Dp()?C2():(t=t.parent,Zc(t,!1));let e=t;y2(e)&&D2(),m2();let n=Ai();return n.firstCreatePass&&(Tp(n,t),ap(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&P2(e)&&Pf(n,e,Ve(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&F2(e)&&Pf(n,e,Ve(),e.stylesWithoutHost,!1),zn}function Wn(t,e,n,r){return qn(t,e,n,r),zn(),Wn}var J_=(t,e,n,r,i,o)=>(A2(!0),Jp(r,i,T2()));function Pg(){return Ve()}var _s="en-US";var eC=_s;function tC(t){typeof t=="string"&&(eC=t.toLowerCase().replace(/_/g,"-"))}var nC=(t,e,n)=>{};function Yn(t,e,n,r){let i=Ve(),o=Ai(),s=gt();return iC(o,i,i[Mt],s,t,e,r),Yn}function rC(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[ls],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function iC(t,e,n,r,i,o,s){let a=lp(r),c=t.firstCreatePass&&_g(t),u=e[It],d=Dg(e),h=!0;if(r.type&3||s){let g=xt(r,e),m=s?s(g):g,v=d.length,y=s?_=>s(Gt(_[r.index])):r.index,D=null;if(!s&&a&&(D=rC(t,e,i,r.index)),D!==null){let _=D.__ngLastListenerFn__||D;_.__ngNextListenerFn__=o,D.__ngLastListenerFn__=o,h=!1}else{o=kf(r,e,u,o),nC(g,i,o);let _=n.listen(m,i,o);d.push(o,_),c&&c.push(i,y,v,v+1)}}else o=kf(r,e,u,o);let f=r.outputs,p;if(h&&f!==null&&(p=f[i])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let v=p[m],y=p[m+1],b=e[v][y].subscribe(o),C=d.length;d.push(o,b),c&&c.push(i,r.index,C,-(C+1))}}}function Ff(t,e,n,r){let i=J(null);try{return bt(6,e,n),n(r)!==!1}catch(o){return Cg(t,o),!1}finally{bt(7,e,n),J(i)}}function kf(t,e,n,r){return function i(o){if(o===Function)return r;let s=t.componentOffset>-1?Or(t.index,e):e;gu(s,5);let a=Ff(e,n,r,o),l=i.__ngNextListenerFn__;for(;l;)a=Ff(e,n,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function Fg(t,e,n){z_(t,e,n)}function Cu(t){let e=Ve(),n=Ai(),r=Cp();Qc(r+1);let i=yu(n,r);if(t.dirty&&d2(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=K_(e,r);t.reset(o,nD),t.notifyOnChanges()}return!0}return!1}function wu(){return $_(Ve(),Cp())}var oC=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=np(!1,r.type),o=i.length>0?_u([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=k({token:e,providedIn:"environment",factory:()=>new e(W(rt))});let t=e;return t})();function jr(t){Du("NgStandalone"),t.getStandaloneInjector=e=>e.get(oC).getOrCreateStandaloneInjector(t)}var Ns=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var kg=new V("");function Oi(t){return!!t&&typeof t.then=="function"}function Lg(t){return!!t&&typeof t.subscribe=="function"}var jg=new V(""),Vg=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=E(jg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Oi(s))r.push(s);else if(Lg(s)){let a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bu=new V("");function sC(){Sh(()=>{throw new O(600,!1)})}function aC(t){return t.isBoundToModule}var lC=10;function cC(t,e,n){try{let r=n();return Oi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Kn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=E(eD),this.afterRenderManager=E(Z_),this.zonelessEnabled=E(vu),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Be,this.afterTick=new Be,this.componentTypes=[],this.components=[],this.isStable=E(Pr).hasPendingTasks.pipe(X(r=>!r)),this._injector=E(rt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof vs;if(!this._injector.get(Vg).done){let f=!o&&Qf(r),p=!1;throw new O(405,p)}let a;o?a=r:a=this._injector.get(Ar).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let l=aC(a)?void 0:this._injector.get(yn),c=i||a.selector,u=a.create(Bn.NULL,[],c,l),d=u.location.nativeElement,h=u.injector.get(kg,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),ts(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new O(101,!1);let r=J(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,J(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Nr,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<lC;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:o,notifyErrorHandler:s}of this._views)uC(o,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Ms(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;ts(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(bu,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>ts(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new O(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ts(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function uC(t,e,n,r){if(!n&&!Ms(t))return;Sg(t,e,n&&!r?0:1)}var Vc=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Eu=(()=>{let e=class e{compileModuleSync(r){return new jc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=Jf(r),s=Qp(o.declarations).reduce((a,l)=>{let c=kn(l);return c&&a.push(new Ii(c)),a},[]);return new Vc(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var dC=(()=>{let e=class e{constructor(){this.zone=E(we),this.changeDetectionScheduler=E(xr),this.applicationRef=E(Kn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hC=new V("",{factory:()=>!1});function Ug({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new we(he(S({},Hg()),{scheduleInRootZone:n})),[{provide:we,useFactory:t},{provide:br,multi:!0,useFactory:()=>{let r=E(dC,{optional:!0});return()=>r.initialize()}},{provide:br,multi:!0,useFactory:()=>{let r=E(fC);return()=>{r.initialize()}}},e===!0?{provide:xg,useValue:!0}:[],{provide:Ag,useValue:n??Bp}]}function Bg(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Ug({ngZoneFactory:()=>{let i=Hg(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Du("NgZone_CoalesceEvent"),new we(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return bs([{provide:hC,useValue:!0},{provide:vu,useValue:!1},r])}function Hg(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var fC=(()=>{let e=class e{constructor(){this.subscription=new Ce,this.initialized=!1,this.zone=E(we),this.pendingTasks=E(Pr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pC=(()=>{let e=class e{constructor(){this.appRef=E(Kn),this.taskService=E(Pr),this.ngZone=E(we),this.zonelessEnabled=E(vu),this.disableScheduling=E(xg,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ce,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ps):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(E(Ag,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof yc||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?_f:Gp;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ps+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_f(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gC(){return typeof $localize<"u"&&$localize.locale||_s}var Su=new V("",{providedIn:"root",factory:()=>E(Su,B.Optional|B.SkipSelf)||gC()});var Gg=new V("");function Xo(t){return!!t.platformInjector}function mC(t){let e=Xo(t)?t.r3Injector:t.moduleRef.injector,n=e.get(we);return n.run(()=>{Xo(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get($t,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),Xo(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Gg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else t.moduleRef.onDestroy(()=>{ts(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return cC(r,n,()=>{let o=e.get(Vg);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Su,_s);if(tC(s||_s),Xo(t)){let a=e.get(Kn);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return vC(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function vC(t,e){let n=t.injector.get(Kn);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new O(-403,!1);e.push(t)}var ns=null;function yC(t=[],e){return Bn.create({name:e,providers:[{provide:Es,useValue:"platform"},{provide:Gg,useValue:new Set([()=>ns=null])},...t]})}function DC(t=[]){if(ns)return ns;let e=yC(t);return ns=e,sC(),_C(e),e}function _C(t){t.get(su,null)?.forEach(n=>n())}var Pi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=CC;let t=e;return t})();function CC(t){return wC(gt(),Ve(),(t&16)===16)}function wC(t,e,n){if(Kc(t)&&!n){let r=Or(t.index,e);return new Hn(r,r)}else if(t.type&175){let r=e[Tt];return new Hn(r,e)}return null}function $g(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=DC(r),o=[Ug({}),{provide:xr,useExisting:pC},...n||[]],s=new Ds({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return mC({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}var qg=new V("");var Qg=null;function Vr(){return Qg}function Jg(t){Qg??=t}var Rs=class{};var Xe=new V(""),em=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>E(MC),providedIn:"platform"});let t=e;return t})();var MC=(()=>{let e=class e extends em{constructor(){super(),this._doc=E(Xe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vr().getBaseHref(this._doc)}onPopState(r){let i=Vr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Vr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function tm(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function zg(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Xn(t){return t&&t[0]!=="?"?"?"+t:t}var Ps=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>E(nm),providedIn:"root"});let t=e;return t})(),TC=new V(""),nm=(()=>{let e=class e extends Ps{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??E(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return tm(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Xn(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Xn(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Xn(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(W(em),W(TC,8))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ki=(()=>{let e=class e{constructor(r){this._subject=new Le,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=NC(zg(Wg(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Xn(i))}normalize(r){return e.stripTrailingSlash(AC(this._basePath,Wg(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xn(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Xn(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Xn,e.joinWithSlash=tm,e.stripTrailingSlash=zg,e.\u0275fac=function(i){return new(i||e)(W(Ps))},e.\u0275prov=k({token:e,factory:()=>xC(),providedIn:"root"});let t=e;return t})();function xC(){return new ki(W(Ps))}function AC(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Wg(t){return t.replace(/\/index.html$/,"")}function NC(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function rm(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var im="browser",RC="server";function Mu(t){return t===RC}var Os=class{};var Au=class extends Rs{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Nu=class t extends Au{static makeCurrent(){Jg(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=PC();return n==null?null:FC(n)}resetBaseElement(){Li=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return rm(document.cookie,e)}},Li=null;function PC(){return Li=Li||document.querySelector("base"),Li?Li.getAttribute("href"):null}function FC(t){return new URL(t,document.baseURI).pathname}var kC=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),Fs=new V(""),lm=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new O(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(W(Fs),W(we))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),ji=class{constructor(e){this._doc=e}},Tu="ng-app-id",cm=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mu(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Tu}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(Tu),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Tu,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(W(Xe),W(ou),W(au,8),W(kr))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),xu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ou=/%COMP%/g,um="%COMP%",LC=`_nghost-${um}`,jC=`_ngcontent-${um}`,VC=!0,UC=new V("",{providedIn:"root",factory:()=>VC});function BC(t){return jC.replace(Ou,t)}function HC(t){return LC.replace(Ou,t)}function dm(t,e){return e.map(n=>n.replace(Ou,t))}var om=(()=>{let e=class e{constructor(r,i,o,s,a,l,c,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Mu(l),this.defaultRenderer=new Vi(r,a,c,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===St.ShadowDom&&(i=he(S({},i),{encapsulation:St.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof ks?o.applyToHost(r):o instanceof Ui&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case St.Emulated:s=new ks(c,u,i,this.appId,d,a,l,h);break;case St.ShadowDom:return new Ru(c,u,r,i,a,l,this.nonce,h);default:s=new Ui(c,u,i,d,a,l,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(W(lm),W(cm),W(ou),W(UC),W(Xe),W(kr),W(we),W(au))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),Vi=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(xu[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(sm(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(sm(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new O(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=xu[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=xu[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&($n.DashCase|$n.Important)?e.style.setProperty(n,r,i&$n.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&$n.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Vr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function sm(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ru=class extends Vi{constructor(e,n,r,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=dm(i.id,i.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ui=class extends Vi{constructor(e,n,r,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?dm(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ks=class extends Ui{constructor(e,n,r,i,o,s,a,l){let c=i+"-"+r.id;super(e,n,r,o,s,a,l,c),this.contentAttr=BC(c),this.hostAttr=HC(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},GC=(()=>{let e=class e extends ji{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(W(Xe))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),$C=(()=>{let e=class e extends ji{constructor(r){super(r),this.delegate=E(qg,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,o){return this.delegate.addEventListener(r,i,o)}removeEventListener(r,i,o){return this.delegate.removeEventListener(r,i,o)}};e.\u0275fac=function(i){return new(i||e)(W(Xe))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})(),am=["alt","control","meta","shift"],qC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zC={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},WC=(()=>{let e=class e extends ji{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vr().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),a="code."),am.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(r,i){let o=qC[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),am.forEach(a=>{if(a!==o){let l=zC[a];l(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(W(Xe))},e.\u0275prov=k({token:e,factory:e.\u0275fac});let t=e;return t})();function hm(t,e){return $g(S({rootComponent:t},YC(e)))}function YC(t){return{appProviders:[...JC,...t?.providers??[]],platformProviders:QC}}function KC(){Nu.makeCurrent()}function XC(){return new $t}function ZC(){return Xp(document),document}var QC=[{provide:kr,useValue:im},{provide:su,useValue:KC,multi:!0},{provide:Xe,useFactory:ZC,deps:[]}];var JC=[{provide:Es,useValue:"root"},{provide:$t,useFactory:XC,deps:[]},{provide:Fs,useClass:GC,multi:!0,deps:[Xe,we,kr]},{provide:Fs,useClass:WC,multi:!0,deps:[Xe]},{provide:Fs,useClass:$C,multi:!0},om,cm,lm,{provide:Nr,useExisting:om},{provide:Os,useClass:kC,deps:[]},[]];var fm=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(W(Xe))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var U="primary",ro=Symbol("RouteTitle"),ju=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function qr(t){return new ju(t)}function tw(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function nw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!At(t[n],e[n]))return!1;return!0}function At(t,e){let n=t?Vu(t):void 0,r=e?Vu(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Cm(t[i],e[i]))return!1;return!0}function Vu(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Cm(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function wm(t){return t.length>0?t[t.length-1]:null}function Dn(t){return Ul(t)?t:Oi(t)?Ee(Promise.resolve(t)):j(t)}var rw={exact:Em,subset:Sm},bm={exact:iw,subset:ow,ignored:()=>!0};function pm(t,e,n){return rw[n.paths](t.root,e.root,n.matrixParams)&&bm[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function iw(t,e){return At(t,e)}function Em(t,e,n){if(!Qn(t.segments,e.segments)||!Vs(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Em(t.children[r],e.children[r],n))return!1;return!0}function ow(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Cm(t[n],e[n]))}function Sm(t,e,n){return Im(t,e,e.segments,n)}function Im(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Qn(i,n)||e.hasChildren()||!Vs(i,n,r))}else if(t.segments.length===n.length){if(!Qn(t.segments,n)||!Vs(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!Sm(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Qn(t.segments,i)||!Vs(t.segments,i,r)||!t.children[U]?!1:Im(t.children[U],e,o,r)}}function Vs(t,e,n){return e.every((r,i)=>bm[n](t[i].parameters,r.parameters))}var Kt=class{constructor(e=new ne([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=qr(this.queryParams),this._queryParamMap}toString(){return lw.serialize(this)}},ne=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Us(this)}},Zn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=qr(this.parameters),this._parameterMap}toString(){return Tm(this)}};function sw(t,e){return Qn(t,e)&&t.every((n,r)=>At(n.parameters,e[r].parameters))}function Qn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function aw(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===U&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==U&&(n=n.concat(e(i,r)))}),n}var dd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>new Wi,providedIn:"root"});let t=e;return t})(),Wi=class{parse(e){let n=new Bu(e);return new Kt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Bi(e.root,!0)}`,r=dw(e.queryParams),i=typeof e.fragment=="string"?`#${cw(e.fragment)}`:"";return`${n}${r}${i}`}},lw=new Wi;function Us(t){return t.segments.map(e=>Tm(e)).join("/")}function Bi(t,e){if(!t.hasChildren())return Us(t);if(e){let n=t.children[U]?Bi(t.children[U],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==U&&r.push(`${i}:${Bi(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=aw(t,(r,i)=>i===U?[Bi(t.children[U],!1)]:[`${i}:${Bi(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[U]!=null?`${Us(t)}/${n[0]}`:`${Us(t)}/(${n.join("//")})`}}function Mm(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ls(t){return Mm(t).replace(/%3B/gi,";")}function cw(t){return encodeURI(t)}function Uu(t){return Mm(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Bs(t){return decodeURIComponent(t)}function gm(t){return Bs(t.replace(/\+/g,"%20"))}function Tm(t){return`${Uu(t.path)}${uw(t.parameters)}`}function uw(t){return Object.entries(t).map(([e,n])=>`;${Uu(e)}=${Uu(n)}`).join("")}function dw(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ls(n)}=${Ls(i)}`).join("&"):`${Ls(n)}=${Ls(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var hw=/^[^\/()?;#]+/;function Pu(t){let e=t.match(hw);return e?e[0]:""}var fw=/^[^\/()?;=#]+/;function pw(t){let e=t.match(fw);return e?e[0]:""}var gw=/^[^=?&#]+/;function mw(t){let e=t.match(gw);return e?e[0]:""}var vw=/^[^&#]+/;function yw(t){let e=t.match(vw);return e?e[0]:""}var Bu=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[U]=new ne(e,n)),r}parseSegment(){let e=Pu(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(e),new Zn(Bs(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=pw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Pu(this.remaining);i&&(r=i,this.capture(r))}e[Bs(n)]=Bs(r)}parseQueryParam(e){let n=mw(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=yw(this.remaining);s&&(r=s,this.capture(r))}let i=gm(n),o=gm(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Pu(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new O(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=U);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[U]:new ne([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new O(4011,!1)}};function xm(t){return t.segments.length>0?new ne([],{[U]:t}):t}function Am(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=Am(i);if(r===U&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ne(t.segments,e);return Dw(n)}function Dw(t){if(t.numberOfChildren===1&&t.children[U]){let e=t.children[U];return new ne(t.segments.concat(e.segments),e.children)}return t}function Yi(t){return t instanceof Kt}function _w(t,e,n=null,r=null){let i=Nm(t);return Rm(i,e,n,r)}function Nm(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new ne(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=xm(r);return e??i}function Rm(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Fu(i,i,i,n,r);let o=Cw(e);if(o.toRoot())return Fu(i,i,new ne([],{}),n,r);let s=ww(o,i,t),a=s.processChildren?$i(s.segmentGroup,s.index,o.commands):Pm(s.segmentGroup,s.index,o.commands);return Fu(i,s.segmentGroup,a,n,r)}function Hs(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ki(t){return typeof t=="object"&&t!=null&&t.outlets}function Fu(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=Om(t,e,n);let a=xm(Am(s));return new Kt(a,o,i)}function Om(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Om(o,e,n)}),new ne(t.segments,r)}var Gs=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Hs(r[0]))throw new O(4003,!1);let i=r.find(Ki);if(i&&i!==wm(r))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Cw(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Gs(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Gs(n,e,r)}var Hr=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function ww(t,e,n){if(t.isAbsolute)return new Hr(e,!0,0);if(!n)return new Hr(e,!1,NaN);if(n.parent===null)return new Hr(n,!0,0);let r=Hs(t.commands[0])?0:1,i=n.segments.length-1+r;return bw(n,i,t.numberOfDoubleDots)}function bw(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new O(4005,!1);i=r.segments.length}return new Hr(r,!1,i-o)}function Ew(t){return Ki(t[0])?t[0].outlets:{[U]:t}}function Pm(t,e,n){if(t??=new ne([],{}),t.segments.length===0&&t.hasChildren())return $i(t,e,n);let r=Sw(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ne(t.segments.slice(0,r.pathIndex),{});return o.children[U]=new ne(t.segments.slice(r.pathIndex),t.children),$i(o,0,i)}else return r.match&&i.length===0?new ne(t.segments,{}):r.match&&!t.hasChildren()?Hu(t,e,n):r.match?$i(t,0,i):Hu(t,e,n)}function $i(t,e,n){if(n.length===0)return new ne(t.segments,{});{let r=Ew(n),i={};if(Object.keys(r).some(o=>o!==U)&&t.children[U]&&t.numberOfChildren===1&&t.children[U].segments.length===0){let o=$i(t.children[U],e,n);return new ne(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Pm(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ne(t.segments,i)}}function Sw(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ki(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!vm(l,c,s))return o;r+=2}else{if(!vm(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hu(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ki(o)){let l=Iw(o.outlets);return new ne(r,l)}if(i===0&&Hs(n[0])){let l=t.segments[e];r.push(new Zn(l.path,mm(n[0]))),i++;continue}let s=Ki(o)?o.outlets[U]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Hs(a)?(r.push(new Zn(s,mm(a))),i+=2):(r.push(new Zn(s,{})),i++)}return new ne(r,{})}function Iw(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Hu(new ne([],{}),0,r))}),e}function mm(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function vm(t,e,n){return t==n.path&&At(e,n.parameters)}var qi="imperative",Re=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Re||{}),it=class{constructor(e,n){this.id=e,this.url=n}},Xi=class extends it{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Re.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jn=class extends it{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Re.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qe=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Qe||{}),Gu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Gu||{}),Yt=class extends it{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Re.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},er=class extends it{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Re.NavigationSkipped}},Zi=class extends it{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Re.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$s=class extends it{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Re.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$u=class extends it{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Re.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qu=class extends it{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Re.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zu=class extends it{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Re.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wu=class extends it{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Re.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yu=class{constructor(e){this.route=e,this.type=Re.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ku=class{constructor(e){this.route=e,this.type=Re.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xu=class{constructor(e){this.snapshot=e,this.type=Re.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zu=class{constructor(e){this.snapshot=e,this.type=Re.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qu=class{constructor(e){this.snapshot=e,this.type=Re.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ju=class{constructor(e){this.snapshot=e,this.type=Re.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Qi=class{},zr=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Mw(t,e){return t.providers&&!t._injector&&(t._injector=_u(t.providers,e,`Route: ${t.path}`)),t._injector??e}function mt(t){return t.outlet||U}function Tw(t,e){let n=t.filter(r=>mt(r)===e);return n.push(...t.filter(r=>mt(r)!==e)),n}function io(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ed=class{get injector(){return io(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Zs(this.rootInjector),this.attachRef=null}},Zs=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new ed(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(W(rt))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qs=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=td(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=td(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=nd(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return nd(e,this._root).map(n=>n.value)}};function td(t,e){if(t===e.value)return e;for(let n of e.children){let r=td(t,n);if(r)return r}return null}function nd(t,e){if(t===e.value)return[e];for(let n of e.children){let r=nd(t,n);if(r.length)return r.unshift(e),r}return[]}var Ze=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Br(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var zs=class extends qs{constructor(e,n){super(e),this.snapshot=n,hd(this,e)}toString(){return this.snapshot.toString()}};function Fm(t){let e=xw(t),n=new Ae([new Zn("",{})]),r=new Ae({}),i=new Ae({}),o=new Ae({}),s=new Ae(""),a=new Wr(n,r,o,s,i,U,t,e.root);return a.snapshot=e.root,new zs(new Ze(a,[]),e)}function xw(t){let e={},n={},r={},i="",o=new Gr([],e,r,i,n,U,t,null,{});return new Ys("",new Ze(o,[]))}var Wr=class{constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(X(c=>c[ro]))??j(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>qr(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>qr(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ws(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:S(S({},e.params),t.params),data:S(S({},e.data),t.data),resolve:S(S(S(S({},t.data),e.data),i?.data),t._resolvedData)}:r={params:S({},t.params),data:S({},t.data),resolve:S(S({},t.data),t._resolvedData??{})},i&&Lm(i)&&(r.resolve[ro]=i.title),r}var Gr=class{get title(){return this.data?.[ro]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qr(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ys=class extends qs{constructor(e,n){super(n),this.url=e,hd(this,n)}toString(){return km(this._root)}};function hd(t,e){e.value._routerState=t,e.children.forEach(n=>hd(t,n))}function km(t){let e=t.children.length>0?` { ${t.children.map(km).join(", ")} } `:"";return`${t.value}${e}`}function ku(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,At(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),At(e.params,n.params)||t.paramsSubject.next(n.params),nw(e.url,n.url)||t.urlSubject.next(n.url),At(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function rd(t,e){let n=At(t.params,e.params)&&sw(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||rd(t.parent,e.parent))}function Lm(t){return typeof t.title=="string"||t.title===null}var Aw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=U,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.parentContexts=E(Zs),this.location=E(Lr),this.changeDetector=E(Pi),this.inputBinder=E(fd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new id(r,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=zc({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Is]});let t=e;return t})(),id=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Wr?this.route:e===Zs?this.childContexts:this.parent.get(e,n)}},fd=new V("");function Nw(t,e,n){let r=Ji(t,e._root,n?n._root:void 0);return new zs(r,e)}function Ji(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Rw(t,e,n);return new Ze(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ji(t,a)),s}}let r=Ow(e.value),i=e.children.map(o=>Ji(t,o));return new Ze(r,i)}}function Rw(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ji(t,r,i);return Ji(t,r)})}function Ow(t){return new Wr(new Ae(t.url),new Ae(t.params),new Ae(t.queryParams),new Ae(t.fragment),new Ae(t.data),t.outlet,t.component,t)}var eo=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},jm="ngNavigationCancelingError";function Ks(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Yi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Vm(!1,Qe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Vm(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[jm]=!0,n.cancellationCode=e,n}function Pw(t){return Um(t)&&Yi(t.url)}function Um(t){return!!t&&t[jm]}var Fw=(t,e,n,r)=>X(i=>(new od(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),od=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),ku(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Br(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Br(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Br(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Br(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Ju(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Zu(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(ku(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),ku(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Xs=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$r=class{constructor(e,n){this.component=e,this.route=n}};function kw(t,e,n){let r=t._root,i=e?e._root:null;return Hi(r,i,n,[r.value])}function Lw(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Kr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Vf(t)?t:e.get(t):r}function Hi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Br(e);return t.children.forEach(s=>{jw(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zi(a,n.getContext(s),i)),i}function jw(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Vw(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Xs(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Hi(t,e,a?a.children:null,r,i):Hi(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new $r(a.outlet.component,s))}else s&&zi(e,a,i),i.canActivateChecks.push(new Xs(r)),o.component?Hi(t,null,a?a.children:null,r,i):Hi(t,null,n,r,i);return i}function Vw(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Qn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qn(t.url,e.url)||!At(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rd(t,e)||!At(t.queryParams,e.queryParams);case"paramsChange":default:return!rd(t,e)}}function zi(t,e,n){let r=Br(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zi(s,e.children.getContext(o),n):zi(s,null,n):zi(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new $r(e.outlet.component,i)):n.canDeactivateChecks.push(new $r(null,i)):n.canDeactivateChecks.push(new $r(null,i))}function oo(t){return typeof t=="function"}function Uw(t){return typeof t=="boolean"}function Bw(t){return t&&oo(t.canLoad)}function Hw(t){return t&&oo(t.canActivate)}function Gw(t){return t&&oo(t.canActivateChild)}function $w(t){return t&&oo(t.canDeactivate)}function qw(t){return t&&oo(t.canMatch)}function Bm(t){return t instanceof Vt||t?.name==="EmptyError"}var js=Symbol("INITIAL_VALUE");function Yr(){return dt(t=>Wo(t.map(e=>e.pipe(Ut(1),ql(js)))).pipe(X(e=>{for(let n of e)if(n!==!0){if(n===js)return js;if(n===!1||zw(n))return n}return!0}),ut(e=>e!==js),Ut(1)))}function zw(t){return Yi(t)||t instanceof eo}function Ww(t,e){return Se(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?j(he(S({},n),{guardsResult:!0})):Yw(s,r,i,t).pipe(Se(a=>a&&Uw(a)?Kw(r,o,t,e):j(a)),X(a=>he(S({},n),{guardsResult:a})))})}function Yw(t,e,n,r){return Ee(t).pipe(Se(i=>eb(i.component,i.route,n,e,r)),wt(i=>i!==!0,!0))}function Kw(t,e,n,r){return Ee(e).pipe(pr(i=>fr(Zw(i.route.parent,r),Xw(i.route,r),Jw(t,i.path,n),Qw(t,i.route,n))),wt(i=>i!==!0,!0))}function Xw(t,e){return t!==null&&e&&e(new Qu(t)),j(!0)}function Zw(t,e){return t!==null&&e&&e(new Xu(t)),j(!0)}function Qw(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return j(!0);let i=r.map(o=>Yo(()=>{let s=io(e)??n,a=Kr(o,s),l=Hw(a)?a.canActivate(e,t):qt(s,()=>a(e,t));return Dn(l).pipe(wt())}));return j(i).pipe(Yr())}function Jw(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Lw(s)).filter(s=>s!==null).map(s=>Yo(()=>{let a=s.guards.map(l=>{let c=io(s.node)??n,u=Kr(l,c),d=Gw(u)?u.canActivateChild(r,t):qt(c,()=>u(r,t));return Dn(d).pipe(wt())});return j(a).pipe(Yr())}));return j(o).pipe(Yr())}function eb(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return j(!0);let s=o.map(a=>{let l=io(e)??i,c=Kr(a,l),u=$w(c)?c.canDeactivate(t,e,n,r):qt(l,()=>c(t,e,n,r));return Dn(u).pipe(wt())});return j(s).pipe(Yr())}function tb(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return j(!0);let o=i.map(s=>{let a=Kr(s,t),l=Bw(a)?a.canLoad(e,n):qt(t,()=>a(e,n));return Dn(l)});return j(o).pipe(Yr(),Hm(r))}function Hm(t){return kl(Ne(e=>{if(typeof e!="boolean")throw Ks(t,e)}),X(e=>e===!0))}function nb(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return j(!0);let o=i.map(s=>{let a=Kr(s,t),l=qw(a)?a.canMatch(e,n):qt(t,()=>a(e,n));return Dn(l)});return j(o).pipe(Yr(),Hm(r))}var to=class{constructor(e){this.segmentGroup=e||null}},no=class extends Error{constructor(e){super(),this.urlTree=e}};function Ur(t){return hr(new to(t))}function rb(t){return hr(new O(4e3,!1))}function ib(t){return hr(Vm(!1,Qe.GuardRejected))}var sd=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return j(r);if(i.numberOfChildren>1||!i.children[U])return rb(`${e.redirectTo}`);i=i.children[U]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:g}=i,m=qt(o,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:g}));if(m instanceof Kt)throw new no(m);n=m}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new no(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Kt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new ne(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new O(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},ad={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ob(t,e,n,r,i){let o=Gm(t,e,n);return o.matched?(r=Mw(e,r),nb(r,e,n,i).pipe(X(s=>s===!0?o:S({},ad)))):j(o)}function Gm(t,e,n){if(e.path==="**")return sb(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?S({},ad):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||tw)(n,t,e);if(!i)return S({},ad);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?S(S({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function sb(t){return{matched:!0,parameters:t.length>0?wm(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ym(t,e,n,r){return n.length>0&&cb(t,n,r)?{segmentGroup:new ne(e,lb(r,new ne(n,t.children))),slicedSegments:[]}:n.length===0&&ub(t,n,r)?{segmentGroup:new ne(t.segments,ab(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ne(t.segments,t.children),slicedSegments:n}}function ab(t,e,n,r){let i={};for(let o of n)if(Qs(t,e,o)&&!r[mt(o)]){let s=new ne([],{});i[mt(o)]=s}return S(S({},r),i)}function lb(t,e){let n={};n[U]=e;for(let r of t)if(r.path===""&&mt(r)!==U){let i=new ne([],{});n[mt(r)]=i}return n}function cb(t,e,n){return n.some(r=>Qs(t,e,r)&&mt(r)!==U)}function ub(t,e,n){return n.some(r=>Qs(t,e,r))}function Qs(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function db(t,e,n){return e.length===0&&!t.children[n]}var ld=class{};function hb(t,e,n,r,i,o,s="emptyOnly"){return new cd(t,e,n,r,i,s,o).recognize()}var fb=31,cd=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new O(4002,`'${e.segmentGroup}'`)}recognize(){let e=ym(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:n,rootSnapshot:r})=>{let i=new Ze(r,n),o=new Ys("",i),s=_w(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Gr([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,U,n).pipe(X(r=>({children:r,rootSnapshot:n})),fn(r=>{if(r instanceof no)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof to?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(X(s=>s instanceof Ze?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(pr(s=>{let a=r.children[s],l=Tw(n,s);return this.processSegmentGroup(e,l,a,s,i)}),$l((s,a)=>(s.push(...a),s)),pn(null),Gl(),Se(s=>{if(s===null)return Ur(r);let a=$m(s);return pb(a),j(a)}))}processSegment(e,n,r,i,o,s,a){return Ee(n).pipe(pr(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,o,s,a).pipe(fn(c=>{if(c instanceof to)return j(null);throw c}))),wt(l=>!!l),fn(l=>{if(Bm(l))return db(r,i,o)?j(new ld):Ur(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,l){return mt(r)!==s&&(s===U||!Qs(i,o,r))?Ur(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,l):Ur(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=Gm(n,i,o);if(!l)return Ur(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fb&&(this.allowRedirects=!1));let f=new Gr(o,c,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Dm(i),mt(i),i.component??i._loadedComponent??null,i,_m(i)),p=Ws(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let g=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(i,g).pipe(Se(m=>this.processSegment(e,r,n,m.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=ob(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(dt(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(dt(({routes:c})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new Gr(h,d,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,Dm(r),mt(r),r.component??r._loadedComponent??null,r,_m(r)),g=Ws(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:m,slicedSegments:v}=ym(n,h,f,c);if(v.length===0&&m.hasChildren())return this.processChildren(u,c,m,p).pipe(X(D=>new Ze(p,D)));if(c.length===0&&v.length===0)return j(new Ze(p,[]));let y=mt(r)===o;return this.processSegment(u,c,m,v,y?U:o,!0,p).pipe(X(D=>new Ze(p,D instanceof Ze?[D]:[])))}))):Ur(n)))}getChildConfig(e,n,r){return n.children?j({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?j({routes:n._loadedRoutes,injector:n._loadedInjector}):tb(e,n,r,this.urlSerializer).pipe(Se(i=>i?this.configLoader.loadChildren(e,n).pipe(Ne(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):ib(n))):j({routes:[],injector:e})}};function pb(t){t.sort((e,n)=>e.value.outlet===U?-1:n.value.outlet===U?1:e.value.outlet.localeCompare(n.value.outlet))}function gb(t){let e=t.value.routeConfig;return e&&e.path===""}function $m(t){let e=[],n=new Set;for(let r of t){if(!gb(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=$m(r.children);e.push(new Ze(r.value,i))}return e.filter(r=>!n.has(r))}function Dm(t){return t.data||{}}function _m(t){return t.resolve||{}}function mb(t,e,n,r,i,o){return Se(s=>hb(t,e,n,r,s.extractedUrl,i,o).pipe(X(({state:a,tree:l})=>he(S({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function vb(t,e){return Se(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return j(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of qm(l))s.add(c);let a=0;return Ee(s).pipe(pr(l=>o.has(l)?yb(l,r,t,e):(l.data=Ws(l,l.parent,t).resolve,j(void 0))),Ne(()=>a++),gr(1),Se(l=>a===s.size?j(n):We))})}function qm(t){let e=t.children.map(n=>qm(n)).flat();return[t,...e]}function yb(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Lm(i)&&(o[ro]=i.title),Db(o,t,e,r).pipe(X(s=>(t._resolvedData=s,t.data=Ws(t,t.parent,n).resolve,null)))}function Db(t,e,n,r){let i=Vu(t);if(i.length===0)return j({});let o={};return Ee(i).pipe(Se(s=>_b(t[s],e,n,r).pipe(wt(),Ne(a=>{if(a instanceof eo)throw Ks(new Wi,a);o[s]=a}))),gr(1),Hl(o),fn(s=>Bm(s)?We:hr(s)))}function _b(t,e,n,r){let i=io(e)??r,o=Kr(t,i),s=o.resolve?o.resolve(e,n):qt(i,()=>o(e,n));return Dn(s)}function Lu(t){return dt(e=>{let n=t(e);return n?Ee(n).pipe(X(()=>e)):j(e)})}var zm=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===U);return i}getResolvedTitleForRoute(r){return r.data[ro]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>E(Cb),providedIn:"root"});let t=e;return t})(),Cb=(()=>{let e=class e extends zm{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(W(fm))},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pd=new V("",{providedIn:"root",factory:()=>({})}),wb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Rr({type:e,selectors:[["ng-component"]],standalone:!0,features:[jr],decls:1,vars:0,template:function(i,o){i&1&&Wn(0,"router-outlet")},dependencies:[Aw],encapsulation:2});let t=e;return t})();function gd(t){let e=t.children&&t.children.map(gd),n=e?he(S({},t),{children:e}):S({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==U&&(n.component=wb),n}var md=new V(""),bb=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=E(Eu)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return j(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Dn(r.loadComponent()).pipe(X(Wm),Ne(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),mi(()=>{this.componentLoaders.delete(r)})),o=new dr(i,()=>new Be).pipe(ur());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return j({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=Eb(i,this.compiler,r,this.onLoadEndListener).pipe(mi(()=>{this.childrenLoaders.delete(i)})),a=new dr(s,()=>new Be).pipe(ur());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Eb(t,e,n,r){return Dn(t.loadChildren()).pipe(X(Wm),Se(i=>i instanceof Mi||Array.isArray(i)?j(i):Ee(e.compileModuleAsync(i))),X(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(md,[],{optional:!0,self:!0}).flat()),{routes:s.map(gd),injector:o}}))}function Sb(t){return t&&typeof t=="object"&&"default"in t}function Wm(t){return Sb(t)?t.default:t}var vd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>E(Ib),providedIn:"root"});let t=e;return t})(),Ib=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Mb=new V("");var Tb=new V(""),xb=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Be,this.transitionAbortSubject=new Be,this.configLoader=E(bb),this.environmentInjector=E(rt),this.urlSerializer=E(dd),this.rootContexts=E(Zs),this.location=E(ki),this.inputBindingEnabled=E(fd,{optional:!0})!==null,this.titleStrategy=E(zm),this.options=E(pd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=E(vd),this.createViewTransition=E(Mb,{optional:!0}),this.navigationErrorHandler=E(Tb,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>j(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Yu(o)),i=o=>this.events.next(new Ku(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(he(S(S({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new Ae({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:qi,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(s=>s.id!==0),X(s=>he(S({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),dt(s=>{let a=!1,l=!1;return j(s).pipe(dt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Qe.SupersededByNewNavigation),We;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?he(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new er(c.id,this.urlSerializer.serialize(c.rawUrl),h,Gu.IgnoredSameUrlNavigation)),c.resolve(!1),We}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return j(c).pipe(dt(h=>{let f=this.transitions?.getValue();return this.events.next(new Xi(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?We:Promise.resolve(h)}),mb(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ne(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=he(S({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new $s(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=c,v=new Xi(h,this.urlSerializer.serialize(f),p,g);this.events.next(v);let y=Fm(this.rootComponentType).snapshot;return this.currentTransition=s=he(S({},c),{targetSnapshot:y,urlAfterRedirects:f,extras:he(S({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,j(s)}else{let h="";return this.events.next(new er(c.id,this.urlSerializer.serialize(c.extractedUrl),h,Gu.IgnoredByUrlHandlingStrategy)),c.resolve(!1),We}}),Ne(c=>{let u=new $u(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),X(c=>(this.currentTransition=s=he(S({},c),{guards:kw(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),Ww(this.environmentInjector,c=>this.events.next(c)),Ne(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Ks(this.urlSerializer,c.guardsResult);let u=new qu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),ut(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Qe.GuardRejected),!1)),Lu(c=>{if(c.guards.canActivateChecks.length)return j(c).pipe(Ne(u=>{let d=new zu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),dt(u=>{let d=!1;return j(u).pipe(vb(this.paramsInheritanceStrategy,this.environmentInjector),Ne({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Qe.NoDataFromResolver)}}))}),Ne(u=>{let d=new Wu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Lu(c=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ne(f=>{d.component=f}),X(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Wo(u(c.targetSnapshot.root)).pipe(pn(null),Ut(1))}),Lu(()=>this.afterPreactivation()),dt(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?Ee(d).pipe(X(()=>s)):j(s)}),X(c=>{let u=Nw(r.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=he(S({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Ne(()=>{this.events.next(new Qi)}),Fw(this.rootContexts,r.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Ut(1),Ne({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jn(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),zl(this.transitionAbortSubject.pipe(Ne(c=>{throw c}))),mi(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",Qe.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),fn(c=>{if(l=!0,Um(c))this.events.next(new Yt(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),Pw(c)?this.events.next(new zr(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Zi(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=qt(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof eo){let{message:h,cancellationCode:f}=Ks(this.urlSerializer,d);this.events.next(new Yt(s.id,this.urlSerializer.serialize(s.extractedUrl),h,f)),this.events.next(new zr(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let h=r.errorHandler(c);s.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return We}))}))}cancelNavigationTransition(r,i,o){let s=new Yt(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ab(t){return t!==qi}var Nb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>E(Rb),providedIn:"root"});let t=e;return t})(),ud=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Rb=(()=>{let e=class e extends ud{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=nu(e)))(o||e)}})(),e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ym=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:()=>E(Ob),providedIn:"root"});let t=e;return t})(),Ob=(()=>{let e=class e extends Ym{constructor(){super(...arguments),this.location=E(ki),this.urlSerializer=E(dd),this.options=E(pd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=E(vd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Kt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Fm(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Xi)this.stateMemento=this.createStateMemento();else if(r instanceof er)this.rawUrlTree=i.initialUrl;else if(r instanceof $s){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else r instanceof Qi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Yt&&(r.code===Qe.GuardRejected||r.code===Qe.NoDataFromResolver)?this.restoreHistory(i):r instanceof Zi?this.restoreHistory(i,!0):r instanceof Jn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=r instanceof Kt?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=S(S({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=S(S({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=nu(e)))(o||e)}})(),e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gi=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Gi||{});function Pb(t,e){t.events.pipe(ut(n=>n instanceof Jn||n instanceof Yt||n instanceof Zi||n instanceof er),X(n=>n instanceof Jn||n instanceof er?Gi.COMPLETE:(n instanceof Yt?n.code===Qe.Redirect||n.code===Qe.SupersededByNewNavigation:!1)?Gi.REDIRECTING:Gi.FAILED),ut(n=>n!==Gi.REDIRECTING),Ut(1)).subscribe(()=>{e()})}function Fb(t){throw t}var kb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Lb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Km=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=E(Ns),this.stateManager=E(Ym),this.options=E(pd,{optional:!0})||{},this.pendingTasks=E(Pr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=E(xb),this.urlSerializer=E(dd),this.location=E(ki),this.urlHandlingStrategy=E(vd),this._events=new Be,this.errorHandler=this.options.errorHandler||Fb,this.navigated=!1,this.routeReuseStrategy=E(Nb),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=E(md,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!E(fd,{optional:!0}),this.eventsSubscription=new Ce,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Yt&&i.code!==Qe.Redirect&&i.code!==Qe.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Jn)this.navigated=!0;else if(i instanceof zr){let a=i.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c=S({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ab(o.source)},a);this.scheduleNavigation(l,qi,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Vb(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),qi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=S({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(r);this.scheduleNavigation(l,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(gd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=i,u=c?this.currentUrlTree.fragment:a,d=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":d=S(S({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=Nm(f)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),h=this.currentUrlTree.root}return Rm(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Yi(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,qi,null,i)}navigate(r,i={skipLocationChange:!1}){return jb(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=S({},kb):i===!1?o=S({},Lb):o=i,Yi(r))return pm(this.currentUrlTree,r,o);let s=this.parseUrl(r);return pm(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,f)=>{l=h,c=f});let d=this.pendingTasks.add();return Pb(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jb(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new O(4008,!1)}function Vb(t){return!(t instanceof Qi)&&!(t instanceof zr)}var Ub=new V("");function Xm(t,...e){return bs([{provide:md,multi:!0,useValue:t},[],{provide:Wr,useFactory:Bb,deps:[Km]},{provide:bu,multi:!0,useFactory:Hb},e.map(n=>n.\u0275providers)])}function Bb(t){return t.routerState.root}function Hb(){let t=E(Bn);return e=>{let n=t.get(Kn);if(e!==n.components[0])return;let r=t.get(Km),i=t.get(Gb);t.get($b)===1&&r.initialNavigation(),t.get(qb,null,B.Optional)?.setUpPreloading(),t.get(Ub,null,B.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Gb=new V("",{factory:()=>new Be}),$b=new V("",{providedIn:"root",factory:()=>1});var qb=new V("");var Zm=[];var Qm={providers:[Bg({eventCoalescing:!0}),Xm(Zm)]};var jt=Fy(by());var f4=["canvasContainer"],yl=class t{containerRef;stage;layer;head;body;leftArm;rightArm;leftLeg;rightLeg;leftElbow;rightElbow;leftHand;rightHand;leftKnee;rightKnee;leftFoot;rightFoot;hat;animT;animW;ngOnInit(){this.stage=new jt.default.Stage({container:this.containerRef.nativeElement,width:800,height:800}),this.layer=new jt.default.Layer,this.stage.add(this.layer),this.initAnimations()}ngAfterViewInit(){this.drawHuman()}initAnimations(){this.animT=new jt.default.Animation(e=>{let n=e.time,r=50*Math.sin(n*2*Math.PI/1e3)+160;this.leftElbow.y(r),this.rightElbow.y(r),this.updateJointPosition(this.leftElbow,450,160,60),this.updateJointPosition(this.rightElbow,450,160,60);let i=n*5*Math.PI/1e3;this.leftHand.x(this.leftElbow.x()+60*Math.cos(i)),this.leftHand.y(this.leftElbow.y()+60*Math.sin(i)),this.rightHand.x(this.rightElbow.x()+60*Math.cos(-i+Math.PI)),this.rightHand.y(this.rightElbow.y()+60*Math.sin(-i+Math.PI)),this.leftArm.points([450,160,this.leftElbow.x(),this.leftElbow.y(),this.leftHand.x(),this.leftHand.y()]),this.rightArm.points([450,160,this.rightElbow.x(),this.rightElbow.y(),this.rightHand.x(),this.rightHand.y()])}),this.animW=new jt.default.Animation(e=>{this.leftElbow.y(10*Math.sin(e.time*2*Math.PI/2e3)+160),this.rightElbow.y(10*Math.cos(e.time*2*Math.PI/2e3)+160),this.leftHand.y(10*Math.cos(e.time*2*Math.PI/2e3)+160),this.rightHand.y(10*Math.sin(e.time*2*Math.PI/2e3)+160),this.leftArm.points([450,160,this.leftElbow.x(),this.leftElbow.y(),this.leftHand.x(),this.leftHand.y()]),this.rightArm.points([450,160,this.rightElbow.x(),this.rightElbow.y(),this.rightHand.x(),this.rightHand.y()])})}startAnimationW(){this.animT.stop(),this.animW.start()}stopAnimationW(){this.animW.stop()}startAnimationT(){this.animW.stop(),this.animT.start()}stopAnimationT(){this.animT.stop()}drawHuman(){this.head=new jt.default.Circle({x:450,y:100,radius:30,fill:"gray",stroke:"black",strokeWidth:5}),this.body=new jt.default.Line({points:[450,130,450,300],stroke:"black",strokeWidth:5}),this.hat=new jt.default.Wedge({x:450,y:30,radius:70,angle:60,fill:"red",stroke:"black",strokeWidth:4,rotation:60}),this.leftElbow=this.createJoint(390,160),this.rightElbow=this.createJoint(510,160),this.leftHand=this.createJoint(330,160),this.rightHand=this.createJoint(570,160),this.leftKnee=this.createJoint(370,300),this.rightKnee=this.createJoint(530,300),this.leftFoot=this.createJoint(290,300),this.rightFoot=this.createJoint(610,300),this.leftArm=this.createLine(450,160,this.leftElbow,this.leftHand),this.rightArm=this.createLine(450,160,this.rightElbow,this.rightHand),this.leftLeg=this.createLine(450,300,this.leftKnee,this.leftFoot),this.rightLeg=this.createLine(450,300,this.rightKnee,this.rightFoot),this.layer.add(this.head),this.layer.add(this.body),this.layer.add(this.hat),this.layer.add(this.leftArm),this.layer.add(this.rightArm),this.layer.add(this.leftLeg),this.layer.add(this.rightLeg),this.layer.add(this.leftElbow),this.layer.add(this.rightElbow),this.layer.add(this.leftHand),this.layer.add(this.rightHand),this.layer.add(this.leftKnee),this.layer.add(this.rightKnee),this.layer.add(this.leftFoot),this.layer.add(this.rightFoot),this.layer.draw(),this.dragControl(this.leftElbow,this.leftHand,this.leftArm,450,160,60,60),this.dragControl(this.rightElbow,this.rightHand,this.rightArm,450,160,60,60),this.dragControl(this.leftKnee,this.leftFoot,this.leftLeg,450,300,80,80),this.dragControl(this.rightKnee,this.rightFoot,this.rightLeg,450,300,80,80)}createJoint(e,n){let r=new jt.default.Circle({x:e,y:n,radius:12,fill:"black",draggable:!0});return this.mouseControl(r)}createLine(e,n,r,i){return new jt.default.Line({points:[e,n,r.x(),r.y(),i.x(),i.y()],stroke:"black",strokeWidth:5,lineCap:"round",lineJoin:"bevel"})}dragControl(e,n,r,i,o,s,a){e.on("dragmove",()=>{this.updateJointPosition(e,i,o,s),this.updateJointPosition(n,e.x(),e.y(),a),r.points([i,o,e.x(),e.y(),n.x(),n.y()]),this.layer.draw()}),n.on("dragmove",()=>{this.updateJointPosition(n,e.x(),e.y(),a),r.points([i,o,e.x(),e.y(),n.x(),n.y()]),this.layer.draw()})}updateJointPosition(e,n,r,i){let o=e.x()-n,s=e.y()-r,a=Math.sqrt(o*o+s*s);if(a>i||a<i){let l=Math.atan2(s,o);e.x(n+i*Math.cos(l)),e.y(r+i*Math.sin(l))}}mouseControl(e){return e.on("mouseenter",()=>{this.stage.container().style.cursor="pointer"}),e.on("mouseleave",()=>{this.stage.container().style.cursor="default"}),e}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Rr({type:t,selectors:[["app-human"]],viewQuery:function(n,r){if(n&1&&Fg(f4,7),n&2){let i;Cu(i=wu())&&(r.containerRef=i.first)}},standalone:!0,features:[jr],decls:6,vars:0,consts:[["canvasContainer",""],["type","button","value","Start wave",3,"click"],["type","button","value","Stop wave",3,"click"],["type","button","value","Start tectonic",3,"click"],["type","button","value","Stop tectonic",3,"click"]],template:function(n,r){if(n&1){let i=Pg();qn(0,"input",1),Yn("click",function(){return Ni(i),Ri(r.startAnimationW())}),zn(),qn(1,"input",2),Yn("click",function(){return Ni(i),Ri(r.stopAnimationW())}),zn(),qn(2,"input",3),Yn("click",function(){return Ni(i),Ri(r.startAnimationT())}),zn(),qn(3,"input",4),Yn("click",function(){return Ni(i),Ri(r.stopAnimationT())}),zn(),Wn(4,"div",null,0)}}})};var Dl=class t{title="human";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Rr({type:t,selectors:[["app-root"]],standalone:!0,features:[jr],decls:1,vars:0,template:function(n,r){n&1&&Wn(0,"app-human")},dependencies:[yl]})};hm(Dl,Qm).catch(t=>console.error(t));
